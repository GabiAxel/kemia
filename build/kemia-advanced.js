function aa(){return function(){}}function ba(d){return function(e){this[d]=e}}function w(d){return function(){return this[d]}}function B(d){return function(){return d}}var a,C=this;function D(d,e,h){d=d.split(".");h=h||C;!(d[0]in h)&&h.execScript&&h.execScript("var "+d[0]);for(var l;d.length&&(l=d.shift());)if(!d.length&&e!==undefined)h[l]=e;else h=h[l]?h[l]:(h[l]={})}function ca(d,e){d=d.split(".");e=e||C;for(var h;h=d.shift();)if(e[h])e=e[h];else return null;return e}function da(){}
function ea(d){d.ua=function(){return d.Uj||(d.Uj=new d)}}
function fa(d){var e=typeof d;if(e=="object")if(d){if(d instanceof Array||!(d instanceof Object)&&Object.prototype.toString.call(d)=="[object Array]"||typeof d.length=="number"&&typeof d.splice!="undefined"&&typeof d.propertyIsEnumerable!="undefined"&&!d.propertyIsEnumerable("splice"))return"array";if(!(d instanceof Object)&&(Object.prototype.toString.call(d)=="[object Function]"||typeof d.call!="undefined"&&typeof d.propertyIsEnumerable!="undefined"&&!d.propertyIsEnumerable("call")))return"function"}else return"null";
else if(e=="function"&&typeof d.call=="undefined")return"object";return e}function ha(d){return fa(d)=="array"}function ia(d){var e=fa(d);return e=="array"||e=="object"&&typeof d.length=="number"}function F(d){return typeof d=="string"}function ja(d){return typeof d=="number"}function ka(d){return fa(d)=="function"}function na(d){d=fa(d);return d=="object"||d=="array"||d=="function"}function oa(d){if(d.hasOwnProperty&&d.hasOwnProperty(pa))return d[pa];d[pa]||(d[pa]=++qa);return d[pa]}
var pa="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),qa=0;function ra(d){var e=fa(d);if(e=="object"||e=="array"){if(d.aa)return d.aa.call(d);e=e=="array"?[]:{};for(var h in d)e[h]=ra(d[h]);return e}return d}function sa(d,e){var h=e||C;if(arguments.length>2){var l=Array.prototype.slice.call(arguments,2);return function(){var m=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(m,l);return d.apply(h,m)}}else return function(){return d.apply(h,arguments)}}
function ta(d){var e=Array.prototype.slice.call(arguments,1);return function(){var h=Array.prototype.slice.call(arguments);h.unshift.apply(h,e);return d.apply(this,h)}}var ua=Date.now||function(){return+new Date};function G(d,e){e=e||{};for(var h in e)d=d.replace(new RegExp("\\{\\$"+h+"\\}","gi"),e[h]);return d}function va(d,e,h){D(d,e,h)}function H(d,e){function h(){}h.prototype=e.prototype;d.g=e.prototype;d.prototype=new h;d.prototype.constructor=d};function wa(){}wa.prototype.pg=false;wa.prototype.da=function(){if(!this.pg){this.pg=true;this.k()}};wa.prototype.k=aa();var xa=Array.prototype,ya=xa.indexOf?function(d,e,h){return xa.indexOf.call(d,e,h)}:function(d,e,h){h=h==null?0:h<0?Math.max(0,d.length+h):h;if(F(d)){if(!F(e)||e.length!=1)return-1;return d.indexOf(e,h)}for(h=h;h<d.length;h++)if(h in d&&d[h]===e)return h;return-1},I=xa.forEach?function(d,e,h){xa.forEach.call(d,e,h)}:function(d,e,h){for(var l=d.length,m=F(d)?d.split(""):d,n=0;n<l;n++)n in m&&e.call(h,m[n],n,d)},za=xa.filter?function(d,e,h){return xa.filter.call(d,e,h)}:function(d,e,h){for(var l=d.length,
m=[],n=0,o=F(d)?d.split(""):d,q=0;q<l;q++)if(q in o){var s=o[q];if(e.call(h,s,q,d))m[n++]=s}return m},J=xa.map?function(d,e,h){return xa.map.call(d,e,h)}:function(d,e,h){for(var l=d.length,m=new Array(l),n=F(d)?d.split(""):d,o=0;o<l;o++)if(o in n)m[o]=e.call(h,n[o],o,d);return m};function Aa(d,e,h,l){if(d.reduce)return l?d.reduce(sa(e,l),h):d.reduce(e,h);var m=h;I(d,function(n,o){m=e.call(l,m,n,o,d)});return m}
var Ba=xa.some?function(d,e,h){return xa.some.call(d,e,h)}:function(d,e,h){for(var l=d.length,m=F(d)?d.split(""):d,n=0;n<l;n++)if(n in m&&e.call(h,m[n],n,d))return true;return false},Ca=xa.every?function(d,e,h){return xa.every.call(d,e,h)}:function(d,e,h){for(var l=d.length,m=F(d)?d.split(""):d,n=0;n<l;n++)if(n in m&&!e.call(h,m[n],n,d))return false;return true};
function Da(d,e,h){a:{for(var l=d.length,m=F(d)?d.split(""):d,n=0;n<l;n++)if(n in m&&e.call(h,m[n],n,d)){e=n;break a}e=-1}return e<0?null:F(d)?d.charAt(e):d[e]}function K(d,e){return ya(d,e)>=0}function Ea(d,e,h){Fa(d,h,0,e)}function Ga(d,e){e=ya(d,e);var h;if(h=e>=0)Ha(d,e);return h}function Ha(d,e){return xa.splice.call(d,e,1).length==1}function Ia(){return xa.concat.apply(xa,arguments)}function Ja(d){if(ha(d))return Ia(d);else{for(var e=[],h=0,l=d.length;h<l;h++)e[h]=d[h];return e}}
function Ka(d){for(var e=1;e<arguments.length;e++){var h=arguments[e],l;if(ha(h)||(l=ia(h))&&h.hasOwnProperty("callee"))d.push.apply(d,h);else if(l)for(var m=d.length,n=h.length,o=0;o<n;o++)d[m+o]=h[o];else d.push(h)}}function Fa(d){return xa.splice.apply(d,La(arguments,1))}function La(d,e,h){return arguments.length<=2?xa.slice.call(d,e):xa.slice.call(d,e,h)}
function Ma(d,e){e=e||d;for(var h={},l=0,m=0;m<d.length;){var n=d[m++],o=na(n)?oa(n):n;if(!Object.prototype.hasOwnProperty.call(h,o)){h[o]=true;e[l++]=n}}e.length=l}function Na(d,e,h){if(!ia(d)||!ia(e)||d.length!=e.length)return false;var l=d.length;h=h||Oa;for(var m=0;m<l;m++)if(!h(d[m],e[m]))return false;return true}function Pa(d,e){return d>e?1:d<e?-1:0}function Oa(d,e){return d===e}function Qa(d,e){for(var h=[],l=0;l<e;l++)h[l]=d;return h}
function Ra(){for(var d=[],e=0;e<arguments.length;e++){var h=arguments[e];ha(h)?d.push.apply(d,Ra.apply(null,h)):d.push(h)}return d};function Sa(d,e){this.type=d;this.currentTarget=this.target=e}H(Sa,wa);a=Sa.prototype;a.k=function(){delete this.type;delete this.target;delete this.currentTarget};a.ad=false;a.ee=true;a.stopPropagation=function(){this.ad=true};a.preventDefault=function(){this.ee=false};function Ta(d){d.preventDefault()};function Ua(d,e){var h=d.length-e.length;return h>=0&&d.indexOf(e,h)==h}function Va(d){return d.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function Wa(d,e){if(e)return d.replace(Xa,"&amp;").replace(Ya,"&lt;").replace(Za,"&gt;").replace($a,"&quot;");else{if(!ab.test(d))return d;if(d.indexOf("&")!=-1)d=d.replace(Xa,"&amp;");if(d.indexOf("<")!=-1)d=d.replace(Ya,"&lt;");if(d.indexOf(">")!=-1)d=d.replace(Za,"&gt;");if(d.indexOf('"')!=-1)d=d.replace($a,"&quot;");return d}}
var Xa=/&/g,Ya=/</g,Za=/>/g,$a=/\"/g,ab=/[&<>\"]/;
function bb(d,e){var h=0;d=Va(String(d)).split(".");e=Va(String(e)).split(".");for(var l=Math.max(d.length,e.length),m=0;h==0&&m<l;m++){var n=d[m]||"",o=e[m]||"",q=new RegExp("(\\d*)(\\D*)","g"),s=new RegExp("(\\d*)(\\D*)","g");do{var t=q.exec(n)||["","",""],u=s.exec(o)||["","",""];if(t[0].length==0&&u[0].length==0)break;h=db(t[1].length==0?0:parseInt(t[1],10),u[1].length==0?0:parseInt(u[1],10))||db(t[2].length==0,u[2].length==0)||db(t[2],u[2])}while(h==0)}return h}
function db(d,e){if(d<e)return-1;else if(d>e)return 1;return 0}var eb=Math.random()*2147483648|0;var fb,gb,hb,ib,jb,kb;function lb(){return C.navigator?C.navigator.userAgent:null}function mb(){return C.navigator}jb=ib=hb=gb=fb=false;var nb;if(nb=lb()){var ob=mb();fb=nb.indexOf("Opera")==0;gb=!fb&&nb.indexOf("MSIE")!=-1;ib=(hb=!fb&&nb.indexOf("WebKit")!=-1)&&nb.indexOf("Mobile")!=-1;jb=!fb&&!hb&&ob.product=="Gecko"}var pb=fb,L=gb,M=jb,qb=hb,rb=ib,sb=mb();kb=(sb&&sb.platform||"").indexOf("Mac")!=-1;var tb=!!mb()&&(mb().appVersion||"").indexOf("X11")!=-1,ub,wb="",xb;
if(pb&&C.opera){var yb=C.opera.version;wb=typeof yb=="function"?yb():yb}else{if(M)xb=/rv\:([^\);]+)(\)|;)/;else if(L)xb=/MSIE\s+([^\);]+)(\)|;)/;else if(qb)xb=/WebKit\/(\S+)/;if(xb){var zb=xb.exec(lb());wb=zb?zb[1]:""}}ub=wb;var Ab={};function Bb(d){return Ab[d]||(Ab[d]=bb(ub,d)>=0)};function Cb(d,e){d&&this.we(d,e)}H(Cb,Sa);var Db=[1,4,2];a=Cb.prototype;a.target=null;a.relatedTarget=null;a.offsetX=0;a.offsetY=0;a.clientX=0;a.clientY=0;a.screenX=0;a.screenY=0;a.button=0;a.keyCode=0;a.charCode=0;a.ctrlKey=false;a.altKey=false;a.shiftKey=false;a.metaKey=false;a.jk=false;a.Dc=null;
a.we=function(d,e){var h=this.type=d.type;this.target=d.target||d.srcElement;this.currentTarget=e;if(e=d.relatedTarget){if(M)try{e=e.nodeName&&e}catch(l){e=null}}else if(h=="mouseover")e=d.fromElement;else if(h=="mouseout")e=d.toElement;this.relatedTarget=e;this.offsetX=d.offsetX!==undefined?d.offsetX:d.layerX;this.offsetY=d.offsetY!==undefined?d.offsetY:d.layerY;this.clientX=d.clientX!==undefined?d.clientX:d.pageX;this.clientY=d.clientY!==undefined?d.clientY:d.pageY;this.screenX=d.screenX||0;this.screenY=
d.screenY||0;this.button=d.button;this.keyCode=d.keyCode||0;this.charCode=d.charCode||(h=="keypress"?d.keyCode:0);this.ctrlKey=d.ctrlKey;this.altKey=d.altKey;this.shiftKey=d.shiftKey;this.metaKey=d.metaKey;this.jk=kb?d.metaKey:d.ctrlKey;this.Dc=d;delete this.ee;delete this.ad};function Eb(d,e){return L?d.type=="click"?e==0:!!(d.Dc.button&Db[e]):d.Dc.button==e}Cb.prototype.stopPropagation=function(){this.ad=true;if(this.Dc.stopPropagation)this.Dc.stopPropagation();else this.Dc.cancelBubble=true};
var Fb=L&&!Bb("8");Cb.prototype.preventDefault=function(){this.ee=false;var d=this.Dc;if(d.preventDefault)d.preventDefault();else{d.returnValue=false;if(Fb)try{if(d.ctrlKey||d.keyCode>=112&&d.keyCode<=123)d.keyCode=-1}catch(e){}}};Cb.prototype.k=function(){Cb.g.k.call(this);this.relatedTarget=this.currentTarget=this.target=this.Dc=null};function Gb(){}var Hb=0;a=Gb.prototype;a.key=0;a.ce=false;a.yh=false;a.we=function(d,e,h,l,m,n){if(ka(d))this.ai=true;else if(d&&d.handleEvent&&ka(d.handleEvent))this.ai=false;else throw Error("Invalid listener argument");this.Xd=d;this.ki=e;this.src=h;this.type=l;this.capture=!!m;this.tf=n;this.yh=false;this.key=++Hb;this.ce=false};a.handleEvent=function(d){if(this.ai)return this.Xd.call(this.tf||this.src,d);return this.Xd.handleEvent.call(this.Xd,d)};function Ib(d,e){this.ei=e;this.qd=[];if(d>this.ei)throw Error("[goog.structs.SimplePool] Initial cannot be greater than max");for(e=0;e<d;e++)this.qd.push(this.xc?this.xc():{})}H(Ib,wa);Ib.prototype.xc=null;Ib.prototype.Lh=null;function Jb(d){if(d.qd.length)return d.qd.pop();return d.xc?d.xc():{}}function Kb(d,e){d.qd.length<d.ei?d.qd.push(e):Lb(d,e)}function Lb(d,e){if(d.Lh)d.Lh(e);else if(ka(e.da))e.da();else for(var h in e)delete e[h]}
Ib.prototype.k=function(){Ib.g.k.call(this);for(var d=this.qd;d.length;)Lb(this,d.pop());delete this.qd};var Mb;var Nb=(Mb="ScriptEngine"in C&&C.ScriptEngine()=="JScript")?C.ScriptEngineMajorVersion()+"."+C.ScriptEngineMinorVersion()+"."+C.ScriptEngineBuildVersion():"0";var Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,Xb,Yb,Zb;
(function(){function d(){return{M:0,$b:0}}function e(){return[]}function h(){function A(E){return o.call(A.src,A.key,E)}return A}function l(){return new Gb}function m(){return new Cb}var n=Mb&&!(bb(Nb,"5.7")>=0),o;Tb=function(A){o=A};if(n){Ob=function(){return Jb(q)};Pb=function(A){Kb(q,A)};Qb=function(){return Jb(s)};Rb=function(A){Kb(s,A)};Sb=function(){return Jb(t)};Ub=function(){Kb(t,h())};Vb=function(){return Jb(u)};Xb=function(A){Kb(u,A)};Yb=function(){return Jb(v)};Zb=function(A){Kb(v,A)};
var q=new Ib(0,600);q.xc=d;var s=new Ib(0,600);s.xc=e;var t=new Ib(0,600);t.xc=h;var u=new Ib(0,600);u.xc=l;var v=new Ib(0,600);v.xc=m}else{Ob=d;Pb=da;Qb=e;Rb=da;Sb=h;Ub=da;Vb=l;Xb=da;Yb=m;Zb=da}})();function $b(d,e,h){for(var l in d)e.call(h,d[l],l,d)}function ac(d){var e=[],h=0;for(var l in d)e[h++]=d[l];return e}function cc(d){var e=[],h=0;for(var l in d)e[h++]=l;return e}function dc(d,e){var h;if(h=e in d)delete d[e];return h}function ec(d,e,h){if(e in d)throw Error('The object already contains the key "'+e+'"');d[e]=h}function fc(d,e,h){if(e in d)return d[e];return h}function gc(d){var e={};for(var h in d)e[d[h]]=h;return e}
var hc=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];function ic(d){for(var e,h,l=1;l<arguments.length;l++){h=arguments[l];for(e in h)d[e]=h[e];for(var m=0;m<hc.length;m++){e=hc[m];if(Object.prototype.hasOwnProperty.call(h,e))d[e]=h[e]}}}
function jc(){var d=arguments.length;if(d==1&&ha(arguments[0]))return jc.apply(null,arguments[0]);if(d%2)throw Error("Uneven number of arguments");for(var e={},h=0;h<d;h+=2)e[arguments[h]]=arguments[h+1];return e};var kc={},lc={},mc={},nc={};
function oc(d,e,h,l,m){if(e)if(ha(e)){for(var n=0;n<e.length;n++)oc(d,e[n],h,l,m);return null}else{l=!!l;var o=lc;e in o||(o[e]=Ob());o=o[e];if(!(l in o)){o[l]=Ob();o.M++}o=o[l];var q=oa(d),s;o.$b++;if(o[q]){s=o[q];for(n=0;n<s.length;n++){o=s[n];if(o.Xd==h&&o.tf==m){if(o.ce)break;return s[n].key}}}else{s=o[q]=Qb();o.M++}n=Sb();n.src=d;o=Vb();o.we(h,n,d,e,l,m);h=o.key;n.key=h;s.push(o);kc[h]=o;mc[q]||(mc[q]=Qb());mc[q].push(o);if(d.addEventListener){if(d==C||!d.mg)d.addEventListener(e,n,l)}else d.attachEvent(pc(e),
n);return h}else throw Error("Invalid event type");}function qc(d,e,h,l,m){if(ha(e)){for(var n=0;n<e.length;n++)qc(d,e[n],h,l,m);return null}l=!!l;d=rc(d,e,l);if(!d)return false;for(n=0;n<d.length;n++)if(d[n].Xd==h&&d[n].capture==l&&d[n].tf==m)return sc(d[n].key);return false}
function sc(d){if(!kc[d])return false;var e=kc[d];if(e.ce)return false;var h=e.src,l=e.type,m=e.ki,n=e.capture;if(h.removeEventListener){if(h==C||!h.mg)h.removeEventListener(l,m,n)}else h.detachEvent&&h.detachEvent(pc(l),m);h=oa(h);m=lc[l][n][h];if(mc[h]){var o=mc[h];Ga(o,e);o.length==0&&delete mc[h]}e.ce=true;m.hi=true;tc(l,n,h,m);delete kc[d];return true}
function tc(d,e,h,l){if(!l.Kf)if(l.hi){for(var m=0,n=0;m<l.length;m++)if(l[m].ce){var o=l[m].ki;o.src=null;Ub(o);Xb(l[m])}else{if(m!=n)l[n]=l[m];n++}l.length=n;l.hi=false;if(n==0){Rb(l);delete lc[d][e][h];lc[d][e].M--;if(lc[d][e].M==0){Pb(lc[d][e]);delete lc[d][e];lc[d].M--}if(lc[d].M==0){Pb(lc[d]);delete lc[d]}}}}
function uc(d,e,h){var l=0,m=d==null,n=e==null,o=h==null;h=!!h;if(m)$b(mc,function(s){for(var t=s.length-1;t>=0;t--){var u=s[t];if((n||e==u.type)&&(o||h==u.capture)){sc(u.key);l++}}});else{d=oa(d);if(mc[d]){d=mc[d];for(m=d.length-1;m>=0;m--){var q=d[m];if((n||e==q.type)&&(o||h==q.capture)){sc(q.key);l++}}}}return l}function rc(d,e,h){var l=lc;if(e in l){l=l[e];if(h in l){l=l[h];d=oa(d);if(l[d])return l[d]}}return null}function pc(d){if(d in nc)return nc[d];return nc[d]="on"+d}
function vc(d,e,h,l,m){var n=1;e=oa(e);if(d[e]){d.$b--;d=d[e];if(d.Kf)d.Kf++;else d.Kf=1;try{for(var o=d.length,q=0;q<o;q++){var s=d[q];if(s&&!s.ce)n&=wc(s,m)!==false}}finally{d.Kf--;tc(h,l,e,d)}}return Boolean(n)}function wc(d,e){e=d.handleEvent(e);d.yh&&sc(d.key);return e}
Tb(function(d,e){if(!kc[d])return true;d=kc[d];var h=d.type,l=lc;if(!(h in l))return true;l=l[h];var m,n;if(L){m=e||ca("window.event");e=true in l;var o=false in l;if(e){if(m.keyCode<0||m.returnValue!=undefined)return true;a:{var q=false;if(m.keyCode==0)try{m.keyCode=-1;break a}catch(s){q=true}if(q||m.returnValue==undefined)m.returnValue=true}}q=Yb();q.we(m,this);m=true;try{if(e){for(var t=Qb(),u=q.currentTarget;u;u=u.parentNode)t.push(u);n=l[true];n.$b=n.M;for(var v=t.length-1;!q.ad&&v>=0&&n.$b;v--){q.currentTarget=
t[v];m&=vc(n,t[v],h,true,q)}if(o){n=l[false];n.$b=n.M;for(v=0;!q.ad&&v<t.length&&n.$b;v++){q.currentTarget=t[v];m&=vc(n,t[v],h,false,q)}}}else m=wc(d,q)}finally{if(t){t.length=0;Rb(t)}q.da();Zb(q)}return m}n=new Cb(e,this);try{m=wc(d,n)}finally{n.da()}return m});function xc(){}H(xc,wa);a=xc.prototype;a.mg=true;a.Sf=null;a.Lc=ba("Sf");a.addEventListener=function(d,e,h,l){oc(this,d,e,h,l)};a.removeEventListener=function(d,e,h,l){qc(this,d,e,h,l)};
a.dispatchEvent=function(d){d=d;if(F(d))d=new Sa(d,this);else if(d instanceof Sa)d.target=d.target||this;else{var e=d;d=new Sa(d.type,this);ic(d,e)}e=1;var h,l=d.type,m=lc;if(l in m){m=m[l];l=true in m;var n;if(l){h=[];for(n=this;n;n=n.Sf)h.push(n);n=m[true];n.$b=n.M;for(var o=h.length-1;!d.ad&&o>=0&&n.$b;o--){d.currentTarget=h[o];e&=vc(n,h[o],d.type,true,d)&&d.ee!=false}}if(false in m){n=m[false];n.$b=n.M;if(l)for(o=0;!d.ad&&o<h.length&&n.$b;o++){d.currentTarget=h[o];e&=vc(n,h[o],d.type,false,d)&&
d.ee!=false}else for(h=this;!d.ad&&h&&n.$b;h=h.Sf){d.currentTarget=h;e&=vc(n,h,d.type,false,d)&&d.ee!=false}}d=Boolean(e)}else d=true;return d};a.k=function(){xc.g.k.call(this);uc(this);this.Sf=null};function yc(d){if(typeof d.mb=="function")return d.mb();if(ia(d)||F(d))return d.length;var e=0;for(var h in d)e++;return e}function zc(d){if(typeof d.ga=="function")return d.ga();if(F(d))return d.split("");if(ia(d)){for(var e=[],h=d.length,l=0;l<h;l++)e.push(d[l]);return e}return ac(d)}function Ac(d){if(typeof d.vg=="function")return d.vg();if(typeof d.ga!="function"){if(ia(d)||F(d)){var e=[];d=d.length;for(var h=0;h<d;h++)e.push(h);return e}return cc(d)}}
function Bc(d,e){if(typeof d.contains=="function")return d.contains(e);if(typeof d.Eh=="function")return d.Eh(e);if(ia(d)||F(d))return K(d,e);a:{for(var h in d)if(d[h]==e){d=true;break a}d=false}return d}function Cc(d,e,h){if(typeof d.forEach=="function")d.forEach(e,h);else if(ia(d)||F(d))I(d,e,h);else for(var l=Ac(d),m=zc(d),n=m.length,o=0;o<n;o++)e.call(h,m[o],l&&l[o],d)}
function Dc(d,e,h){if(typeof d.every=="function")return d.every(e,h);if(ia(d)||F(d))return Ca(d,e,h);for(var l=Ac(d),m=zc(d),n=m.length,o=0;o<n;o++)if(!e.call(h,m[o],l&&l[o],d))return false;return true};function Ec(d){this.ma={};this.T=[];var e=arguments.length;if(e>1){if(e%2)throw Error("Uneven number of arguments");for(var h=0;h<e;h+=2)this.Da(arguments[h],arguments[h+1])}else d&&this.Ed(d)}a=Ec.prototype;a.M=0;a.lh=0;a.mb=w("M");a.ga=function(){Fc(this);for(var d=[],e=0;e<this.T.length;e++)d.push(this.ma[this.T[e]]);return d};a.vg=function(){Fc(this);return this.T.concat()};a.Eh=function(d){for(var e=0;e<this.T.length;e++){var h=this.T[e];if(Gc(this.ma,h)&&this.ma[h]==d)return true}return false};
a.Kd=function(d,e){if(this===d)return true;if(this.M!=d.mb())return false;e=e||Hc;Fc(this);for(var h,l=0;h=this.T[l];l++)if(!e(this.m(h),d.m(h)))return false;return true};function Hc(d,e){return d===e}Ec.prototype.clear=function(){this.ma={};this.lh=this.M=this.T.length=0};Ec.prototype.remove=function(d){if(Gc(this.ma,d)){delete this.ma[d];this.M--;this.lh++;this.T.length>2*this.M&&Fc(this);return true}return false};
function Fc(d){if(d.M!=d.T.length){for(var e=0,h=0;e<d.T.length;){var l=d.T[e];if(Gc(d.ma,l))d.T[h++]=l;e++}d.T.length=h}if(d.M!=d.T.length){var m={};for(h=e=0;e<d.T.length;){l=d.T[e];if(!Gc(m,l)){d.T[h++]=l;m[l]=1}e++}d.T.length=h}}Ec.prototype.m=function(d,e){if(Gc(this.ma,d))return this.ma[d];return e};Ec.prototype.Da=function(d,e){if(!Gc(this.ma,d)){this.M++;this.T.push(d);this.lh++}this.ma[d]=e};
Ec.prototype.Ed=function(d){var e;if(d instanceof Ec){e=d.vg();d=d.ga()}else{e=cc(d);d=ac(d)}for(var h=0;h<e.length;h++)this.Da(e[h],d[h])};Ec.prototype.aa=function(){return new Ec(this)};function Gc(d,e){return Object.prototype.hasOwnProperty.call(d,e)};function Ic(d){this.ma=new Ec;d&&this.Ed(d)}function Jc(d){var e=typeof d;return e=="object"&&d||e=="function"?"o"+oa(d):e.substr(0,1)+d}a=Ic.prototype;a.mb=function(){return this.ma.mb()};a.add=function(d){this.ma.Da(Jc(d),d)};a.Ed=function(d){d=zc(d);for(var e=d.length,h=0;h<e;h++)this.add(d[h])};a.Ke=function(d){d=zc(d);for(var e=d.length,h=0;h<e;h++)this.remove(d[h])};a.remove=function(d){return this.ma.remove(Jc(d))};a.clear=function(){this.ma.clear()};
a.contains=function(d){d=Jc(d);return Gc(this.ma.ma,d)};a.Yh=function(d){var e=new Ic;d=zc(d);for(var h=0;h<d.length;h++){var l=d[h];this.contains(l)&&e.add(l)}return e};a.ga=function(){return this.ma.ga()};a.aa=function(){return new Ic(this)};a.Kd=function(d){return this.mb()==yc(d)&&Kc(this,d)};function Kc(d,e){var h=yc(e);if(d.mb()>h)return false;if(!(e instanceof Ic)&&h>5)e=new Ic(e);return Dc(d,function(l){return Bc(e,l)})};function Lc(d){return Mc(d||arguments.callee.caller,[])}
function Mc(d,e){var h=[];if(K(e,d))h.push("[...circular reference...]");else if(d&&e.length<50){h.push(Nc(d)+"(");for(var l=d.arguments,m=0;m<l.length;m++){m>0&&h.push(", ");var n;n=l[m];switch(typeof n){case "object":n=n?"object":"null";break;case "string":n=n;break;case "number":n=String(n);break;case "boolean":n=n?"true":"false";break;case "function":n=(n=Nc(n))?n:"[fn]";break;case "undefined":default:n=typeof n;break}if(n.length>40)n=n.substr(0,40)+"...";h.push(n)}e.push(d);h.push(")\n");try{h.push(Mc(d.caller,
e))}catch(o){h.push("[exception trying to get caller]\n")}}else d?h.push("[...long stack...]"):h.push("[end]");return h.join("")}function Nc(d){d=String(d);if(!Oc[d]){var e=/function ([^\(]+)/.exec(d);Oc[d]=e?e[1]:"[Anonymous]"}return Oc[d]}var Oc={};function Pc(d,e,h,l,m){this.dm=typeof m=="number"?m:Qc++;this.im=l||ua();this.Ae=d;this.Wl=e;this.Ul=h}Pc.prototype.mj=null;Pc.prototype.lj=null;var Qc=0;Pc.prototype.qi=ba("Ae");function Rc(d){this.qb=d}Rc.prototype.pa=null;Rc.prototype.Ae=null;Rc.prototype.ia=null;Rc.prototype.Sh=null;function Sc(d,e){this.name=d;this.value=e}Sc.prototype.toString=w("name");var Tc=new Sc("SEVERE",1E3),Uc=new Sc("WARNING",900),Vc=new Sc("INFO",800),Wc=new Sc("CONFIG",700);Rc.prototype.getName=w("qb");Rc.prototype.qi=ba("Ae");function Xc(d,e){if(d.Ae)return e.value>=d.Ae.value;if(d.pa)return Xc(d.pa,e);return false}Rc.prototype.log=function(d,e,h){Xc(this,d)&&Yc(this,this.rj(d,e,h))};
Rc.prototype.rj=function(d,e,h){var l=new Pc(d,String(e),this.qb);if(h){l.mj=h;var m;var n=arguments.callee.caller;try{var o,q=ca("window.location.href");o=typeof h=="string"?{message:h,name:"Unknown error",lineNumber:"Not available",fileName:q,stack:"Not available"}:!h.lineNumber||!h.fileName||!h.stack?{message:h.message,name:h.name,lineNumber:h.lineNumber||h.Sl||"Not available",fileName:h.fileName||h.filename||h.sourceURL||q,stack:h.stack||"Not available"}:h;m="Message: "+Wa(o.message)+'\nUrl: <a href="view-source:'+
o.fileName+'" target="_new">'+o.fileName+"</a>\nLine: "+o.lineNumber+"\n\nBrowser stack:\n"+Wa(o.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Wa(Lc(n)+"-> ")}catch(s){m="Exception trying to expose exception! You win, we lose. "+s}l.lj=m}return l};function Zc(d,e,h){d.log(Tc,e,h)}Rc.prototype.info=function(d,e){this.log(Vc,d,e)};Rc.prototype.i=function(d,e){this.log(Wc,d,e)};function Yc(d,e){for(d=d;d;){var h=d;if(h.Sh)for(var l=0,m=void 0;m=h.Sh[l];l++)m(e);d=d.pa}}var $c={},bd=null;
function N(d){if(!bd){bd=new Rc("");$c[""]=bd;bd.qi(Wc)}return $c[d]||cd(d)}function cd(d){var e=new Rc(d),h=d.lastIndexOf("."),l=d.substr(0,h);h=d.substr(h+1);l=N(l);if(!l.ia)l.ia={};l.ia[h]=e;e.pa=l;return $c[d]=e};function dd(d){this.Lc(d)}H(dd,xc);dd.prototype.Bb=function(){this.dispatchEvent(ed)};dd.prototype.Ab=function(){this.dispatchEvent(fd)};var ed="reaction_mouseover",fd="reaction_mouseout";dd.prototype.r=N("kemia.controller.ReactionController");function gd(d,e,h,l){this.Qc=d;this.Q=e;this.i=new Ec(l);h&&this.i.Ed(h)}gd.prototype.r=N("kemia.view.Renderer");function hd(d,e){var h=id(e).sd(),l=h.width,m=d.Q.sd();h.scale(h.width/h.height>m.width/m.height?m.width/h.width:m.height/h.height);d=d.Uf*h.width/l;h=Math.max(e.top,e.bottom);return new jd(d,0,0,-d,-Math.min(e.left,e.right)*d,h*d)};function kd(d){this.Lc(d)}H(kd,xc);kd.prototype.Bb=function(d){this.dispatchEvent(new ld(this,d,md))};kd.prototype.Ab=function(d){this.dispatchEvent(new ld(this,d,nd))};kd.prototype.za=function(d){this.dispatchEvent(new ld(this,d,od))};var md="molecule_mouseover",nd="molecule_mouseout",od="molecule_mousedown";function ld(d,e,h){Sa.call(this,h,d);this.G=e}kd.prototype.r=N("kemia.controller.MoleculeController");function pd(d){this.Lc(d)}H(pd,xc);pd.prototype.r=N("kemia.controller.ArrowController");pd.prototype.Bb=function(d,e){this.dispatchEvent(new qd(this,d,e.currentTarget,rd))};pd.prototype.Ab=function(d,e){this.dispatchEvent(new qd(this,d,e.currentTarget,sd))};pd.prototype.za=function(d,e){this.dispatchEvent(new qd(this,d,e,td))};var rd="arrow_mouseover",sd="arrow_mouseout",td="arrow_mousedown";function qd(d,e,h,l){Sa.call(this,l,d);this.a=e;this.Za=h}H(qd,Sa);function ud(d){this.Lc(d)}H(ud,xc);ud.prototype.r=N("kemia.controller.PlusController");ud.prototype.Bb=function(d){this.dispatchEvent(new vd(this,d,wd))};ud.prototype.Ab=function(d){this.dispatchEvent(new vd(this,d,xd))};ud.prototype.za=function(d,e){this.r.info("handleMouseDown");e.stopPropagation();this.dispatchEvent(new vd(this,d,yd))};var wd="plus_mouseover",xd="plus_mouseout",yd="plus_mousedown";function vd(d,e,h){Sa.call(this,h,d);this.a=e}H(vd,Sa);function zd(d){this.Lc(d)}H(zd,xc);zd.prototype.r=N("kemia.controller.BondController");zd.prototype.Bb=function(d){this.dispatchEvent(new Ad(this,d,Bd))};zd.prototype.Ab=function(d){this.dispatchEvent(new Ad(this,d,Cd))};zd.prototype.za=function(d){this.dispatchEvent(new Ad(this,d,Dd))};var Bd="bond_mouseover",Cd="bond_mouseout",Dd="bond_mousedown";function Ad(d,e,h){Sa.call(this,h,d);this.wh=e}H(Ad,Sa);function O(d,e){this.x=d!==undefined?d:0;this.y=e!==undefined?e:0}O.prototype.aa=function(){return new O(this.x,this.y)};O.prototype.toString=function(){return"("+this.x+", "+this.y+")"};function Ed(d,e){var h=d.x-e.x;d=d.y-e.y;return Math.sqrt(h*h+d*d)}function Fd(d,e){return new O(d.x-e.x,d.y-e.y)}function Gd(d,e){return new O(d.x+e.x,d.y+e.y)};function Hd(d,e,h,l){this.top=d;this.right=e;this.bottom=h;this.left=l}function Id(){for(var d=new Hd(arguments[0].y,arguments[0].x,arguments[0].y,arguments[0].x),e=1;e<arguments.length;e++){var h=arguments[e];d.top=Math.min(d.top,h.y);d.right=Math.max(d.right,h.x);d.bottom=Math.max(d.bottom,h.y);d.left=Math.min(d.left,h.x)}return d}Hd.prototype.aa=function(){return new Hd(this.top,this.right,this.bottom,this.left)};
Hd.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};Hd.prototype.contains=function(d){return!this||!d?false:d instanceof Hd?d.left>=this.left&&d.right<=this.right&&d.top>=this.top&&d.bottom<=this.bottom:d.x>=this.left&&d.x<=this.right&&d.y>=this.top&&d.y<=this.bottom};
Hd.prototype.expand=function(d,e,h,l){if(na(d)){this.top-=d.top;this.right+=d.right;this.bottom+=d.bottom;this.left-=d.left}else{this.top-=d;this.right+=e;this.bottom+=h;this.left-=l}return this};function Jd(d,e){if(d==e)return true;if(!d||!e)return false;return d.top==e.top&&d.right==e.right&&d.bottom==e.bottom&&d.left==e.left};function Kd(d,e){this.width=d;this.height=e}a=Kd.prototype;a.aa=function(){return new Kd(this.width,this.height)};a.toString=function(){return"("+this.width+" x "+this.height+")"};a.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};a.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};a.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
a.scale=function(d){this.width*=d;this.height*=d;return this};function Ld(d,e,h,l){this.left=d;this.top=e;this.width=h;this.height=l}Ld.prototype.aa=function(){return new Ld(this.left,this.top,this.width,this.height)};function id(d){return new Ld(d.left,d.top,d.right-d.left,d.bottom-d.top)}Ld.prototype.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};
Ld.prototype.Yh=function(d){var e=Math.max(this.left,d.left),h=Math.min(this.left+this.width,d.left+d.width);if(e<=h){var l=Math.max(this.top,d.top);d=Math.min(this.top+this.height,d.top+d.height);if(l<=d){this.left=e;this.top=l;this.width=h-e;this.height=d-l;return true}}return false};
Ld.prototype.contains=function(d){return d instanceof Ld?this.left<=d.left&&this.left+this.width>=d.left+d.width&&this.top<=d.top&&this.top+this.height>=d.top+d.height:d.x>=this.left&&d.x<=this.left+this.width&&d.y>=this.top&&d.y<=this.top+this.height};Ld.prototype.sd=function(){return new Kd(this.width,this.height)};function Md(d){return d*Math.PI/180}function Nd(d,e,h,l){d=Math.atan2(l-e,h-d)*180/Math.PI%360;return d*360<0?d+360:d};function Od(d,e,h,l){this.gd=d;this.hd=e;this.Bd=h;this.Dd=l}Od.prototype.aa=function(){return new Od(this.gd,this.hd,this.Bd,this.Dd)};Od.prototype.Kd=function(d){return this.gd==d.gd&&this.hd==d.hd&&this.Bd==d.Bd&&this.Dd==d.Dd};function Pd(d,e,h){e=e;if(e instanceof O){h=e.y;e=e.x}else h=h;var l=d.gd,m=d.hd,n=d.Bd-d.gd,o=d.Dd-d.hd;e=((e-l)*(d.Bd-l)+(h-m)*(d.Dd-m))/(n*n+o*o);return new O(d.gd+Math.min(Math.max(e,0),1)*(d.Bd-d.gd),d.hd+Math.min(Math.max(e,0),1)*(d.Dd-d.hd))};function Qd(d,e){Od.call(this,d.x,d.y,e.x,e.y)}H(Qd,Od);function Rd(d){return Math.atan2(d.Dd-d.hd,d.Bd-d.gd)};function Sd(d,e,h){gd.call(this,d,e,h,Td)}H(Sd,gd);Sd.prototype.J=function(d,e){this.transform=e};
Sd.prototype.hb=function(d,e){var h=this.i.m("bond").stroke.width*2,l=this.i.m("highlight").color;h=new Ud(h,l);l=this.i.m("highlight").radius*this.transform.ba;var m=-Vd(d)*180/Math.PI,n=m+90;m=m<=0?d.source.a.y<=d.target.a.y?180:-180:d.source.a.y>d.target.a.y?180:-180;d=P(this.transform,[d.source.a,d.target.a]);var o=new Wd;o.arc(d[0].x,d[0].y,l,l,n,m);o.arc(d[1].x,d[1].y,l,l,n,-m);e||(e=this.Q.od());this.Q.zc(o,h,null,e);return e};function Vd(d){return Rd(new Qd(d.source.a,d.target.a))}
function Xd(d){return d.A!="C"||d.fb()==1}var Td={bond:{stroke:{width:2,color:"black"},fill:{color:"black"}},highlight:{radius:0.3,color:"blue"}};function Yd(d,e){this.x=Number(d)||0;this.y=Number(e)||0}H(Yd,O);function Zd(d){return new Yd(d.x,d.y)}Yd.prototype.aa=function(){return new Yd(this.x,this.y)};function $d(d){return Math.sqrt(d.x*d.x+d.y*d.y)}Yd.prototype.scale=function(d){this.x*=d;this.y*=d;return this};function ae(d){d.x=-d.x;d.y=-d.y;return d}Yd.prototype.normalize=function(){return this.scale(1/$d(this))};Yd.prototype.add=function(d){this.x+=d.x;this.y+=d.y;return this};
Yd.prototype.Kd=function(d){return this==d||!!d&&this.x==d.x&&this.y==d.y};function be(d,e,h){Sd.call(this,d,e,h,be.Id)}H(be,Sd);be.prototype.J=function(d,e,h){be.g.J.call(this,d,e);var l=[d.source.a,d.target.a],m=Zd(Fd(l[1],l[0]));m.scale(1/$d(m)*0.2);if(Xd(d.source))l[0]=Gd(l[0],m);if(Xd(d.target))l[1]=Fd(l[1],m);l=P(e,[l[0],l[1]]);h.moveTo(l[0].x,l[0].y);h.lineTo(l[1].x,l[1].y)};function ce(d,e,h){Sd.call(this,d,e,h,ce.Id)}H(ce,Sd);
ce.prototype.J=function(d,e,h){ce.g.J.call(this,d,e);var l=de(d);if(l){var m=Zd(Fd(d.target.a,d.source.a)),n=$d(m),o=n/6;m.scale(1/n*o);n=new Yd(m.y,-m.x);o=Gd(d.source.a,n);l.fe.x==0&&l.fe.y==0&&ee(l);((d.source.a.x-o.x)*(d.target.a.y-o.y)-(d.source.a.y-o.y)*(d.target.a.x-o.x))*((d.source.a.x-l.fe.x)*(d.target.a.y-l.fe.y)-(d.source.a.y-l.fe.y)*(d.target.a.x-l.fe.x))>0||ae(n);l=Gd(d.source.a,n);o=Gd(d.target.a,n);var q=d.source.a;n=d.target.a;if(Xd(d.source)){var s=m.aa();s.normalize();s.scale(0.2);
l=Gd(l,s);q=Gd(q,s)}else l=Gd(l,m);if(Xd(d.target)){s=m.aa();s.normalize();s.scale(0.2);o=Fd(o,s);n=Fd(n,s)}else o=Fd(o,m);d=P(e,[l,o,q,n])}else{m=Zd(Fd(d.target.a,d.source.a));n=$d(m);o=n/12;m.scale(1/n*o);n=new Yd(m.y,-m.x);l=Gd(d.source.a,n);o=Gd(d.target.a,n);q=Fd(d.source.a,n);n=Fd(d.target.a,n);if(Xd(d.source)){s=m.aa();s.normalize();s.scale(0.2);l=Gd(l,s);q=Gd(q,s)}if(Xd(d.target)){s=m.aa();s.normalize();s.scale(0.2);o=Fd(o,s);n=Fd(n,s)}d=P(e,[l,o,q,n])}h.moveTo(d[0].x,d[0].y);h.lineTo(d[1].x,
d[1].y);h.moveTo(d[2].x,d[2].y);h.lineTo(d[3].x,d[3].y)};function de(d){return Da(fe(d.G),function(e){return K(e.h,this)},d)};function ge(d,e,h){Sd.call(this,d,e,h,ge.Id)}H(ge,Sd);
ge.prototype.J=function(d,e){group=ge.g.J.call(this,d,e);var h=this.i.m("bond").stroke.width;h=new Ud(h,this.i.m("bond").stroke.color);var l=Vd(d),m=l+Math.PI/2;l=l-Math.PI/2;var n=Ed(d.source.a,d.target.a)/6;m=new jd(1,0,0,1,Math.cos(m)*n,Math.sin(m)*n);l=new jd(1,0,0,1,Math.cos(l)*n,Math.sin(l)*n);m=P(m,[d.source.a,d.target.a]);l=P(l,[d.source.a,d.target.a]);d=P(e,[d.source.a,d.target.a,m[0],m[1],l[0],l[1]]);e=new Wd;e.moveTo(d[0].x,d[0].y);e.lineTo(d[1].x,d[1].y);e.moveTo(d[2].x,d[2].y);e.lineTo(d[3].x,
d[3].y);e.moveTo(d[4].x,d[4].y);e.lineTo(d[5].x,d[5].y);this.Q.zc(e,h,null)};function he(d,e,h){Sd.call(this,d,e,h,he.Id)}H(he,Sd);
he.prototype.J=function(d,e){he.g.J.call(this,d,e);var h=this.i.m("bond").stroke.width;h=new Ud(h,this.i.m("bond").stroke.color);var l=Vd(d),m=l+Math.PI/2,n=l-Math.PI/2,o=Ed(d.source.a,d.target.a)/6,q=new jd(1,0,0,1,Math.cos(m)*o/3,Math.sin(m)*o/3);l=new jd(1,0,0,1,Math.cos(n)*o/3,Math.sin(n)*o/3);m=new jd(1,0,0,1,Math.cos(m)*o,Math.sin(m)*o);n=new jd(1,0,0,1,Math.cos(n)*o,Math.sin(n)*o);q=P(q,[d.source.a,d.target.a]);l=P(l,[d.source.a,d.target.a]);m=P(m,[d.source.a,d.target.a]);d=P(n,[d.source.a,
d.target.a]);e=P(e,[q[0],q[1],l[0],l[1],m[0],m[1],d[0],d[1]]);d=new Wd;d.moveTo(e[0].x,e[0].y);d.lineTo(e[1].x,e[1].y);d.moveTo(e[2].x,e[2].y);d.lineTo(e[3].x,e[3].y);d.moveTo(e[4].x,e[4].y);d.lineTo(e[5].x,e[5].y);d.moveTo(e[6].x,e[6].y);d.lineTo(e[7].x,e[7].y);this.Q.zc(d,h,null)};function ie(d,e,h){Sd.call(this,d,e,h,ie.Id)}H(ie,Sd);
ie.prototype.J=function(d,e,h){ie.g.J.call(this,d,e);var l=this.i.m("bond").stroke.width/10,m=Vd(d),n=m+Math.PI/2;m=m-Math.PI/2;n=je(new jd(1,0,0,1,Math.cos(n)*l,Math.sin(n)*l),[d.target.a])[0];l=je(new jd(1,0,0,1,Math.cos(m)*l,Math.sin(m)*l),[d.target.a])[0];if(d.target.A!="C"){n.x=(n.x*2+d.source.a.x)/3;n.y=(n.y*2+d.source.a.y)/3;l.x=(l.x*2+d.source.a.x)/3;l.y=(l.y*2+d.source.a.y)/3}d=P(e,[d.source.a,n,l]);h.moveTo(d[0].x,d[0].y);h.lineTo(d[1].x,d[1].y);h.lineTo(d[2].x,d[2].y)};function ke(d,e,h){Sd.call(this,d,e,h,ke.Id)}H(ke,Sd);
ke.prototype.J=function(d,e,h){ke.g.J.call(this,d,e);var l=this.i.m("bond").stroke.width/10,m=Vd(d),n=m+Math.PI/2;m=m-Math.PI/2;n=new jd(1,0,0,1,Math.cos(n)*l,Math.sin(n)*l);l=new jd(1,0,0,1,Math.cos(m)*l,Math.sin(m)*l);n=P(n,[d.source.a,d.target.a]);l=P(l,[d.source.a,d.target.a]);e=P(e,[n[0],n[1],l[0],l[1],d.source.a]);l=0;if(d.target.A!="C")l=1;for(d=0;d<7-l;d++){h.moveTo(((7-d)*e[4].x+d*e[1].x)/7,((7-d)*e[4].y+d*e[1].y)/7);h.lineTo(((7-d)*e[4].x+d*e[3].x)/7,((7-d)*e[4].y+d*e[3].y)/7)}};function le(d,e,h){Sd.call(this,d,e,h,le.Id)}H(le,Sd);
le.prototype.J=function(d,e){le.g.J.call(this,d,e);var h=new Wd,l=this.i.m("bond").stroke.width/10,m=Vd(d),n=m+Math.PI/2;m=m-Math.PI/2;n=new jd(1,0,0,1,Math.cos(n)*l,Math.sin(n)*l);l=new jd(1,0,0,1,Math.cos(m)*l,Math.sin(m)*l);n=P(n,[d.source.a,d.target.a]);d=P(l,[d.source.a,d.target.a]);e=P(e,[n[0],n[1],d[0],d[1]]);d=new Ud(this.i.m("bond").stroke.width,this.i.m("bond").stroke.color);h.moveTo(e[0].x,e[0].y);for(l=1;l<10;l++)l%2?h.lineTo(e[0].x+(e[1].x-e[0].x)*l/10,e[0].y+(e[1].y-e[0].y)*l/10):h.lineTo(e[2].x+
(e[3].x-e[2].x)*l/10,e[2].y+(e[3].y-e[2].y)*l/10);this.Q.zc(h,d,null)};var me={};var ne={C:4,Si:4,N:3,P:3,O:2,S:2,H:1};function Q(d,e,h,l,m,n){this.A=d!==undefined?d:"C";this.a=new O(e!==undefined?e:0,h!==undefined?h:0);this.h=new Ic;this.Ya=l!==undefined?l:0;this.Ef=n!==undefined?n:0;this.dc=m!==undefined?m:false;this.Nl=null;this.Ma=new Array(3)}D("kemia.model.Atom",Q,void 0);Q.prototype.zj=w("A");D("kemia.model.Atom.prototype.getSymbol",Q.prototype.zj,void 0);Q.prototype.oj=w("Ya");D("kemia.model.Atom.prototype.getCharge",Q.prototype.oj,void 0);Q.prototype.fb=function(){return this.h.mb()};
Q.prototype.Uh=function(){var d=ne[this.A],e=this.h.ga();e=Aa(e,function(l,m){return l+m.fa},0);var h=0;if(d)h=d-e+this.Ya;return h};D("kemia.model.Atom.prototype.hydrogenCount",Q.prototype.Uh,void 0);Q.prototype.Qd=function(){for(var d=this.h.ga(),e=[],h=0,l=d.length;h<l;h++)e.push(oe(d[h],this));return e};Q.prototype.aa=function(){return new Q(this.A,this.a.x,this.a.y,this.Ya,this.dc,this.Ef)};Q.prototype.Ib=function(d,e){this.Ma[d]=e};function R(d,e,h,l,m,n){this.source=d;this.target=e;this.fa=h!==undefined?h:pe;this.$=l!==undefined?l:qe;this.dc=m!==undefined?m:false;this.G=n!==undefined?n:null}D("kemia.model.Bond",R,void 0);function oe(d,e){if(e===d.source)return d.target;if(e===d.target)return d.source;return null}R.prototype.aa=function(){return new R(this.source,this.target,this.fa,this.$,this.dc,this.G)};var pe=1,qe=10;function re(d,e,h){this.Qc=d;this.Q=e;this.i=new Ec;h&&this.i.Ed(h)}re.prototype.r=N("kemia.view.BondRendererFactory");var se=gc({vj:pe,pj:2,Aj:3,sj:4}),te=gc({uj:qe,xj:11,tj:13,wj:12});a=re.prototype;a.m=function(d){return this[se[d.fa]].apply(this,[d.$])};a.vj=function(d){return this[te[d]].apply(this)};a.uj=function(){if(!this.wi)this.wi=new be(this.Qc,this.Q,this.i);return this.wi};a.xj=function(){if(!this.xi)this.xi=new ie(this.Qc,this.Q,this.i);return this.xi};
a.tj=function(){if(!this.vi)this.vi=new ke(this.Qc,this.Q,this.i);return this.vi};a.wj=function(){if(!this.yi)this.yi=new le(this.Qc,this.Q,this.i);return this.yi};a.pj=function(){if(!this.Mh)this.Mh=new ce(this.Qc,this.Q,this.i);return this.Mh};a.Aj=function(){if(!this.Ii)this.Ii=new ge(this.Qc,this.Q,this.i);return this.Ii};a.sj=function(){if(!this.li)this.li=new he(this.Qc,this.Q,this.i);return this.li};function ue(d,e,h){gd.call(this,d,e,h,ve)}H(ue,gd);
ue.prototype.J=function(d,e,h){this.transform=e;var l=this.i.m("atom"),m=this.i.m(d.A)?this.i.m(d.A).color:l.color,n=e.ba;n=new we(n/1.8>12?15:n/1.8,l.fontName);l=new Ud(l.stroke.width,"black");m=new xe(m);e=P(e,[d.a])[0];var o={text:"",Ff:"center",rc:"",yd:""};if(d.A!="C"||d.fb()==1){var q=d.Uh();if(q==0)o.text=d.A;else{var s=d.h.mb(),t=ye(d,0);if(s>1){for(var u=1;u<s;++u)t+=ye(d,u);t=t/s%360}bond_direction=t>350||t<=10?"E":t>10&&t<=80?"SE":t>80&&t<=100?"S":t>100&&t<=170?"SW":t>170&&t<=190?"W":t>
190&&t<=260?"NW":t>260&&t<=280?"N":"NE";s="center";if(bond_direction=="SW"||bond_direction=="W"||bond_direction=="NW"){s="right";if(q==1)o.text="H";o.text+=d.A}else{s="left";o.text=d.A+"H"}if(q>1)o.yd=String(q)}if(d.Ya)if(d.Ya>1)o.rc+="+"+d.Ya;else if(d.Ya<-1)o.rc+=d.Ya;else if(d.Ya==-1)o.rc="-";else if(d.Ya==1)o.rc="+"}else o.text="";o.Ff=s;d=this.Q;s=o.text.length*0.55*n.size;q=n.size;if(o.text){ze(d,o.text,e.x-s/2,e.y-q/2,s,q,o.Ff,null,n,l,m,h);if(o.Ff=="left"){if(o.yd||o.rc){t=this.i.m("subscriptSize");
o.yd&&ze(d,o.yd,e.x+s*0.9,e.y,t,t,"center",null,n,l,m,h);o.rc&&ze(d,o.rc,e.x+s,e.y-q*0.8,t,t,"center",null,n,l,m,h)}}else if(o.Ff=="right")if(o.yd||o.rc){t=this.i.m("subscriptSize");if(o.yd){ze(d,"H",e.x-s*3,e.y-q/2,s,q,"center",null,n,l,m,h);ze(d,o.yd,e.x-s*1.8,e.y,t,t,"center",null,n,l,m,h)}o.rc&&ze(d,o.rc,e.x+s,e.y-q*0.8,t,t,"center",null,n,l,m,h)}}};
ue.prototype.hb=function(d,e){var h=this.i.m("atom"),l=this.i.m(d.A)?this.i.m(d.A).color:h.color;l=new xe(l,0.3);h=h.highlight.radius*this.transform.ba;d=P(this.transform,[d.a])[0];e||(e=this.Q.od());this.Q.ef(d.x,d.y,h,h,null,l,e);return e};function ye(d,e){if(d.h.ga().length==0)return 0;e=d.h.ga()[e];var h=e.target.a,l=e.source.a,m=h.y-l.y;h=h.x-l.x;if(d==e.source){h=-h;m=-m}d=Math.atan2(m,h)*180/Math.PI;if(d<0)d=360+d;return d}ue.prototype.r=N("kemia.view.AtomRenderer");
var ve={atom:{color:"#FF9999",diameter:0.05,highlight:{radius:0.3},stroke:{width:0.15},fontName:"Arial"},margin:20,subscriptSize:5,N:{color:"blue"},O:{color:"red"},S:{color:"yellow"},P:{color:"orange"},Cl:{color:"green"},F:{color:"green"},Br:{color:"DarkRed"},I:{color:"purple"},C:{color:"black"},H:{color:"white"}};function Ae(d){this.Lc(d)}H(Ae,xc);Ae.prototype.r=N("kemia.controller.AtomController");Ae.prototype.Bb=function(d){this.dispatchEvent(new Be(this,d,Ce))};Ae.prototype.Ab=function(d){this.dispatchEvent(new Be(this,d,De))};Ae.prototype.za=function(d,e){this.r.info("handleMouseDown");e.stopPropagation();this.dispatchEvent(new Be(this,d,Ee))};var Ce="atom_mouseover",De="atom_mouseout",Ee="atom_mousedown";function Be(d,e,h){Sa.call(this,h,d);this.gg=e}H(Be,Sa);function Fe(d,e,h){gd.call(this,d,e,h,Ge);this.Uf=1;this.cj=new zd(d);this.hg=new re(this.cj,e,this.i);this.aj=new Ae(d);this.Oc=new ue(this.aj,e,this.i)}H(Fe,gd);Fe.prototype.r=N("kemia.view.MoleculeRenderer");
Fe.prototype.J=function(d,e){d.Za=this.Q.od();var h=J(d.b,function(n){return n.a});h=Id.apply(null,h);if(!e){var l=this.i.m("margin");e=hd(this,h.expand(l,l,l,l))}this.transform=e;P(this.transform,[new O((h.left+h.right)/2,(h.top+h.bottom)/2)]);h=new Ud(this.i.m("bond").stroke.width,this.i.m("bond").stroke.color);l=new xe(this.i.m("bond").fill.color);var m=new Wd;I(d.h,function(n){this.hg.m(n).J(n,e,m)},this);this.Q.zc(m,h,l,d.Za);I(d.b,function(n){this.Oc.J(n,e,d.Za)},this)};
Fe.prototype.hb=function(d,e){e||(e=this.Q.od());I(d.b,function(h){this.Oc.hb(h,e)},this);return e};var Ge={bond:{stroke:{width:2,color:"black"},fill:{color:"black"}},margin:4};var He;function Ie(d){return(d=d.className)&&typeof d.split=="function"?d.split(/\s+/):[]}function Je(d){var e=Ie(d),h;h=La(arguments,1);for(var l=0,m=0;m<h.length;m++)if(!K(e,h[m])){e.push(h[m]);l++}h=l==h.length;d.className=e.join(" ");return h}function Ke(d){var e=Ie(d),h;h=La(arguments,1);for(var l=0,m=0;m<e.length;m++)if(K(h,e[m])){Fa(e,m--,1);l++}h=l==h.length;d.className=e.join(" ");return h}function Le(d,e,h){h?Je(d,e):Ke(d,e)};function Me(d){return d?new Ne(Oe(d)):He||(He=new Ne)}
function Pe(d,e,h,l){l=l||d;e=e&&e!="*"?e.toUpperCase():"";if(l.querySelectorAll&&(e||h)&&(!qb||Qe(d)||Bb("528")))return l.querySelectorAll(e+(h?"."+h:""));if(h&&l.getElementsByClassName){d=l.getElementsByClassName(h);if(e){l={};for(var m=0,n=0,o;o=d[n];n++)if(e==o.nodeName)l[m++]=o;l.length=m;return l}else return d}d=l.getElementsByTagName(e||"*");if(h){l={};for(n=m=0;o=d[n];n++){e=o.className;if(typeof e.split=="function"&&K(e.split(/\s+/),h))l[m++]=o}l.length=m;return l}else return d}
function Re(d,e){$b(e,function(h,l){if(l=="style")d.style.cssText=h;else if(l=="class")d.className=h;else if(l=="for")d.htmlFor=h;else if(l in Se)d.setAttribute(Se[l],h);else d[l]=h})}var Se={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",type:"type"};function Te(){return Ue(document,arguments)}
function Ue(d,e){var h=e[0],l=e[1];if(L&&l&&(l.name||l.type)){h=["<",h];l.name&&h.push(' name="',Wa(l.name),'"');if(l.type){h.push(' type="',Wa(l.type),'"');l=ra(l);delete l.type}h.push(">");h=h.join("")}var m=d.createElement(h);if(l)if(F(l))m.className=l;else Re(m,l);if(e.length>2){l=function(o){if(o)m.appendChild(F(o)?d.createTextNode(o):o)};for(h=2;h<e.length;h++){var n=e[h];ia(n)&&!(na(n)&&n.nodeType>0)?I(Ve(n)?Ja(n):n,l):l(n)}}return m}function Qe(d){return d.compatMode=="CSS1Compat"}
function We(d,e){d.appendChild(e)}function Xe(d){for(var e;e=d.firstChild;)d.removeChild(e)}function Ye(d){return d&&d.parentNode?d.parentNode.removeChild(d):null}function Ze(d,e){var h=e.parentNode;h&&h.replaceChild(d,e)}function $e(d,e){if(d.contains&&e.nodeType==1)return d==e||d.contains(e);if(typeof d.compareDocumentPosition!="undefined")return d==e||Boolean(d.compareDocumentPosition(e)&16);for(;e&&d!=e;)e=e.parentNode;return e==d}
function Oe(d){return d.nodeType==9?d:d.ownerDocument||d.document}function af(d,e){if("textContent"in d)d.textContent=e;else if(d.firstChild&&d.firstChild.nodeType==3){for(;d.lastChild!=d.firstChild;)d.removeChild(d.lastChild);d.firstChild.data=e}else{Xe(d);d.appendChild(Oe(d).createTextNode(e))}}var bf={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},cf={IMG:" ",BR:"\n"};function df(d){var e=d.getAttributeNode("tabindex");if(e&&e.specified){d=d.tabIndex;return ja(d)&&d>=0}return false}
function ef(d,e){if(e)d.tabIndex=0;else d.removeAttribute("tabIndex")}function ff(d){if(L&&"innerText"in d)d=d.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var e=[];gf(d,e,true);d=e.join("")}d=d.replace(/\xAD/g,"");d=d.replace(/ +/g," ");if(d!=" ")d=d.replace(/^\s*/,"");return d}
function gf(d,e,h){if(!(d.nodeName in bf))if(d.nodeType==3)h?e.push(String(d.nodeValue).replace(/(\r\n|\r|\n)/g,"")):e.push(d.nodeValue);else if(d.nodeName in cf)e.push(cf[d.nodeName]);else for(d=d.firstChild;d;){gf(d,e,h);d=d.nextSibling}}function Ve(d){if(d&&typeof d.length=="number")if(na(d))return typeof d.item=="function"||typeof d.item=="string";else if(ka(d))return typeof d.item=="function";return false}function Ne(d){this.L=d||C.document||document}Ne.prototype.ta=Me;
function hf(d){return d.L}a=Ne.prototype;a.e=function(d){return F(d)?this.L.getElementById(d):d};a.j=function(){return Ue(this.L,arguments)};a.createElement=function(d){return this.L.createElement(d)};a.createTextNode=function(d){return this.L.createTextNode(d)};
a.Gh=function(d,e,h){var l=this.L,m=!!h;h=["<tr>"];for(var n=0;n<e;n++)h.push(m?"<td>&nbsp;</td>":"<td></td>");h.push("</tr>");h=h.join("");e=["<table>"];for(n=0;n<d;n++)e.push(h);e.push("</table>");d=l.createElement("DIV");d.innerHTML=e.join("");return d.removeChild(d.firstChild)};function jf(d){return Qe(d.L)}function kf(d){d=!qb&&Qe(d.L)?d.L.documentElement:d.L.body;return new O(d.scrollLeft,d.scrollTop)}Ne.prototype.appendChild=We;Ne.prototype.contains=$e;function Wd(){this.Ua=[];this.M=[];this.wb=[]}Wd.prototype.gc=null;Wd.prototype.xa=null;Wd.prototype.xd=true;var lf=[];lf[0]=2;lf[1]=2;lf[2]=6;lf[3]=6;lf[4]=0;a=Wd.prototype;a.clear=function(){this.Ua.length=0;this.M.length=0;this.wb.length=0;delete this.gc;delete this.xa;delete this.xd;return this};a.moveTo=function(d,e){if(this.Ua[this.Ua.length-1]==0)this.wb.length-=2;else{this.Ua.push(0);this.M.push(1)}this.wb.push(d,e);this.xa=this.gc=[d,e];return this};
a.lineTo=function(){var d=this.Ua[this.Ua.length-1];if(d==null)throw Error("Path cannot start with lineTo");if(d!=1){this.Ua.push(1);this.M.push(0)}for(d=0;d<arguments.length;d+=2){var e=arguments[d],h=arguments[d+1];this.wb.push(e,h)}this.M[this.M.length-1]+=d/2;this.xa=[e,h];return this};
a.Hh=function(){var d=this.Ua[this.Ua.length-1];if(d==null)throw Error("Path cannot start with curve");if(d!=2){this.Ua.push(2);this.M.push(0)}for(d=0;d<arguments.length;d+=6){var e=arguments[d+4],h=arguments[d+5];this.wb.push(arguments[d],arguments[d+1],arguments[d+2],arguments[d+3],e,h)}this.M[this.M.length-1]+=d/6;this.xa=[e,h];return this};a.close=function(){var d=this.Ua[this.Ua.length-1];if(d==null)throw Error("Path cannot start with close");if(d!=4){this.Ua.push(4);this.M.push(1);this.xa=this.gc}return this};
a.arc=function(d,e,h,l,m,n,o){d=d+h*Math.cos(Md(m));e=e+l*Math.sin(Md(m));if(o){if(!this.xa||d!=this.xa[0]||e!=this.xa[1])this.lineTo(d,e)}else this.moveTo(d,e);return this.arcTo(h,l,m,n)};a.arcTo=function(d,e,h,l){var m=this.xa[0]-d*Math.cos(Md(h)),n=this.xa[1]-e*Math.sin(Md(h));m=m+d*Math.cos(Md(h+l));n=n+e*Math.sin(Md(h+l));this.Ua.push(3);this.M.push(1);this.wb.push(d,e,h,l,m,n);this.xd=false;this.xa=[m,n];return this};
a.Yi=function(d,e,h,l){var m=this.xa[0]-d*Math.cos(Md(h)),n=this.xa[1]-e*Math.sin(Md(h)),o=Md(l);l=Math.ceil(Math.abs(o)/Math.PI*2);o=o/l;h=Md(h);for(var q=0;q<l;q++){var s=Math.cos(h),t=Math.sin(h),u=4/3*Math.sin(o/2)/(1+Math.cos(o/2)),v=m+(s-u*t)*d,A=n+(t+u*s)*e;h+=o;s=Math.cos(h);t=Math.sin(h);this.Hh(v,A,m+(s+u*t)*d,n+(t-u*s)*e,m+s*d,n+t*e)}return this};function mf(d,e){for(var h=d.wb,l=0,m=0,n=d.Ua.length;m<n;m++){var o=d.Ua[m],q=lf[o]*d.M[m];e(o,h.slice(l,l+q));l+=q}}
Wd.prototype.aa=function(){var d=new this.constructor;d.Ua=this.Ua.concat();d.M=this.M.concat();d.wb=this.wb.concat();d.gc=this.gc&&this.gc.concat();d.xa=this.xa&&this.xa.concat();d.xd=this.xd;return d};var nf={};nf[0]=Wd.prototype.moveTo;nf[1]=Wd.prototype.lineTo;nf[4]=Wd.prototype.close;nf[2]=Wd.prototype.Hh;nf[3]=Wd.prototype.Yi;function of(d){if(d.xd)return d.aa();var e=new Wd;mf(d,function(h,l){nf[h].apply(e,l)});return e}
Wd.prototype.transform=function(d){if(!this.xd)throw Error("Non-simple path");d.transform(this.wb,0,this.wb,0,this.wb.length/2);this.gc&&d.transform(this.gc,0,this.gc,0,1);this.xa&&this.gc!=this.xa&&d.transform(this.xa,0,this.xa,0,1);return this};function pf(d,e){var h=Oe(d);if(h.defaultView&&h.defaultView.getComputedStyle)if(d=h.defaultView.getComputedStyle(d,""))return d[e];return null}function qf(d,e){return pf(d,e)||(d.currentStyle?d.currentStyle[e]:null)||d.style[e]}function rf(d){var e=d.getBoundingClientRect();if(L){d=d.ownerDocument;e.left-=d.documentElement.clientLeft+d.body.clientLeft;e.top-=d.documentElement.clientTop+d.body.clientTop}return e}
function sf(d){if(L)return d.offsetParent;var e=Oe(d),h=qf(d,"position"),l=h=="fixed"||h=="absolute";for(d=d.parentNode;d&&d!=e;d=d.parentNode){h=qf(d,"position");l=l&&h=="static"&&d!=e.documentElement&&d!=e.body;if(!l&&(d.scrollWidth>d.clientWidth||d.scrollHeight>d.clientHeight||h=="fixed"||h=="absolute"))return d}return null}
function tf(d){var e=new Hd(0,Infinity,Infinity,0),h=Me(d),l=h.L.body,m=!qb&&Qe(h.L)?h.L.documentElement:h.L.body,n;for(d=d;d=sf(d);)if((!L||d.clientWidth!=0)&&(!qb||d.clientHeight!=0||d!=l)&&(d.scrollWidth!=d.clientWidth||d.scrollHeight!=d.clientHeight)&&qf(d,"overflow")!="visible"){var o=uf(d),q;q=d;if(M&&!Bb("1.9")){var s=parseFloat(pf(q,"borderLeftWidth"));if(vf(q)){var t=q.offsetWidth-q.clientWidth-s-parseFloat(pf(q,"borderRightWidth"));s+=t}q=new O(s,parseFloat(pf(q,"borderTopWidth")))}else q=
new O(q.clientLeft,q.clientTop);o.x+=q.x;o.y+=q.y;e.top=Math.max(e.top,o.y);e.right=Math.min(e.right,o.x+d.clientWidth);e.bottom=Math.min(e.bottom,o.y+d.clientHeight);e.left=Math.max(e.left,o.x);n=n||d!=m}l=m.scrollLeft;m=m.scrollTop;if(qb){e.left+=l;e.top+=m}else{e.left=Math.max(e.left,l);e.top=Math.max(e.top,m)}if(!n||qb){e.right+=l;e.bottom+=m}h=h.L.parentWindow||h.L.defaultView||window;n=h.document;if(qb&&!Bb("500")&&!rb){if(typeof h.innerHeight=="undefined")h=window;n=h.innerHeight;d=h.document.documentElement.scrollHeight;
if(h==h.top)if(d<n)n-=15;h=new Kd(h.innerWidth,n)}else{h=Qe(n)&&(!pb||pb&&Bb("9.50"))?n.documentElement:n.body;h=new Kd(h.clientWidth,h.clientHeight)}e.right=Math.min(e.right,l+h.width);e.bottom=Math.min(e.bottom,m+h.height);return e.top>=0&&e.left>=0&&e.bottom>e.top&&e.right>e.left?e:null}
function uf(d){var e,h=Oe(d),l=qf(d,"position"),m=M&&h.getBoxObjectFor&&!d.getBoundingClientRect&&l=="absolute"&&(e=h.getBoxObjectFor(d))&&(e.screenX<0||e.screenY<0),n=new O(0,0),o;e=h?h.nodeType==9?h:Oe(h):document;o=L&&!jf(Me(e))?e.body:e.documentElement;if(d==o)return n;if(d.getBoundingClientRect){e=rf(d);d=kf(Me(h));n.x=e.left+d.x;n.y=e.top+d.y}else if(h.getBoxObjectFor&&!m){e=h.getBoxObjectFor(d);d=h.getBoxObjectFor(o);n.x=e.screenX-d.screenX;n.y=e.screenY-d.screenY}else{e=d;do{n.x+=e.offsetLeft;
n.y+=e.offsetTop;if(e!=d){n.x+=e.clientLeft||0;n.y+=e.clientTop||0}if(qb&&qf(e,"position")=="fixed"){n.x+=h.body.scrollLeft;n.y+=h.body.scrollTop;break}e=e.offsetParent}while(e&&e!=d);if(pb||qb&&l=="absolute")n.y-=h.body.offsetTop;for(e=d;(e=sf(e))&&e!=h.body&&e!=o;){n.x-=e.scrollLeft;if(!pb||e.tagName!="TR")n.y-=e.scrollTop}}return n}
function wf(d){var e=new O;if(d.nodeType==1)if(d.getBoundingClientRect){var h=rf(d);e.x=h.left;e.y=h.top}else{h=kf(Me(d));d=uf(d);e.x=d.x-h.x;e.y=d.y-h.y}else{e.x=d.clientX;e.y=d.clientY}return e}function xf(d,e,h){if(e instanceof Kd){h=e.height;e=e.width}else{if(h==undefined)throw Error("missing height argument");h=h}d.style.width=typeof e=="number"?Math.round(e)+"px":e;d.style.height=typeof h=="number"?Math.round(h)+"px":h}
function yf(d){var e=pb&&!Bb("10");if(qf(d,"display")!="none")return e?new Kd(d.offsetWidth||d.clientWidth,d.offsetHeight||d.clientHeight):new Kd(d.offsetWidth,d.offsetHeight);var h=d.style,l=h.display,m=h.visibility,n=h.position;h.visibility="hidden";h.position="absolute";h.display="inline";if(e){e=d.offsetWidth||d.clientWidth;d=d.offsetHeight||d.clientHeight}else{e=d.offsetWidth;d=d.offsetHeight}h.display=l;h.position=n;h.visibility=m;return new Kd(e,d)}
function zf(d){var e=uf(d);d=yf(d);return new Ld(e.x,e.y,d.width,d.height)}var Af={};function Bf(d){return Af[d]||(Af[d]=String(d).replace(/\-([a-z])/g,function(e,h){return h.toUpperCase()}))}function Cf(d,e){d.style.display=e?"":"none"}function Df(d,e){e=Me(e);var h=null;if(L){h=e.L.createStyleSheet();Ef(h,d)}else{var l=Pe(e.L,"head",void 0,void 0)[0];if(!l){h=Pe(e.L,"body",void 0,void 0)[0];l=e.j("head");h.parentNode.insertBefore(l,h)}h=e.j("style");Ef(h,d);e.appendChild(l,h)}return h}
function Ef(d,e){if(L)d.cssText=e;else d[qb?"innerText":"innerHTML"]=e}function vf(d){return"rtl"==qf(d,"direction")}var Ff=M?"MozUserSelect":qb?"WebkitUserSelect":null;function Gf(d,e,h){h=!h?d.getElementsByTagName("*"):null;if(Ff){e=e?"none":"";d.style[Ff]=e;if(h){d=0;for(var l;l=h[d];d++)l.style[Ff]=e}}else if(L||pb){e=e?"on":"";d.setAttribute("unselectable",e);if(h)for(d=0;l=h[d];d++)l.setAttribute("unselectable",e)}};function Hf(d){this.ob=d}H(Hf,wa);var If=new Ib(0,100);a=Hf.prototype;a.v=function(d,e,h,l,m){if(ha(e))for(var n=0;n<e.length;n++)this.v(d,e[n],h,l,m);else{d=oc(d,e,h||this,l||false,m||this.ob||this);if(this.T)this.T[d]=true;else if(this.$c){this.T=Jb(If);this.T[this.$c]=true;this.$c=null;this.T[d]=true}else this.$c=d}return this};
a.Mb=function(d,e,h,l,m){if(this.$c||this.T)if(ha(e))for(var n=0;n<e.length;n++)this.Mb(d,e[n],h,l,m);else{a:{h=h||this;m=m||this.ob||this;l=!!(l||false);if(d=rc(d,e,l))for(e=0;e<d.length;e++)if(d[e].Xd==h&&d[e].capture==l&&d[e].tf==m){d=d[e];break a}d=null}if(d){d=d.key;sc(d);if(this.T)dc(this.T,d);else if(this.$c==d)this.$c=null}}return this};a.Ke=function(){if(this.T){for(var d in this.T){sc(d);delete this.T[d]}Kb(If,this.T);this.T=null}else this.$c&&sc(this.$c)};
a.k=function(){Hf.g.k.call(this);this.Ke()};a.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function Jf(){}ea(Jf);Jf.prototype.ek=0;Jf.ua();function Kf(d){this.gb=d||Me();this.Me=Lf}H(Kf,xc);Kf.prototype.Sj=Jf.ua();var Lf=null;function Mf(d,e){switch(d){case 1:return e?"disable":"enable";case 2:return e?"highlight":"unhighlight";case 4:return e?"activate":"deactivate";case 8:return e?"select":"unselect";case 16:return e?"check":"uncheck";case 32:return e?"focus":"blur";case 64:return e?"open":"close";default:}throw Error("Invalid component state");}a=Kf.prototype;a.pb=null;a.gb=null;a.X=false;a.l=null;a.Me=null;a.Ng=null;a.pa=null;
a.ia=null;a.Qb=null;a.Ek=false;function Nf(d){return d.pb||(d.pb=":"+(d.Sj.ek++).toString(36))}function Of(d,e){if(d.pa&&d.pa.Qb){dc(d.pa.Qb,d.pb);ec(d.pa.Qb,e,d)}d.pb=e}Kf.prototype.e=w("l");Kf.prototype.zb=function(){return this.Td||(this.Td=new Hf(this))};function Pf(d,e){if(d==e)throw Error("Unable to set parent component");if(e&&d.pa&&d.pb&&Qf(d.pa,d.pb)&&d.pa!=e)throw Error("Unable to set parent component");d.pa=e;Kf.g.Lc.call(d,e)}
Kf.prototype.Lc=function(d){if(this.pa&&this.pa!=d)throw Error("Method not supported");Kf.g.Lc.call(this,d)};Kf.prototype.ta=w("gb");Kf.prototype.j=function(){this.l=this.gb.createElement("div")};Kf.prototype.J=function(d){Rf(this,d)};function Rf(d,e,h){if(d.X)throw Error("Component already rendered");d.l||d.j();e?e.insertBefore(d.l,h||null):d.gb.L.body.appendChild(d.l);if(!d.pa||d.pa.X)d.sa()}a=Kf.prototype;a.sa=function(){this.X=true;Sf(this,function(d){!d.X&&d.e()&&d.sa()})};
a.xb=function(){Sf(this,function(d){d.X&&d.xb()});this.Td&&this.Td.Ke();this.X=false};a.k=function(){Kf.g.k.call(this);this.X&&this.xb();if(this.Td){this.Td.da();delete this.Td}Sf(this,function(d){d.da()});!this.Ek&&this.l&&Ye(this.l);this.pa=this.Ng=this.l=this.Qb=this.ia=null};a.kd=function(d,e){this.ne(d,Tf(this),e)};
a.ne=function(d,e,h){if(d.X&&(h||!this.X))throw Error("Component already rendered");if(e<0||e>Tf(this))throw Error("Child component index out of bounds");if(!this.Qb||!this.ia){this.Qb={};this.ia=[]}if(d.pa==this){this.Qb[Nf(d)]=d;Ga(this.ia,d)}else ec(this.Qb,Nf(d),d);Pf(d,this);Ea(this.ia,d,e);if(d.X&&this.X&&d.pa==this){h=this.ya();h.insertBefore(d.e(),h.childNodes[e]||null)}else if(h){this.l||this.j();e=Uf(this,e+1);Rf(d,this.ya(),e?e.l:null)}else this.X&&!d.X&&d.l&&d.sa()};a.ya=w("l");
function Vf(d){if(d.Me==null)d.Me=vf(d.X?d.l:d.gb.L.body);return d.Me}Kf.prototype.ed=function(d){if(this.X)throw Error("Component already rendered");this.Me=d};function Tf(d){return d.ia?d.ia.length:0}function Qf(d,e){return d.Qb&&e?fc(d.Qb,e)||null:null}function Uf(d,e){return d.ia?d.ia[e]||null:null}function Sf(d,e,h){d.ia&&I(d.ia,e,h)}function Wf(d,e){return d.ia&&e?ya(d.ia,e):-1}
Kf.prototype.removeChild=function(d,e){if(d){var h=F(d)?d:Nf(d);d=Qf(this,h);if(h&&d){dc(this.Qb,h);Ga(this.ia,d);if(e){d.xb();d.l&&Ye(d.l)}Pf(d,null)}}if(!d)throw Error("Child is not in parent component");return d};function Xf(d,e,h,l,m){Kf.call(this,m);this.width=d;this.height=e;this.Ub=h||null;this.qe=l||null}H(Xf,Kf);Xf.prototype.oa=null;Xf.prototype.Rc=0;Xf.prototype.nd=0;function Yf(d){return d.Ub?new Kd(d.Ub,d.qe):d.nb()}Xf.prototype.sd=function(){return this.nb()};Xf.prototype.nb=function(){if(this.X)return yf(this.e());if(ja(this.width)&&ja(this.height))return new Kd(this.width,this.height);return null};function Zf(d){var e=d.nb();return e?e.width/Yf(d).width:0}
function ze(d,e,h,l,m,n,o,q,s,t,u,v){var A=s.size/2;l=q=="bottom"?l+n-A:q=="center"?l+n/2:l+A;return d.rg(e,h,l,h+m,l,o,s,t,u,v)};function $f(d,e,h,l,m,n){if(arguments.length==6)this.setTransform(d,e,h,l,m,n);else if(arguments.length!=0)throw Error("Insufficient matrix parameters");else{this.ba=this.ka=1;this.ja=this.la=this.Fa=this.Ha=0}}a=$f.prototype;a.aa=function(){return new $f(this.ba,this.ja,this.la,this.ka,this.Fa,this.Ha)};a.setTransform=function(d,e,h,l,m,n){if(!ja(d)||!ja(e)||!ja(h)||!ja(l)||!ja(m)||!ja(n))throw Error("Invalid transform parameters");this.ba=d;this.ja=e;this.la=h;this.ka=l;this.Fa=m;this.Ha=n;return this};
a.scale=function(d,e){this.ba*=d;this.ja*=d;this.la*=e;this.ka*=e;return this};a.translate=function(d,e){this.Fa+=d*this.ba+e*this.la;this.Ha+=d*this.ja+e*this.ka;return this};a.rotate=function(d,e,h){d=ag(new $f,d,e,h);e=this.ba;h=this.la;this.ba=d.ba*e+d.ja*h;this.la=d.la*e+d.ka*h;this.Fa+=d.Fa*e+d.Ha*h;e=this.ja;h=this.ka;this.ja=d.ba*e+d.ja*h;this.ka=d.la*e+d.ka*h;this.Ha+=d.Fa*e+d.Ha*h;return this};
a.toString=function(){return"matrix("+[this.ba,this.ja,this.la,this.ka,this.Fa,this.Ha].join(",")+")"};a.transform=function(d,e,h,l,m){var n=e;l=l;for(e=e+2*m;n<e;){m=d[n++];var o=d[n++];h[l++]=m*this.ba+o*this.la+this.Fa;h[l++]=m*this.ja+o*this.ka+this.Ha}};a.Vb=function(){var d=this.ba*this.ka-this.la*this.ja;return new $f(this.ka/d,-this.ja/d,-this.la/d,this.ba/d,(this.la*this.Ha-this.ka*this.Fa)/d,(this.ja*this.Fa-this.ba*this.Ha)/d)};
function bg(d,e){return(new $f).setTransform(1,0,0,1,d,e)}function ag(d,e,h,l){var m=Math.cos(e);e=Math.sin(e);return d.setTransform(m,e,-e,m,h-h*m+l*e,l-h*e-l*m)}$f.prototype.Kd=function(d){if(this==d)return true;if(!d)return false;return this.ba==d.ba&&this.la==d.la&&this.Fa==d.Fa&&this.ja==d.ja&&this.ka==d.ka&&this.Ha==d.Ha};function cg(d,e){this.l=d;this.Qa=e;this.mg=false}H(cg,xc);cg.prototype.Qa=null;cg.prototype.l=null;cg.prototype.Ye=null;cg.prototype.e=w("l");function dg(d,e,h,l,m,n){d.Ye=ag(new $f,Md(l),m,n).translate(e,h);d.Qa.Yg(d,e,h,l,m,n)}cg.prototype.addEventListener=function(d,e,h,l){oc(this.l,d,e,h,l)};cg.prototype.removeEventListener=function(d,e,h,l){qc(this.l,d,e,h,l)};cg.prototype.k=function(){cg.g.k.call(this);uc(this.l)};function eg(d,e,h,l){cg.call(this,d,e);this.ri(h);this.pi(l)}H(eg,cg);a=eg.prototype;a.ue=null;a.eh=null;a.pi=function(d){this.ue=d;this.Qa.Wg(this,d)};a.qj=w("ue");a.ri=function(d){this.eh=d;this.Qa.Xg(this,d)};a.yj=w("eh");function fg(d,e,h,l){eg.call(this,d,e,h,l)}H(fg,eg);function gg(d,e){cg.call(this,d,e)}H(gg,cg);function hg(d,e){cg.call(this,d,e)}H(hg,cg);function ig(d,e,h,l){eg.call(this,d,e,h,l)}H(ig,eg);function jg(d,e,h,l){eg.call(this,d,e,h,l)}H(jg,eg);function kg(d,e,h,l){eg.call(this,d,e,h,l)}H(kg,eg);function lg(d){cg.call(this,null,d);this.ia=[]}H(lg,gg);lg.prototype.clear=function(){if(this.ia.length){this.ia.length=0;mg(this.Qa)}};lg.prototype.tb=aa();lg.prototype.appendChild=function(d){this.ia.push(d)};lg.prototype.Zb=function(){for(var d=0,e=this.ia.length;d<e;d++)ng(this.Qa,this.ia[d])};
function og(d,e,h,l,m,n,o,q){eg.call(this,d,e,o,q);this.ij=h;this.jj=l;this.uk=m;this.vk=n;this.Gb=new Wd;this.Gb.clear();this.Gb.arc(this.ij,this.jj,this.uk,this.vk,0,360,false);this.Gb.close();this.ik=new pg(null,e,this.Gb,o,q)}H(og,fg);og.prototype.Zb=function(d){this.ik.Zb(d)};function qg(d,e,h,l,m,n,o,q){eg.call(this,d,e,o,q);this.ke=h;this.me=l;this.Ad=m;this.td=n}H(qg,jg);qg.prototype.Vc=false;qg.prototype.tb=function(d,e){this.Ad=d;this.td=e;this.Vc&&mg(this.Qa)};
qg.prototype.Zb=function(d){this.Vc=true;d.beginPath();d.moveTo(this.ke,this.me);d.lineTo(this.ke,this.me+this.td);d.lineTo(this.ke+this.Ad,this.me+this.td);d.lineTo(this.ke+this.Ad,this.me);d.closePath()};function pg(d,e,h,l,m){eg.call(this,d,e,l,m);this.Zg(h)}H(pg,ig);pg.prototype.Vc=false;pg.prototype.Zg=function(d){this.Gb=d.xd?d:of(d);this.Vc&&mg(this.Qa)};
pg.prototype.Zb=function(d){this.Vc=true;d.beginPath();mf(this.Gb,function(e,h){switch(e){case 0:d.moveTo(h[0],h[1]);break;case 1:for(e=0;e<h.length;e+=2)d.lineTo(h[e],h[e+1]);break;case 2:for(e=0;e<h.length;e+=6)d.bezierCurveTo(h[e],h[e+1],h[e+2],h[e+3],h[e+4],h[e+5]);break;case 3:throw Error("Canvas paths cannot contain arcs");case 4:d.closePath();break}})};
function rg(d,e,h,l,m,n,o,q,s,t){eg.call(this,null,d,s,t);this.Gi=e;this.Oi=h;this.Gk=l;this.Pi=m;this.Hk=n;this.Vi=o||"left";this.nj=q;this.l=Te("DIV",{style:"display:table;position:absolute;padding:0;margin:0;border:0"});this.yf=Te("DIV",{style:"display:table-cell;padding: 0;margin: 0;border: 0"});h=this.Oi;q=this.Pi;l=this.Gk;m=this.Hk;s=this.Vi;n=this.nj;e=this.l.style;o=Zf(this.Qa);t=this.Qa;var u=t.nb();t=u?u.height/Yf(t).height:0;if(h==q){e.lineHeight="90%";this.yf.style.verticalAlign=s=="center"?
"middle":s=="left"?l<m?"top":"bottom":l<m?"bottom":"top";e.textAlign="center";q=n.size*o;e.top=Math.round(Math.min(l,m)*t)+"px";e.left=Math.round((h-q/2)*o)+"px";e.width=Math.round(q)+"px";e.height=Math.abs(l-m)*t+"px";e.fontSize=n.size*0.6*t+"pt"}else{e.lineHeight="100%";this.yf.style.verticalAlign="top";e.textAlign=s;e.top=Math.round(((l+m)/2-n.size*2/3)*t)+"px";e.left=Math.round(h*o)+"px";e.width=Math.round(Math.abs(q-h)*o)+"px";e.height="auto";e.fontSize=n.size*t+"pt"}e.fontWeight=n.bold?"bold":
"normal";e.fontStyle=n.Ig?"italic":"normal";e.fontFamily=n.tg;h=this.ue;e.color=h.jb||h.Nh();this.yf.innerHTML=this.Oi==this.Pi?J(this.Gi.split(""),Wa).join("<br>"):Wa(this.Gi);d.e().appendChild(this.l);this.l.appendChild(this.yf)}H(rg,kg);rg.prototype.pi=function(d){this.ue=d;if(this.l)this.l.style.color=d.jb||d.Nh()};rg.prototype.ri=aa();rg.prototype.Zb=aa();function sg(d,e,h,l,m,n,o){cg.call(this,d,e);this.ke=h;this.me=l;this.Ad=m;this.td=n;this.yk=o}H(sg,hg);sg.prototype.Vc=false;
sg.prototype.tb=function(d,e){this.Ad=d;this.td=e;this.Vc&&mg(this.Qa)};sg.prototype.Zb=function(d){if(this.Wh){this.Ad&&this.td&&d.drawImage(this.Wh,this.ke,this.me,this.Ad,this.td);this.Vc=true}else{d=new Image;d.onload=sa(this.Ij,this,d);d.src=this.yk}};sg.prototype.Ij=function(d){this.Wh=d;mg(this.Qa)};function we(d,e){this.size=d;this.tg=e}we.prototype.bold=false;we.prototype.Ig=false;function tg(){};function xe(d,e){this.jb=d;this.Ee=e||1}H(xe,tg);function Ud(d,e){this.mh=d;this.jb=e};function ug(d,e,h,l,m){Xf.call(this,d,e,h,l,m)}H(ug,Xf);ug.prototype.Wg=function(){mg(this)};ug.prototype.Xg=function(){mg(this)};ug.prototype.Yg=function(){mg(this)};function vg(d,e){d=d.getContext();d.save();e=e.Ye?e.Ye.aa():new $f;var h=e.Fa,l=e.Ha;if(h||l)d.translate(h,l);(e=e.ja)&&d.rotate(Math.asin(e))}
ug.prototype.j=function(){var d=this.gb.j("div",{style:"position:relative;overflow:hidden"});this.l=d;this.pe=this.gb.j("canvas");d.appendChild(this.pe);this.Kg=this.oa=new lg(this);this.qk=0;wg(this)};ug.prototype.getContext=function(){this.e()||this.j();if(!this.hc){this.hc=this.pe.getContext("2d");this.hc.save()}return this.hc};ug.prototype.tb=function(d,e){this.width=d;this.height=e;wg(this);mg(this)};
ug.prototype.nb=function(){var d=this.width,e=this.height,h=F(d)&&d.indexOf("%")!=-1,l=F(e)&&e.indexOf("%")!=-1;if(!this.X&&(h||l))return null;var m,n;if(h){m=this.e().parentNode;n=yf(m);d=parseFloat(d)*n.width/100}if(l){m=m||this.e().parentNode;n=n||yf(m);e=parseFloat(e)*n.height/100}return new Kd(d,e)};function wg(d){xf(d.e(),d.width,d.height);var e=d.nb();if(e){xf(d.pe,e.width,e.height);d.pe.width=e.width;d.pe.height=e.height;d.hc=null}}
ug.prototype.reset=function(){var d=this.getContext();d.restore();var e=this.nb();e.width&&e.height&&d.clearRect(0,0,e.width,e.height);d.save()};ug.prototype.clear=function(){this.reset();this.oa.clear();for(var d=this.e();d.childNodes.length>1;)d.removeChild(d.lastChild)};
function mg(d){if(d.$l)d.Xl=true;else if(d.X){d.reset();if(d.Ub){var e=d.nb();d.getContext().scale(e.width/d.Ub,e.height/d.qe)}if(d.Rc||d.nd)d.getContext().translate(-d.Rc,-d.nd);vg(d,d.oa);d.oa.Zb(d.hc);d.getContext().restore()}}
function ng(d,e){if(!(e instanceof rg)){var h=d.getContext();vg(d,e);if(!e.qj||!e.yj)e.Zb(h);else{var l=e.ue;if(l)if(l instanceof xe){if(l.Ee!=0){h.globalAlpha=l.Ee;h.fillStyle=l.jb;e.Zb(h);h.fill();h.globalAlpha=1}}else{var m=h.createLinearGradient(l.pl(),l.rl(),l.ql(),l.sl());m.addColorStop(0,l.Nh());m.addColorStop(1,l.kl());h.fillStyle=m;e.Zb(h);h.fill()}if(l=e.eh){e.Zb(h);h.strokeStyle=l.jb;e=l.mh;if(F(e)&&e.indexOf("px")!=-1)e=parseFloat(e)/Zf(d);h.lineWidth=e;h.stroke()}}d.getContext().restore()}}
a=ug.prototype;a.Ka=function(d,e){e=e||this.oa;e.appendChild(d);this.X&&!this.qk&&!(e!=this.oa&&e!=this.Kg)&&ng(this,d)};a.ef=function(d,e,h,l,m,n,o){d=new og(null,this,d,e,h,l,m,n);this.Ka(d,o);return d};a.qg=function(d,e,h,l,m,n,o){d=new qg(null,this,d,e,h,l,m,n);this.Ka(d,o);return d};a.drawImage=function(d,e,h,l,m,n){d=new sg(null,this,d,e,h,l,m);this.Ka(d,n);return d};a.rg=function(d,e,h,l,m,n,o,q,s,t){d=new rg(this,d,e,h,l,m,n,o,q,s);this.Ka(d,t);return d};
a.zc=function(d,e,h,l){d=new pg(null,this,d,e,h);this.Ka(d,l);return d};a.od=function(d){var e=new lg(this);d=d||this.oa;if(d==this.oa||d==this.Kg)this.Kg=e;this.Ka(e,d);return e};a.k=function(){this.hc=null;ug.g.k.call(this)};a.sa=function(){var d=this.nb();ug.g.sa.call(this);if(!d){wg(this);this.dispatchEvent("resize")}mg(this)};function xg(d,e){this.zf=d||1;this.Ve=e||yg;this.ig=sa(this.Ak,this);this.Lg=ua()}H(xg,xc);xg.prototype.enabled=false;var yg=C.window;a=xg.prototype;a.Lb=null;a.Ak=function(){if(this.enabled){var d=ua()-this.Lg;if(d>0&&d<this.zf*0.8)this.Lb=this.Ve.setTimeout(this.ig,this.zf-d);else{this.dispatchEvent(zg);if(this.enabled){this.Lb=this.Ve.setTimeout(this.ig,this.zf);this.Lg=ua()}}}};a.start=function(){this.enabled=true;if(!this.Lb){this.Lb=this.Ve.setTimeout(this.ig,this.zf);this.Lg=ua()}};
a.stop=function(){this.enabled=false;if(this.Lb){this.Ve.clearTimeout(this.Lb);this.Lb=null}};a.k=function(){xg.g.k.call(this);this.stop();delete this.Ve};var zg="tick";function Ag(d,e){cg.call(this,d,e)}H(Ag,gg);Ag.prototype.clear=function(){Xe(this.e())};Ag.prototype.tb=function(d,e){Bg(this.Qa,this.e(),{width:d,height:e})};function Cg(d,e,h,l){eg.call(this,d,e,h,l)}H(Cg,fg);function Dg(d,e,h,l){eg.call(this,d,e,h,l)}H(Dg,jg);Dg.prototype.tb=function(d,e){Bg(this.Qa,this.e(),{width:d,height:e})};function Eg(d,e,h,l){eg.call(this,d,e,h,l)}H(Eg,ig);Eg.prototype.Zg=function(d){Bg(this.Qa,this.e(),{d:Fg(d)})};function Gg(d,e,h,l){eg.call(this,d,e,h,l)}H(Gg,kg);
function Hg(d,e){cg.call(this,d,e)}H(Hg,hg);Hg.prototype.tb=function(d,e){Bg(this.Qa,this.e(),{width:d,height:e})};function Ig(d,e,h,l,m){Xf.call(this,d,e,h,l,m);this.Kh={};this.kh=qb&&!Bb(526);this.ob=new Hf(this)}var Jg;H(Ig,Xf);function Kg(d,e,h){e=d.gb.L.createElementNS("http://www.w3.org/2000/svg",e);h&&Bg(d,e,h);return e}function Bg(d,e,h){for(var l in h)e.setAttribute(l,h[l])}a=Ig.prototype;a.Ka=function(d,e){(e||this.oa).e().appendChild(d.e())};a.Wg=function(d,e){d=d.e();if(e instanceof xe){d.setAttribute("fill",e.jb);d.setAttribute("fill-opacity",e.Ee)}else d.setAttribute("fill","none")};
a.Xg=function(d,e){d=d.e();if(e){d.setAttribute("stroke",e.jb);e=e.mh;F(e)&&e.indexOf("px")!=-1?d.setAttribute("stroke-width",parseFloat(e)/Zf(this)):d.setAttribute("stroke-width",e)}else d.setAttribute("stroke","none")};a.Yg=function(d,e,h,l,m,n){d.e().setAttribute("transform","translate("+e+","+h+") rotate("+l+" "+m+" "+n+")")};
a.j=function(){var d=Kg(this,"svg",{width:this.width,height:this.height,overflow:"hidden"}),e=Kg(this,"g");this.ng=Kg(this,"defs");this.oa=new Ag(e,this);d.appendChild(this.ng);d.appendChild(e);this.l=d;if(this.Ub||this.Rc||this.nd){this.e().setAttribute("preserveAspectRatio","none");this.kh?this.ag():this.e().setAttribute("viewBox",this.Rc+" "+this.nd+" "+(this.Ub?this.Ub+" "+this.qe:""))}};
a.ag=function(){if(this.X&&(this.Ub||this.Rc||!this.nd)){var d=this.nb();if(d.width==0)this.e().style.visibility="hidden";else{this.e().style.visibility="";var e=-this.Rc,h=-this.nd,l=d.width/this.Ub;d=d.height/this.qe;this.oa.e().setAttribute("transform","scale("+l+" "+d+") translate("+e+" "+h+")")}}};a.tb=aa();
a.nb=function(){if(!M)return yf(this.e());var d=this.width,e=this.height,h=F(d)&&d.indexOf("%")!=-1,l=F(e)&&e.indexOf("%")!=-1;if(!this.X&&(h||l))return null;var m,n;if(h){m=this.e().parentNode;n=yf(m);d=parseFloat(d)*n.width/100}if(l){m=m||this.e().parentNode;n=n||yf(m);e=parseFloat(e)*n.height/100}return new Kd(d,e)};a.clear=function(){this.oa.clear();Xe(this.ng);this.Kh={}};a.ef=function(d,e,h,l,m,n,o){d=Kg(this,"ellipse",{cx:d,cy:e,rx:h,ry:l});m=new Cg(d,this,m,n);this.Ka(m,o);return m};
a.qg=function(d,e,h,l,m,n,o){d=Kg(this,"rect",{x:d,y:e,width:h,height:l});m=new Dg(d,this,m,n);this.Ka(m,o);return m};a.drawImage=function(d,e,h,l,m,n){d=Kg(this,"image",{x:d,y:e,width:h,height:l,"image-rendering":"optimizeQuality",preserveAspectRatio:"none"});d.setAttributeNS("http://www.w3.org/1999/xlink","href",m);m=new Hg(d,this);this.Ka(m,n);return m};
a.rg=function(d,e,h,l,m,n,o,q,s,t){var u=Math.round(Nd(e,h,l,m));l=l-e;m=m-h;m=Math.round(Math.sqrt(l*l+m*m));var v=o.size;l={"font-family":o.tg,"font-size":v};var A=Math.round(v*0.85);v=Math.round(h-v/2+A);A=e;if(n=="center"){A+=Math.round(m/2);l["text-anchor"]="middle"}else if(n=="right"){A+=m;l["text-anchor"]="end"}l.x=A;l.y=v;if(o.bold)l["font-weight"]="bold";if(o.Ig)l["font-style"]="italic";if(u!=0)l.transform="rotate("+u+" "+e+" "+h+")";e=Kg(this,"text",l);e.appendChild(this.gb.L.createTextNode(d));
if(q==null&&M&&kb){d="black";if(s instanceof xe)d=s.jb;q=new Ud(1,d)}s=new Gg(e,this,q,s);this.Ka(s,t);return s};a.zc=function(d,e,h,l){d=Kg(this,"path",{d:Fg(d)});e=new Eg(d,this,e,h);this.Ka(e,l);return e};
function Fg(d){var e=[];mf(d,function(h,l){switch(h){case 0:e.push("M");Array.prototype.push.apply(e,l);break;case 1:e.push("L");Array.prototype.push.apply(e,l);break;case 2:e.push("C");Array.prototype.push.apply(e,l);break;case 3:h=l[3];e.push("A",l[0],l[1],0,Math.abs(h)>180?1:0,h>0?1:0,l[4],l[5]);break;case 4:e.push("Z");break}});return e.join(" ")}Ig.prototype.od=function(d){var e=Kg(this,"g");(d||this.oa).e().appendChild(e);return new Ag(e,this)};
Ig.prototype.sa=function(){var d=this.nb();Ig.g.sa.call(this);d||this.dispatchEvent("resize");if(this.kh){d=this.width;var e=this.height;typeof d=="string"&&d.indexOf("%")!=-1&&typeof e=="string"&&e.indexOf("%")!=-1&&this.ob.v(Lg(),zg,this.ag);this.ag()}};Ig.prototype.xb=function(){Ig.g.xb.call(this);this.kh&&this.ob.Mb(Lg(),zg,this.ag)};Ig.prototype.k=function(){delete this.Kh;delete this.ng;delete this.oa;Ig.g.k.call(this)};function Lg(){if(!Jg){Jg=new xg(400);Jg.start()}return Jg};function Mg(){return this.l=this.Qa.gb.e(this.pb)||this.l}function Ng(d,e){this.pb=d.id;cg.call(this,d,e)}H(Ng,gg);Ng.prototype.e=Mg;Ng.prototype.clear=function(){Xe(this.e())};Ng.prototype.tb=function(d,e){var h=this.e(),l=h.style;l.width=T(d)+"px";l.height=T(e)+"px";h.coordsize=T(d)+" "+T(e);if(this.Qa.oa!=this)h.coordorigin="0 0"};function Og(d,e,h,l,m,n,o,q){this.pb=d.id;eg.call(this,d,e,o,q);this.dl=h;this.el=l;this.bm=m;this.cm=n}H(Og,fg);Og.prototype.e=Mg;
function Pg(d,e,h,l){this.pb=d.id;eg.call(this,d,e,h,l)}H(Pg,jg);Pg.prototype.e=Mg;Pg.prototype.tb=function(d,e){var h=this.e().style;h.width=T(d)+"px";h.height=T(e)+"px"};function Qg(d,e,h,l){this.pb=d.id;eg.call(this,d,e,h,l)}H(Qg,ig);Qg.prototype.e=Mg;Qg.prototype.Zg=function(d){Rg(this.e(),"path",Sg(d))};function Tg(d,e,h,l){this.pb=d.id;eg.call(this,d,e,h,l)}H(Tg,kg);Tg.prototype.e=Mg;function Ug(d,e){this.pb=d.id;cg.call(this,d,e)}H(Ug,hg);Ug.prototype.e=Mg;
Ug.prototype.tb=function(d,e){var h=this.e().style;h.width=Vg(d)+"px";h.height=Vg(e)+"px"};function Wg(d,e,h,l,m){Xf.call(this,d,e,h,l,m);this.ob=new Hf(this)}H(Wg,Xf);var Xg=document.documentMode&&document.documentMode>=8;function Yg(d){return F(d)&&Ua(d,"%")?d:parseFloat(d.toString())+"px"}function Vg(d){return Math.round((parseFloat(d.toString())-0.5)*100)}function T(d){return Math.round(parseFloat(d.toString())*100)}function Rg(d,e,h){if(Xg)d[e]=h;else d.setAttribute(e,h)}function Zg(d,e){d=d.gb.createElement("g_vml_:"+e);d.id="goog_"+eb++;return d}
function $g(d){if(Xg&&d.X)d.e().innerHTML=d.e().innerHTML}Wg.prototype.Ka=function(d,e){(e||this.oa).e().appendChild(d.e());$g(this)};
Wg.prototype.Wg=function(d,e){d=d.e();d.fillcolor="";for(var h=0;h<d.childNodes.length;h++){var l=d.childNodes[h];l.tagName=="fill"&&d.removeChild(l)}if(e instanceof xe)if(e.jb=="transparent")d.filled=false;else if(e.Ee!=1){d.filled=true;h=Zg(this,"fill");h.opacity=Math.round(e.Ee*100)+"%";h.color=e.jb;d.appendChild(h)}else{d.filled=true;d.fillcolor=e.jb}else d.filled=false;$g(this)};
Wg.prototype.Xg=function(d,e){d=d.e();if(e){d.stroked=true;var h=e.mh;if(F(h)&&h.indexOf("px")==-1)h=parseFloat(h);else h*=Zf(this);var l=d.getElementsByTagName("stroke")[0];if(h<1){l=l||Zg(this,"stroke");l.opacity=h;l.km="1px";l.color=e.jb;d.appendChild(l)}else{l&&d.removeChild(l);d.strokecolor=e.jb;d.strokeweight=h+"px"}}else d.stroked=false;$g(this)};
Wg.prototype.Yg=function(d,e,h,l,m,n){d=d.e();d.style.left=Vg(e)+"px";d.style.top=Vg(h)+"px";if(l||d.rotation){d.rotation=l;d.coordsize=T(m*2)+" "+T(n*2)}};function ah(d,e,h,l,m){var n=d.style;n.position="absolute";n.left=Vg(e)+"px";n.top=Vg(h)+"px";n.width=T(l)+"px";n.height=T(m)+"px";if(d.tagName=="shape")d.coordsize=T(l)+" "+T(m)}function bh(d,e){e=Zg(d,e);d=Yf(d);ah(e,0,0,d.width,d.height);return e}try{eval("document.namespaces")}catch(ch){}a=Wg.prototype;
a.j=function(){var d=this.gb.L;if(!d.namespaces.g_vml_){Xg?d.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML"):d.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml");d.createStyleSheet().cssText="g_vml_\\:*{behavior:url(#default#VML)}"}d=this.width;var e=this.height,h=this.gb.j("div",{style:"overflow:hidden;position:relative;width:"+Yg(d)+";height:"+Yg(e)});this.l=h;var l=Zg(this,"group"),m=l.style;m.position="absolute";m.left=m.top=0;m.width=this.width;m.height=this.height;
l.coordsize=this.Ub?T(this.Ub)+" "+T(this.qe):T(d)+" "+T(e);l.coordorigin=this.Rc!==undefined?T(this.Rc)+" "+T(this.nd):"0 0";h.appendChild(l);this.oa=new Ng(l,this);oc(h,"resize",sa(this.zg,this))};a.zg=function(){var d=yf(this.e()),e=this.oa.e().style;if(d.width){e.width=d.width+"px";e.height=d.height+"px"}else{for(d=this.e();d&&d.currentStyle&&d.currentStyle.display!="none";)d=d.parentNode;d&&d.currentStyle&&this.ob.v(d,"propertychange",this.zg)}this.dispatchEvent("resize")};a.tb=aa();
a.nb=function(){var d=this.e();return new Kd(d.style.pixelWidth||d.offsetWidth||1,d.style.pixelHeight||d.offsetHeight||1)};a.clear=function(){this.oa.clear()};a.ef=function(d,e,h,l,m,n,o){var q=Zg(this,"oval");ah(q,d-h,e-l,h*2,l*2);d=new Og(q,this,d,e,h,l,m,n);this.Ka(d,o);return d};a.qg=function(d,e,h,l,m,n,o){var q=Zg(this,"rect");ah(q,d,e,h,l);d=new Pg(q,this,m,n);this.Ka(d,o);return d};
a.drawImage=function(d,e,h,l,m,n){var o=Zg(this,"image");ah(o,d,e,h,l);Rg(o,"src",m);d=new Ug(o,this);this.Ka(d,n);return d};
a.rg=function(d,e,h,l,m,n,o,q,s,t){var u=bh(this,"shape"),v=Zg(this,"path");e="M"+Vg(e)+","+Vg(h)+"L"+Vg(l)+","+Vg(m)+"E";Rg(v,"v",e);Rg(v,"textpathok","true");e=Zg(this,"textpath");e.setAttribute("on","true");h=e.style;h.fontSize=o.size*Zf(this);h.fontFamily=o.tg;if(n!=null)h["v-text-align"]=n;if(o.bold)h.fontWeight="bold";if(o.Ig)h.fontStyle="italic";Rg(e,"string",d);u.appendChild(v);u.appendChild(e);d=new Tg(u,this,q,s);this.Ka(d,t);return d};
a.zc=function(d,e,h,l){var m=bh(this,"shape");Rg(m,"path",Sg(d));d=new Qg(m,this,e,h);this.Ka(d,l);return d};
function Sg(d){var e=[];mf(d,function(h,l){switch(h){case 0:e.push("m");Array.prototype.push.apply(e,J(l,T));break;case 1:e.push("l");Array.prototype.push.apply(e,J(l,T));break;case 2:e.push("c");Array.prototype.push.apply(e,J(l,T));break;case 4:e.push("x");break;case 3:var m=l[2]+l[3];h=T(l[4]-l[0]*Math.cos(Md(m)));m=T(l[5]-l[1]*Math.sin(Md(m)));var n=T(l[0]),o=T(l[1]),q=Math.round(l[2]*-65536);l=Math.round(l[3]*-65536);e.push("ae",h,m,n,o,q,l);break}});return e.join(" ")}
Wg.prototype.od=function(d){var e=bh(this,"group");(d||this.oa).e().appendChild(e);return new Ng(e,this)};Wg.prototype.sa=function(){Wg.g.sa.call(this);this.zg();$g(this)};Wg.prototype.k=function(){this.oa=null;Wg.g.k.call(this)};function dh(d,e,h){gd.call(this,d,e,h,eh)}H(dh,gd);
dh.prototype.J=function(d,e,h,l){this.transform=l;var m=this.i.m("arrow").height,n=Ed(d.target,d.source),o=Md(Nd(d.source.x,d.source.y,d.target.x,d.target.y));console.log(d.source.toString());console.log(d.target.toString());console.log(o);var q=new O((d.source.x+d.target.x)/2,(d.source.y+d.target.y)/2),s=new O(q.x,q.y+m),t=new O(q.x,q.y-m),u=new O(q.x-n/2,q.y),v=new O(q.x+n/2,q.y),A=new O(v.x-m,v.y+m/2),E=new O(v.x-m,v.y-m/2);d=new Wd;var S=new Ud(this.i.m("arrow").stroke.width,this.i.m("arrow").stroke.color),
la=new Ud(this.i.m("arrow").font.stroke.width,this.i.m("arrow").font.stroke.color),vb=new xe(this.i.m("arrow").font.stroke.color),ma=l.ba;ma=new we(ma/1.8>12?15:ma/1.8,this.i.m("arrow").font.name);o=ag(new jd,o,q.x,q.y);q=o.ba;var Wb=o.ja;o.ba=l.ba*q+l.la*Wb;o.ja=l.ja*q+l.ka*Wb;q=o.la;Wb=o.ka;o.la=l.ba*q+l.la*Wb;o.ka=l.ja*q+l.ka*Wb;q=o.Fa;Wb=o.Ha;o.Fa=l.ba*q+l.la*Wb+l.Fa;o.Ha=l.ja*q+l.ka*Wb+l.Ha;l=P(o,[u,v,A,E,s,t]);d.moveTo(l[0].x,l[0].y);d.lineTo(l[1].x,l[1].y);d.lineTo(l[2].x,l[2].y);d.moveTo(l[1].x,
l[1].y);d.lineTo(l[3].x,l[3].y);ze(this.Q,e,l[4].x,l[4].y,n,m,"center","bottom",ma,la,vb);ze(this.Q,h,l[5].x,l[5].y,n,m,"center","top",ma,la,vb);this.Q.zc(d,S)};dh.prototype.hb=function(d,e){e||(e=this.Q.od());var h=this.i.m("arrow").highlight.color;h=new xe(h,0.3);var l=this.i.m("arrow").highlight.radius*this.transform.ba;d=P(this.transform,[d.source])[0];this.Q.ef(d.x,d.y,l,l,null,h,e);return e};
var eh={arrow:{height:0.5,stroke:{width:2,color:"black"},fill:{color:"black"},font:{name:"Arial",stroke:{width:0.1,color:"grey"}},highlight:{radius:0.5,color:"grey"}}};function fh(d,e,h){gd.call(this,d,e,h,gh)}H(fh,gd);fh.prototype.J=function(d,e){var h=this.i.m("plus").size;h0=new O(d.x,d.y-h);h1=new O(d.x,d.y+h);v0=new O(d.x-h,d.y);v1=new O(d.x+h,d.y);d=new Wd;h=new Ud(this.i.m("plus").stroke.width,this.i.m("plus").stroke.color);e=P(e,[h0,h1,v0,v1]);d.moveTo(e[0].x,e[0].y);d.lineTo(e[1].x,e[1].y);d.moveTo(e[2].x,e[2].y);d.lineTo(e[3].x,e[3].y);this.Q.zc(d,h,null)};var gh={plus:{size:0.25,stroke:{width:2,color:"black"}}};function jd(d,e,h,l,m,n){$f.call(this);arguments.length==6&&this.setTransform(d,e,h,l,m,n)}H(jd,$f);function P(d,e){e=J(e,function(l){return[l.x,l.y]});var h=Ra(e);e=[];d.transform(h,0,e,0,h.length/2);d=[];for(h=0;h<e.length;h+=2)d.push(new O(e[h],e[h+1]));return d}function je(d,e){return P(d,e)}jd.prototype.Vb=function(){var d=this.ba*this.ka-this.la*this.ja;return new jd(this.ka/d,-this.ja/d,-this.la/d,this.ba/d,(this.la*this.Ha-this.ka*this.Fa)/d,(this.ja*this.Fa-this.ba*this.Ha)/d)};function hh(d,e,h){gd.call(this,d,e,h,ih);this.Uf=1;this.bk=new kd(d);this.Sa=new Fe(this.bk,e,this.i);this.$i=new pd(d);this.fg=new dh(this.$i,e,this.i);this.kk=new ud(d);this.lk=new fh(this.kk,e,this.i)}H(hh,gd);
hh.prototype.J=function(d){var e=Ia(d.sb,d.rb);if(e.length>0){if(!this.transform){var h=this.ld(e),l=this.i.m("margin");h.expand(l.top,l.right,l.bottom,l.left);this.transform=hd(this,h)}I(e,function(m){this.Sa.J(m,this.transform)},this);I(d.$d,function(m){this.lk.J(m,this.transform)},this);I(d.wc,function(m){this.fg.J(m,d.pk,d.gj,this.transform)},this)}};hh.prototype.ld=function(d){d=Ra(J(d,function(e){return e.b}));d=J(d,function(e){return e.a});if(d.length>0)return Id.apply(null,d)};
hh.prototype.r=N("kemia.view.ReactionRenderer");var ih={margin:2};function jh(d,e,h){this.target=d;this.handle=e||d;this.di=h||new Ld(NaN,NaN,NaN,NaN);this.L=Oe(d);this.ic=new Hf(this);oc(this.handle,"mousedown",this.fd,false,this)}H(jh,xc);var kh=L||M&&Bb("1.9.3");a=jh.prototype;a.screenX=0;a.screenY=0;a.Ai=0;a.Ci=0;a.Wb=0;a.Xb=0;a.bb=true;a.Uc=false;a.Vh=0;a.ck=0;a.Tj=false;a.zb=w("ic");a.Kc=ba("bb");a.k=function(){jh.g.k.call(this);qc(this.handle,"mousedown",this.fd,false,this);this.ic.da();delete this.target;delete this.handle;delete this.ic};
a.fd=function(d){if(this.bb&&!this.Uc&&(d.type!="mousedown"||Eb(d,0))){if(this.Vh==0){lh(this,d);if(this.Uc)d.preventDefault();else return}else d.preventDefault();var e=this.L,h=e.documentElement,l=!kh;this.ic.v(e,"mousemove",this.dk,l);this.ic.v(e,"mouseup",this.hf,l);if(kh){h.setCapture(false);this.ic.v(h,"losecapture",this.hf)}else this.ic.v(e?e.parentWindow||e.defaultView:window,"blur",this.hf);L&&this.Tj&&this.ic.v(e,"dragstart",Ta);this.wk&&this.ic.v(this.wk,"scroll",this.gk,l);this.screenX=
this.Ai=d.screenX;this.screenY=this.Ci=d.screenY;this.Wb=this.target.offsetLeft;this.Xb=this.target.offsetTop;this.Ie=kf(Me(this.L));this.ck=ua()}};function lh(d,e){if(d.dispatchEvent(new mh("start",d,e.clientX,e.clientY,e))!==false)d.Uc=true}jh.prototype.hf=function(d,e){this.ic.Ke();kh&&this.L.releaseCapture();if(this.Uc){this.Uc=false;this.dispatchEvent(new mh("end",this,d.clientX,d.clientY,d,nh(this,this.Wb),oh(this,this.Xb),e))}};
jh.prototype.dk=function(d){if(this.bb){var e=d.screenX-this.screenX,h=d.screenY-this.screenY;this.screenX=d.screenX;this.screenY=d.screenY;if(!this.Uc){var l=this.Ai-this.screenX,m=this.Ci-this.screenY;if(l*l+m*m>this.Vh){lh(this,d);if(!this.Uc){this.hf(d);return}}}h=ph(this,e,h);e=h.x;h=h.y;if(this.Uc)if(this.dispatchEvent(new mh("beforedrag",this,d.clientX,d.clientY,d,e,h))!==false){qh(this,d,e,h,false);d.preventDefault()}}};
function ph(d,e,h){var l=kf(Me(d.L));e+=l.x-d.Ie.x;h+=l.y-d.Ie.y;d.Ie=l;d.Wb+=e;d.Xb+=h;return new O(nh(d,d.Wb),oh(d,d.Xb))}jh.prototype.gk=function(d){var e=ph(this,0,0);d.clientX=this.Ie.x-this.screenX;d.clientY=this.Ie.x-this.screenY;qh(this,d,e.x,e.y,true)};function qh(d,e,h,l){d.target.style.left=h+"px";d.target.style.top=l+"px";d.dispatchEvent(new mh("drag",d,e.clientX,e.clientY,e,h,l))}
function nh(d,e){var h=d.di;d=!isNaN(h.left)?h.left:null;h=!isNaN(h.width)?h.width:0;return Math.min(d!=null?d+h:Infinity,Math.max(d!=null?d:-Infinity,e))}function oh(d,e){var h=d.di;d=!isNaN(h.top)?h.top:null;h=!isNaN(h.height)?h.height:0;return Math.min(d!=null?d+h:Infinity,Math.max(d!=null?d:-Infinity,e))}function mh(d,e,h,l,m,n,o,q){Sa.call(this,d);this.clientX=h;this.clientY=l;this.Yk=m;this.left=n!==undefined?n:e.Wb;this.top=o!==undefined?o:e.Xb;this.gl=e;this.fl=!!q}H(mh,Sa);var rh,sh,th,uh,vh,wh,xh;xh=wh=vh=uh=th=sh=rh=false;var yh=lb();if(yh)if(yh.indexOf("Firefox")!=-1)rh=true;else if(yh.indexOf("Camino")!=-1)sh=true;else if(yh.indexOf("iPhone")!=-1||yh.indexOf("iPod")!=-1)th=true;else if(yh.indexOf("iPad")!=-1)uh=true;else if(yh.indexOf("Android")!=-1)vh=true;else if(yh.indexOf("Chrome")!=-1)wh=true;else if(yh.indexOf("Safari")!=-1)xh=true;var zh=sh,Ah=th,Bh=uh,Ch=vh,Dh=wh,Eh=xh;var Fh;a:{var Gh="",Hh,Ih;if(rh)Hh=/Firefox\/([0-9.]+)/;else if(L||pb){Fh=ub;break a}else if(Dh)Hh=/Chrome\/([0-9.]+)/;else if(Eh)Hh=/Safari\/([0-9.]+)/;else if(Ah||Bh){Hh=/Version\/(\S+).*Mobile\/(\S+)/;Ih=true}else if(Ch)Hh=/Android\s+([0-9.]+)(?:.*Version\/([0-9.]+))?/;else if(zh)Hh=/Camino\/([0-9.]+)/;if(Hh){var Jh=Hh.exec(lb());Gh=Jh?Ih?Jh[1]+"."+Jh[2]:Jh[2]||Jh[1]:""}Fh=Gh};L&&Bb("7.0");M&&Bb("1.8");L||pb||M&&Bb("1.9");L||qb&&Bb("525");qb&&Bb("531");qb&&Bb("528");M&&Bb("1.9")||L||pb||qb&&Bb("531");M||qb&&Bb("526");Dh&&bb(Fh,"4");function Kh(d){return function(){return d}}var Lh=Kh(false);function U(){this.bb=this.Ri()}H(U,xc);U.prototype.Ri=Lh;function Mh(d,e){d.f=e;I(d.pf(),aa())}a=U.prototype;a.pf=function(){return[]};a.gf=function(d){if(this.f==d)this.bb=true;else Zc(this.r,"Trying to enable an unregistered field with this plugin.")};a.og=function(d){if(this.f==d)this.bb=false;else Zc(this.r,"Trying to disable an unregistered field with this plugin.")};a.r=N("kemia.controller.Plugin");a.ea=function(d){return this.f==d?this.bb:false};a.k=function(){this.f&&Nh(this,this.f);U.g.k.call(this)};
function Nh(d){if(d.f){d.og(d.f);d.f=null}}U.prototype.bj=true;U.prototype.sh=Lh;var Oh=gc({Fl:1,Gl:2,Hl:3,sf:4,Dg:5,execCommand:6,queryCommandValue:7,za:8,ud:9,Bb:10,Ab:11,Nj:12,yl:13,xl:14,wl:15,Dl:16,Bl:17,zl:18,vl:19,ul:20,Cj:21,Ll:22,Kl:23,Jl:24,Il:25,El:26});U.prototype.execCommand=function(d){var e=this.Wj(d);e||Ph(this.f);try{Qh(this.f);var h=this.pd.apply(this,arguments)}finally{if(!e){Rh(this.f);this.f.dispatchEvent(Sh)}}return h};U.prototype.Wj=Lh;U.prototype.Cb=B(false);function Th(d,e,h){this.cells=[];this.fc=e?e:2;this.We=h?h:0.3;this.tc=this.sc=1E5;this.le=this.je=-100000;e=0;for(h=d.length;e<h;e++){var l=d[e];if(l instanceof V)for(var m=0,n=l.b.length;m<n;m++){var o=l.b[m];if(o.a.x<this.sc)this.sc=o.a.x;if(o.a.x>this.je)this.je=o.a.x;if(o.a.y<this.tc)this.tc=o.a.y;if(o.a.y>this.le)this.le=o.a.y}else if(l instanceof O){if(l.x<this.sc)this.sc=l.x;if(l.x>this.je)this.je=l.x;if(l.y<this.tc)this.tc=l.y;if(l.y>this.le)this.le=l.y}}this.sc-=1;this.tc-=1;this.je+=1;
this.le+=1;this.width=this.je-this.sc;this.height=this.le-this.tc;this.ie=Math.ceil(this.width/this.fc);this.Qi=Math.ceil(this.height/this.fc);e=0;for(h=this.ie*this.Qi;e<h;e++)this.cells.push([]);I(d,function(q){if(q instanceof V){I(q.b,function(t){var u=Math.floor((t.a.x-this.sc)/this.fc);this.cells[Math.floor((t.a.y-this.tc)/this.fc)*this.ie+u].push(t)},this);I(q.h,function(t){var u=Zd(Gd(t.source.a,t.target.a));u.scale(0.5);t.Vl=u;var v=Math.floor((u.x-this.sc)/this.fc);this.cells[Math.floor((u.y-
this.tc)/this.fc)*this.ie+v].push(t)},this)}else if(q instanceof O){var s=Math.floor((q.x-this.sc)/this.fc);this.cells[Math.floor((q.y-this.tc)/this.fc)*this.ie+s].push(q)}},this)}function Uh(d,e){var h=[],l=Math.floor((e.x-d.sc)/d.fc);e=Math.floor((e.y-d.tc)/d.fc);var m=l-1;for(l=l+2;m<l;m++)if(!(m<0||m>=d.ie))for(var n=e-1,o=e+2;n<o;n++)n<0||n>=d.Qi||h.push(n*d.ie+m);return h}
function Vh(d,e){var h=[],l=Uh(d,e);i=0;for(li=l.length;i<li;i++){var m=d.cells[l[i]];j=0;for(lj=m.length;j<lj;j++){var n=m[j];if(n instanceof Q){var o=Ed(n.a,e);if(o<d.We)h.push({Of:n,re:o});else o<3*d.We&&h.push({Of:n.G,re:o*2})}else if(n instanceof R){o=Ed(Pd(new Od(n.source.a.x,n.source.a.y,n.target.a.x,n.target.a.y),e.x,e.y),e);o<d.We&&h.push({Of:n,re:o+d.We})}else if(n instanceof O){o=Ed(n,e);o<d.We&&h.push({Of:n,re:o})}}}h.sort(function(q,s){return q.re-s.re});return J(h,function(q){return q.Of})}
;function Wh(d,e){if(M){d.setAttribute("role",e);d.am=e}}function Xh(d,e,h){M&&d.setAttribute("aria-"+e,h)};function Yh(d,e,h,l,m){if(!L&&!(qb&&Bb("525")))return true;if(kb&&m)return Zh(d);if(m&&!l)return false;if(L&&!h&&(e==17||e==18))return false;if(L&&l&&e==d)return false;switch(d){case 13:return true;case 27:return!qb}return Zh(d)}
function Zh(d){if(d>=48&&d<=57)return true;if(d>=96&&d<=106)return true;if(d>=65&&d<=90)return true;switch(d){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return true;default:return false}};function $h(d){this.gb=d||Me();Ec.call(this)}H($h,Ec);a=$h.prototype;a.ej="goog-buttonset";a.Jh=null;a.l=null;a.dj=null;a.Da=function(d,e,h,l){Ec.prototype.Da.call(this,d,e);if(h)this.Jh=d;if(l)this.dj=d;return this};a.J=function(){if(this.l){this.l.innerHTML="";var d=Me(this.l);Cc(this,function(e,h){e=d.j("button",{name:h},e);if(h==this.Jh)e.className=this.ej+"-default";this.l.appendChild(e)},this)}};var ai=G("OK"),bi=G("Cancel"),ci=G("Yes"),di=G("No"),ei=G("Save"),fi=G("Continue");
(new $h).Da("ok",ai,true,true);(new $h).Da("ok",ai,true).Da("cancel",bi,false,true);(new $h).Da("yes",ci,true).Da("no",di,false,true);(new $h).Da("yes",ci).Da("no",di,true).Da("cancel",bi,false,true);(new $h).Da("continue",fi).Da("save",ei).Da("cancel",bi,true,true);/*
 Copyright 2010 Paul Novak (paul@wingu.com)

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function gi(d,e){this.Fb=d;this.id=d.id;this.hl=Me(d);this.Z=[];this.Ic={};this.Vd={};for(var h in Oh)this.Vd[h]=[];this.i=new Ec(hi);e&&this.i.Ed(e);e=d.clientWidth;d=d.clientHeight;d=L?new Wg(e,d,void 0,void 0,void 0):qb&&(!Bb("420")||rb)?new ug(e,d,void 0,void 0,void 0):new Ig(e,d,void 0,void 0,void 0);d.j();this.Q=d;this.Q.J(this.Fb);this.ok=new dd(this);this.R=new hh(this.ok,this.Q,this.i);this.Zh=this.bi=false;this.Cc=new Hf(this);this.Fk=[];this.Cc.v(this.Fb,"mousedown",this.Mj,void 0,void 0);
this.Cc.v(this.Fb,"mousemove",this.Oj,void 0,void 0);this.Cc.v(this.Fb,"mouseup",this.Qh,void 0,void 0);this.Cc.v(this.Fb,"paste",this.Qj,void 0,void 0);this.hj&&this.em()&&Df(this.hj,this.e());this.dispatchEvent("load");for(var l in this.Ic)this.Ic[l].gf(this);this.Jf=ii;this.Zh=this.bi=false;this.selected=[];this.Mf=[]}var ji;H(gi,xc);D("kemia.controller.ReactionEditor",gi,void 0);function ki(d){ji=d}
gi.prototype.clear=function(){this.Q.clear();this.Z=[];var d=new xe(this.i.m("background").color);this.Q.qg(0,0,this.Q.sd().width,this.Q.sd().height,null,d)};function mi(d,e){d.R.transform=undefined;d.R.Uf=e}gi.prototype.qa=function(d){this.clear();this.Z=d;d=Ra(J(d,function(e){if(e instanceof ni){if(e.$d.length==0){oi(e,e.sb);oi(e,e.rb)}e.wc.length==0&&e.sb.length>0&&e.rb.length>0&&pi(e,e.sb,e.rb);return Ia(e.sb,e.rb,e.$d,e.wc)}else return[e]}));if(d.length>0)this.Mf=new Th(d,1,0.5);this.J()};
D("kemia.controller.ReactionEditor.prototype.setModels",gi.prototype.qa,void 0);gi.prototype.J=function(){I(this.Z,function(d){d instanceof ni&&this.R.J(d);d instanceof V&&this.R.Sa.J(d)},this)};D("kemia.controller.ReactionEditor.prototype.render",gi.prototype.J,void 0);function Ph(d){d.dispatchEvent(qi)}gi.prototype.xe=function(d){for(var e=this.Vd[d],h=La(arguments,1),l=0;l<e.length;++l){var m=e[l];if((m.ea(this)||U.Mk[d])&&m[Oh[d]].apply(m,h))return true}return false};
function Rh(d){d.bi=true;d.Zh=true}function ri(d,e){e=je(d.R.Sa.transform.Vb(),[si(e)])[0];var h;d=Vh(d.Mf,{x:e.x,y:e.y});if(d.length>0)h=d[0];return h}function ti(d,e){return P(d.R.Sa.transform,[e])[0]}function si(d){return ui(d.currentTarget,d.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,d.clientY+document.body.scrollTop+document.documentElement.scrollTop)}
function ui(d,e,h){e-=d.offsetLeft;for(h-=d.offsetTop;d=d.offsetParent;){e-=d.offsetLeft;h-=d.offsetTop}return new O(e,h)}function vi(d,e){e=je(d.R.Sa.transform.Vb(),[si(e)])[0];return Vh(d.Mf,{x:e.x,y:e.y})}a=gi.prototype;a.Oj=function(d){this.xe(12,d)};a.Qh=function(d){this.xe(9,d)};a.Mj=function(d){this.xe(8,d)};a.Qh=function(d){this.xe(9,d)};a.Qj=function(d){this.xe(25,d)};
function wi(d,e,h){for(var l=d.Vd[7],m=0;m<l.length;++m){var n=l[m];if(n.ea(d)&&n.Cb(e)&&(h||n.sh()))return n.queryCommandValue(e)}return h?null:false}function Qh(d){I(d.Vd[7],function(e){e.de&&e.de()})}gi.prototype.queryCommandValue=function(d){var e=this.Bf();if(F(d))return wi(this,d,e);else{for(var h={},l=0;l<d.length;l++)h[d[l]]=wi(this,d[l],e);return h}};
gi.prototype.execCommand=function(d){for(var e=arguments,h,l=this.Vd[6],m=0;m<l.length;++m){var n=l[m];if(n.ea(this)&&n.Cb(d)){h=n.execCommand.apply(n,e);break}}return h};gi.prototype.sk=function(d){var e=d.kc();this.Ic[e]&&Zc(this.r,"Cannot register the same class of plugin twice ["+e+"]");this.Ic[e]=d;for(var h in Oh)d[Oh[h]]&&this.Vd[h].push(d);Mh(d,this);this.Bf()&&d.gf(this)};D("kemia.controller.ReactionEditor.prototype.registerPlugin",gi.prototype.sk,void 0);
gi.prototype.Bf=function(){return this.Jf==ii};var ii=2;gi.prototype.r=N("kemia.controller.ReactionEditor");var Sh="cvc",qi="beforechange";
gi.prototype.k=function(){if(this.Jf==1||this.Bf())this.r.log(Uc,"Disposing an editor that is in use.",void 0);this.Fb&&this.execCommand(xi.Ik);for(var d in this.Ic){var e=this.Ic[d];e.sh()||e.og(this)}this.Jf=0;this.Cc&&this.Cc.Ke();this.Yl=null;if(this.Cc){this.Cc.da();this.Cc=null}for(;d=this.Fk.pop();)d.da();ji==this.id&&ki(null);for(var h in this.Ic){d=this.Ic[h];d.bj&&d.da()}delete this.Ic;gi.g.k.call(this)};gi.prototype.Bf=function(){return this.Jf==ii};
var hi={background:{color:"#F0FFF0"},margin:{left:1,right:1,top:1,bottom:1}};function yi(d){d&&zi(this,d)}H(yi,xc);a=yi.prototype;a.l=null;a.Gf=null;a.Jg=null;a.If=null;a.ze=-1;a.Wd=-1;
var Ai={"3":13,"12":144,"63232":38,"63233":40,"63234":37,"63235":39,"63236":112,"63237":113,"63238":114,"63239":115,"63240":116,"63241":117,"63242":118,"63243":119,"63244":120,"63245":121,"63246":122,"63247":123,"63248":44,"63272":46,"63273":36,"63275":35,"63276":33,"63277":34,"63289":144,"63302":45},Bi={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Ci={61:187,
59:186},Di=L||qb&&Bb("525");yi.prototype.Jj=function(d){if(Di&&!Yh(d.keyCode,this.ze,d.shiftKey,d.ctrlKey,d.altKey))this.handleEvent(d);else this.Wd=M&&d.keyCode in Ci?Ci[d.keyCode]:d.keyCode};yi.prototype.Kj=function(){this.Wd=this.ze=-1};
yi.prototype.handleEvent=function(d){var e=d.Dc,h,l;if(L&&d.type=="keypress"){h=this.Wd;l=h!=13&&h!=27?e.keyCode:0}else if(qb&&d.type=="keypress"){h=this.Wd;l=e.charCode>=0&&e.charCode<63232&&Zh(h)?e.charCode:0}else if(pb){h=this.Wd;l=Zh(h)?e.keyCode:0}else{h=e.keyCode||this.Wd;l=e.charCode||0;if(kb&&l==63&&!h)h=191}var m=h,n=e.keyIdentifier;if(h)if(h>=63232&&h in Ai)m=Ai[h];else{if(h==25&&d.shiftKey)m=9}else if(n&&n in Bi)m=Bi[n];d=m==this.ze;this.ze=m;e=new Ei(m,l,d,e);try{this.dispatchEvent(e)}finally{e.da()}};
yi.prototype.e=w("l");function zi(d,e){d.If&&d.detach();d.l=e;d.Gf=oc(d.l,"keypress",d);d.Jg=oc(d.l,"keydown",d.Jj,false,d);d.If=oc(d.l,"keyup",d.Kj,false,d)}yi.prototype.detach=function(){if(this.Gf){sc(this.Gf);sc(this.Jg);sc(this.If);this.If=this.Jg=this.Gf=null}this.l=null;this.ze=-1};yi.prototype.k=function(){yi.g.k.call(this);this.detach()};function Ei(d,e,h,l){l&&this.we(l,void 0);this.type="key";this.keyCode=d;this.charCode=e;this.repeat=h}H(Ei,Cb);function Fi(){}var Gi;ea(Fi);a=Fi.prototype;a.Ec=aa();a.j=function(d){return d.ta().j("div",this.Fc(d).join(" "),d.eb)};a.ya=function(d){return d};a.te=function(d,e,h){if(d=d.e?d.e():d)if(L&&!Bb("7")){var l=Hi(this,Ie(d),e);l.push(e);ta(h?Je:Ke,d).apply(null,l)}else Le(d,e,h)};a.mc=function(d){Vf(d)&&this.ed(d.e(),true);d.ea()&&this.oc(d,d.ab())};a.Vf=function(d,e){Gf(d,!e,!L&&!pb)};a.ed=function(d,e){this.te(d,this.p()+"-rtl",e)};a.Yc=function(d){var e;if(d.$a&32&&(e=d.Ea()))return df(e);return false};
a.oc=function(d,e){var h;if(d.$a&32&&(h=d.Ea())){if(!e&&d.Ja&32){try{h.blur()}catch(l){}d.Ja&32&&d.Wc(null)}df(h)!=e&&ef(h,e)}};a.ub=function(d,e){Cf(d,e)};a.Jb=function(d,e,h){var l=d.e();if(l){var m=this.mf(e);m&&this.te(d,m,h);this.Ze(l,e,h)}};a.Ze=function(d,e,h){if(M){Gi||(Gi=jc(1,"disabled",4,"pressed",8,"selected",16,"checked",64,"expanded"));(e=Gi[e])&&Xh(d,e,h)}};
a.Jc=function(d,e){var h=this.ya(d);if(h){Xe(h);if(e)if(F(e))af(h,e);else{d=function(l){if(l){var m=Oe(h);h.appendChild(F(l)?m.createTextNode(l):l)}};if(ha(e))I(e,d);else ia(e)&&!("nodeType"in e)?I(Ja(e),d):d(e)}}};a.Ea=function(d){return d.e()};a.p=B("goog-control");a.Fc=function(d){var e=this.p(),h=[e],l=this.p();l!=e&&h.push(l);e=d.Ja;for(l=[];e;){var m=e&-e;l.push(this.mf(m));e&=~m}h.push.apply(h,l);(d=d.jc)&&h.push.apply(h,d);L&&!Bb("7")&&h.push.apply(h,Hi(this,h));return h};
function Hi(d,e,h){var l=[];if(h)e=e.concat([h]);I([],function(m){if(Ca(m,ta(K,e))&&(!h||K(m,h)))l.push(m.join("_"))});return l}Fi.prototype.mf=function(d){this.Ch||Ii(this);return this.Ch[d]};function Ii(d){var e=d.p();d.Ch=jc(1,e+"-disabled",2,e+"-hover",4,e+"-active",8,e+"-selected",16,e+"-checked",32,e+"-focused",64,e+"-open")};function Ji(d){for(var e;d;){e=oa(d);if(e=Ki[e])break;d=d.g?d.g.constructor:null}if(e)return ka(e.ua)?e.ua():new e;return null}function Li(d,e){if(!d)throw Error("Invalid class name "+d);if(!ka(e))throw Error("Invalid decorator function "+e);Mi[d]=e}var Ki={},Mi={};function W(d,e,h){Kf.call(this,h);this.t=e||Ji(this.constructor);this.Wf(d)}H(W,Kf);a=W.prototype;a.eb=null;a.Ja=0;a.$a=39;a.uh=255;a.dh=0;a.Ob=true;a.jc=null;a.Eg=true;a.eg=false;function Ni(d,e){d.X&&e!=d.Eg&&Oi(d,e);d.Eg=e}W.prototype.Ea=function(){return this.t.Ea(this)};W.prototype.of=function(){return this.Eb||(this.Eb=new yi)};W.prototype.bg=function(d){if(d){if(this.jc)K(this.jc,d)||this.jc.push(d);else this.jc=[d];this.t.te(this,d,true)}};
function Pi(d,e){if(e&&d.jc){Ga(d.jc,e);if(d.jc.length==0)d.jc=null;d.t.te(d,e,false)}}W.prototype.te=function(d,e){e?this.bg(d):Pi(this,d)};W.prototype.j=function(){var d=this.t.j(this);this.l=d;if(M){var e=this.t.Ec();e&&Wh(d,e)}this.eg||this.t.Vf(d,false);this.ab()||this.t.ub(d,false)};W.prototype.ya=function(){return this.t.ya(this.e())};
W.prototype.sa=function(){W.g.sa.call(this);this.t.mc(this);if(this.$a&-2){this.Eg&&Oi(this,true);if(this.$a&32){var d=this.Ea();if(d){var e=this.of();zi(e,d);this.zb().v(e,"key",this.lc).v(d,"focus",this.rf).v(d,"blur",this.Wc)}}}};
function Oi(d,e){var h=d.zb(),l=d.e();if(e){h.v(l,"mouseover",d.Bb).v(l,"mousedown",d.za).v(l,"mouseup",d.ud).v(l,"mouseout",d.Ab);L&&h.v(l,"dblclick",d.Ph)}else{h.Mb(l,"mouseover",d.Bb).Mb(l,"mousedown",d.za).Mb(l,"mouseup",d.ud).Mb(l,"mouseout",d.Ab);L&&h.Mb(l,"dblclick",d.Ph)}}a=W.prototype;a.xb=function(){W.g.xb.call(this);this.Eb&&this.Eb.detach();this.ab()&&this.ea()&&this.t.oc(this,false)};
a.k=function(){W.g.k.call(this);if(this.Eb){this.Eb.da();delete this.Eb}delete this.t;this.jc=this.eb=null};a.Jc=function(d){this.t.Jc(this.e(),d);this.Wf(d)};a.Wf=ba("eb");a.lf=function(){var d=this.eb;if(!d||F(d))return d;return(d=ha(d)?J(d,ff).join(""):ff(d))&&Va(d)};a.ed=function(d){W.g.ed.call(this,d);var e=this.e();e&&this.t.ed(e,d)};a.Vf=function(d){this.eg=d;var e=this.e();e&&this.t.Vf(e,d)};a.ab=w("Ob");
a.ub=function(d,e){if(e||this.Ob!=d&&this.dispatchEvent(d?"show":"hide")){(e=this.e())&&this.t.ub(e,d);this.ea()&&this.t.oc(this,d);this.Ob=d;return true}return false};a.ea=function(){return!!!(this.Ja&1)};a.Kc=function(d){var e=this.pa;if(!(e&&typeof e.ea=="function"&&!e.ea())&&Qi(this,1,!d)){if(!d){this.setActive(false);this.pc(false)}this.ab()&&this.t.oc(this,d);this.Jb(1,!d)}};a.pc=function(d){Qi(this,2,d)&&this.Jb(2,d)};a.Gc=function(){return!!(this.Ja&4)};
a.setActive=function(d){Qi(this,4,d)&&this.Jb(4,d)};a.ah=function(d){Qi(this,8,d)&&this.Jb(8,d)};a.Af=function(){return!!(this.Ja&16)};function Ri(d,e){Qi(d,16,e)&&d.Jb(16,e)}function Si(d,e){Qi(d,32,e)&&d.Jb(32,e)}W.prototype.na=function(d){Qi(this,64,d)&&this.Jb(64,d)};W.prototype.Jb=function(d,e){if(this.$a&d&&e!=!!(this.Ja&d)){this.t.Jb(this,d,e);this.Ja=e?this.Ja|d:this.Ja&~d}};
function Ti(d,e,h){if(d.X&&d.Ja&e&&!h)throw Error("Component already rendered");!h&&d.Ja&e&&d.Jb(e,false);d.$a=h?d.$a|e:d.$a&~e}function Ui(d,e){return!!(d.uh&e)&&!!(d.$a&e)}function Qi(d,e,h){return!!(d.$a&e)&&!!(d.Ja&e)!=h&&(!(d.dh&e)||d.dispatchEvent(Mf(e,h)))&&!d.pg}a=W.prototype;a.Bb=function(d){d.relatedTarget&&!$e(this.e(),d.relatedTarget)&&this.dispatchEvent("enter")&&this.ea()&&Ui(this,2)&&this.pc(true)};
a.Ab=function(d){if(d.relatedTarget&&!$e(this.e(),d.relatedTarget)&&this.dispatchEvent("leave")){Ui(this,4)&&this.setActive(false);Ui(this,2)&&this.pc(false)}};a.za=function(d){if(this.ea()){Ui(this,2)&&this.pc(true);if(Eb(d,0)){Ui(this,4)&&this.setActive(true);this.t.Yc(this)&&this.Ea().focus()}}!this.eg&&Eb(d,0)&&d.preventDefault()};a.ud=function(d){if(this.ea()){Ui(this,2)&&this.pc(true);this.Gc()&&this.Hc(d)&&Ui(this,4)&&this.setActive(false)}};a.Ph=function(d){this.ea()&&this.Hc(d)};
a.Hc=function(d){Ui(this,16)&&Ri(this,!this.Af());Ui(this,8)&&this.ah(true);Ui(this,64)&&this.na(!!!(this.Ja&64));var e=new Sa("action",this);if(d)for(var h=["altKey","ctrlKey","metaKey","shiftKey","platformModifierKey"],l,m=0;l=h[m];m++)e[l]=d[l];return this.dispatchEvent(e)};a.rf=function(){Ui(this,32)&&Si(this,true)};a.Wc=function(){Ui(this,4)&&this.setActive(false);Ui(this,32)&&Si(this,false)};a.lc=function(d){if(this.ab()&&this.ea()&&this.Ud(d)){d.preventDefault();d.stopPropagation();return true}return false};
a.Ud=function(d){return d.keyCode==13&&this.Hc(d)};if(!ka(W))throw Error("Invalid component class "+W);if(!ka(Fi))throw Error("Invalid renderer class "+Fi);var Vi=oa(W);Ki[Vi]=Fi;Li("goog-control",function(){return new W(null)});function Wi(){}H(Wi,Fi);ea(Wi);Wi.prototype.j=function(d){return d.ta().j("div",this.p())};Wi.prototype.Jc=aa();Wi.prototype.p=B("goog-menuseparator");function Xi(d,e){W.call(this,null,d||Wi.ua(),e);Ti(this,1,false);Ti(this,2,false);Ti(this,4,false);Ti(this,32,false);this.Ja=1}H(Xi,W);Xi.prototype.sa=function(){Xi.g.sa.call(this);Wh(this.e(),"separator")};Li("goog-menuseparator",function(){return new Xi});function Yi(){}ea(Yi);Yi.prototype.Ec=aa();function Zi(d,e,h){if(e)e.tabIndex=h?0:-1}a=Yi.prototype;a.j=function(d){return d.ta().j("div",this.Fc(d).join(" "))};a.ya=function(d){return d};a.mc=function(d){d=d.e();Gf(d,true,M);if(L)d.hideFocus=true;var e=this.Ec();e&&Wh(d,e)};a.Ea=function(d){return d.e()};a.p=B("goog-container");a.Fc=function(d){var e=this.p(),h=[e,d.Zd==$i?e+"-horizontal":e+"-vertical"];d.ea()||h.push(e+"-disabled");return h};a.Oh=function(){return aj};function bj(d,e,h){Kf.call(this,h);this.t=e||Yi.ua();this.Zd=d||this.t.Oh()}H(bj,Kf);var $i="horizontal",aj="vertical";a=bj.prototype;a.Xj=null;a.Eb=null;a.t=null;a.Zd=null;a.Ob=true;a.bb=true;a.ug=true;a.ha=-1;a.Ia=null;a.wd=false;a.Wi=false;a.Pc=null;a.Ea=function(){return this.Xj||this.t.Ea(this)};a.of=function(){return this.Eb||(this.Eb=new yi(this.Ea()))};a.j=function(){this.l=this.t.j(this)};a.ya=function(){return this.t.ya(this.e())};
a.sa=function(){bj.g.sa.call(this);Sf(this,function(e){e.X&&cj(this,e)},this);var d=this.e();this.t.mc(this);this.ub(this.Ob,true);this.zb().v(this,"enter",this.Bg).v(this,"highlight",this.Cg).v(this,"unhighlight",this.Fg).v(this,"open",this.Pj).v(this,"close",this.Fj).v(d,"mousedown",this.za).v(Oe(d),"mouseup",this.Hj).v(d,["mousedown","mouseup","mouseover","mouseout"],this.Ej);this.Yc()&&dj(this,true)};
function dj(d,e){var h=d.zb(),l=d.Ea();e?h.v(l,"focus",d.rf).v(l,"blur",d.Wc).v(d.of(),"key",d.lc):h.Mb(l,"focus",d.rf).Mb(l,"blur",d.Wc).Mb(d.of(),"key",d.lc)}a=bj.prototype;a.xb=function(){this.ib(-1);this.Ia&&this.Ia.na(false);this.wd=false;bj.g.xb.call(this)};a.k=function(){bj.g.k.call(this);if(this.Eb){this.Eb.da();this.Eb=null}this.t=this.Ia=this.Pc=null};a.Bg=B(true);
a.Cg=function(d){var e=Wf(this,d.target);if(e>-1&&e!=this.ha){var h=Uf(this,this.ha);h&&h.pc(false);this.ha=e;h=Uf(this,this.ha);this.wd&&h.setActive(true);if(this.Ia&&h!=this.Ia)h.$a&64?h.na(true):this.Ia.na(false)}Xh(this.e(),"activedescendant",d.target.e().id)};a.Fg=function(d){if(d.target==Uf(this,this.ha))this.ha=-1;Xh(this.e(),"activedescendant","")};a.Pj=function(d){if((d=d.target)&&d!=this.Ia&&d.pa==this){this.Ia&&this.Ia.na(false);this.Ia=d}};
a.Fj=function(d){if(d.target==this.Ia)this.Ia=null};a.za=function(d){this.bb&&ej(this,true);var e=this.Ea(),h;a:{if(e)if((h=e.getAttributeNode("tabindex"))&&h.specified){h=e.tabIndex;h=ja(h)&&h>=0;break a}h=false}h?e.focus():d.preventDefault()};a.Hj=function(){this.wd=false};
a.Ej=function(d){var e;a:{e=d.target;if(this.Pc)for(var h=this.e();e&&e.parentNode&&e!=h;){var l=e.id;if(l in this.Pc){e=this.Pc[l];break a}e=e.parentNode}e=null}if(e)switch(d.type){case "mousedown":e.za(d);break;case "mouseup":e.ud(d);break;case "mouseover":e.Bb(d);break;case "mouseout":e.Ab(d);break}};a.rf=aa();a.Wc=function(){this.ib(-1);this.wd=false;this.Ia&&this.Ia.na(false)};a.lc=function(d){if(this.ea()&&this.ab()&&Tf(this)!=0&&this.Ud(d)){d.preventDefault();d.stopPropagation();return true}return false};
a.Ud=function(d){var e=Uf(this,this.ha);if(e&&typeof e.lc=="function"&&e.lc(d))return true;if(this.Ia&&this.Ia!=e&&typeof this.Ia.lc=="function"&&this.Ia.lc(d))return true;switch(d.keyCode){case 27:if(this.Yc())this.Ea().blur();else return false;break;case 36:fj(this);break;case 35:gj(this);break;case 38:if(this.Zd==aj)hj(this);else return false;break;case 37:if(this.Zd==$i)Vf(this)?ij(this):hj(this);else return false;break;case 40:if(this.Zd==aj)ij(this);else return false;break;case 39:if(this.Zd==
$i)Vf(this)?hj(this):ij(this);else return false;break;default:return false}return true};function cj(d,e){var h=e.e();h=h.id||(h.id=Nf(e));if(!d.Pc)d.Pc={};d.Pc[h]=e}a=bj.prototype;a.kd=function(d,e){bj.g.kd.call(this,d,e)};a.ne=function(d,e,h){d.dh|=2;d.dh|=64;if(this.Yc()||!this.Wi)Ti(d,32,false);Ni(d,false);bj.g.ne.call(this,d,e,h);h&&this.X&&cj(this,d);e<=this.ha&&this.ha++};
a.removeChild=function(d,e){var h=Wf(this,d);if(h!=-1)if(h==this.ha)d.pc(false);else h<this.ha&&this.ha--;(h=d.e())&&h.id&&dc(this.Pc,h.id);d=bj.g.removeChild.call(this,d,e);Ni(d,true);return d};a.ab=w("Ob");a.ub=function(d,e){if(e||this.Ob!=d&&this.dispatchEvent(d?"show":"hide")){this.Ob=d;var h=this.e();if(h){Cf(h,d);this.Yc()&&Zi(this.t,this.Ea(),this.bb&&this.Ob);this.Ob&&!e&&this.dispatchEvent("aftershow")}return true}return false};a.ea=w("bb");
a.Kc=function(d){if(this.bb!=d&&this.dispatchEvent(d?"enable":"disable")){if(d){this.bb=true;Sf(this,function(e){if(e.Mi)delete e.Mi;else e.Kc(true)})}else{Sf(this,function(e){if(e.ea())e.Kc(false);else e.Mi=true});this.wd=this.bb=false}this.Yc()&&Zi(this.t,this.Ea(),d&&this.Ob)}};a.Yc=w("ug");a.oc=function(d){d!=this.ug&&this.X&&dj(this,d);this.ug=d;this.bb&&this.Ob&&Zi(this.t,this.Ea(),d)};a.ib=function(d){if(d=Uf(this,d))d.pc(true);else this.ha>-1&&Uf(this,this.ha).pc(false)};
a.pc=function(d){this.ib(Wf(this,d))};function fj(d){jj(d,function(e,h){return(e+1)%h},Tf(d)-1)}function gj(d){jj(d,function(e,h){e--;return e<0?h-1:e},0)}function ij(d){jj(d,function(e,h){return(e+1)%h},d.ha)}function hj(d){jj(d,function(e,h){e--;return e<0?h-1:e},d.ha)}function jj(d,e,h){h=h<0?Wf(d,d.Ia):h;var l=Tf(d);h=e.call(d,h,l);for(var m=0;m<=l;){var n=Uf(d,h);if(n&&d.zh(n)){d.ib(h);return true}m++;h=e.call(d,h,l)}return false}bj.prototype.zh=function(d){return d.ab()&&d.ea()&&!!(d.$a&2)};
function ej(d,e){d.wd=e};function kj(){this.Dh=[]}H(kj,Fi);ea(kj);function mj(d,e){var h=d.Dh[e];if(!h){switch(e){case 0:h=d.p()+"-highlight";break;case 1:h=d.p()+"-checkbox";break;case 2:h=d.p()+"-content";break}d.Dh[e]=h}return h}kj.prototype.Ec=B("menuitem");kj.prototype.j=function(d){var e=d.ta().j("div",this.Fc(d).join(" "),nj(this,d.eb,d.ta()));oj(this,d,e,!!(d.$a&8)||!!(d.$a&16));return e};kj.prototype.ya=function(d){return d&&d.firstChild};
kj.prototype.Jc=function(d,e){var h=this.ya(d),l=pj(this,d)?h.firstChild:null;kj.g.Jc.call(this,d,e);if(l&&!pj(this,d))h.insertBefore(l,h.firstChild||null)};function nj(d,e,h){d=mj(d,2);return h.j("div",d,e)}kj.prototype.$g=function(d,e,h){if(e){Wh(e,h?"menuitemradio":this.Ec());oj(this,d,e,h)}};function pj(d,e){if(e=d.ya(e)){e=e.firstChild;d=mj(d,1);return!!e&&!!e.className&&e.className.indexOf(d)!=-1}return false}
function oj(d,e,h,l){if(l!=pj(d,h)){Le(h,"goog-option",l);h=d.ya(h);if(l){d=mj(d,1);h.insertBefore(e.ta().j("div",d),h.firstChild||null)}else h.removeChild(h.firstChild)}}kj.prototype.mf=function(d){switch(d){case 2:return mj(this,0);case 16:case 8:return"goog-option-selected";default:return kj.g.mf.call(this,d)}};kj.prototype.p=B("goog-menuitem");function qj(d,e,h,l){W.call(this,d,l||kj.ua(),h);this.wa(e)}H(qj,W);qj.prototype.Oa=function(){var d=this.Ng;return d!=null?d:this.lf()};qj.prototype.wa=ba("Ng");qj.prototype.$g=function(d){Ti(this,8,d);this.Af()&&!d&&Ri(this,false);var e=this.e();e&&this.t.$g(this,e,d)};Li("goog-menuitem",function(){return new qj(null)});function rj(d,e,h){qj.call(this,d,e,h);this.$g(true)}H(rj,qj);rj.prototype.Hc=function(){return this.dispatchEvent("action")};Li("goog-option",function(){return new rj(null)});function sj(){}H(sj,Wi);ea(sj);sj.prototype.j=function(d){return d.ta().j("div",this.p()+" goog-inline-block","\u00a0")};sj.prototype.p=B("goog-toolbar-separator");function tj(){}H(tj,Yi);ea(tj);tj.prototype.Ec=B("toolbar");tj.prototype.p=B("goog-toolbar");tj.prototype.Oh=function(){return $i};function uj(d,e,h){bj.call(this,e,d||tj.ua(),h)}H(uj,bj);function vj(){}H(vj,Fi);ea(vj);a=vj.prototype;a.Ec=B("button");a.Ze=function(d,e,h){if(M)e==16?Xh(d,"pressed",h):vj.g.Ze.call(this,d,e,h)};a.j=function(d){var e=vj.g.j.call(this,d),h=d.Sd();h&&this.Pe(e,h);(h=d.Oa())&&this.wa(e,h);d.$a&16&&this.Ze(e,16,false);return e};a.Oa=da;a.wa=da;a.Sd=function(d){return d.title};a.Pe=function(d,e){if(d)d.title=e||""};a.p=B("goog-button");function wj(){}H(wj,vj);ea(wj);a=wj.prototype;a.Ec=aa();a.j=function(d){Ni(d,false);d.uh&=-256;Ti(d,32,false);return d.ta().j("button",{"class":this.Fc(d).join(" "),disabled:!d.ea(),title:d.Sd()||"",value:d.Oa()||""},d.lf()||"")};a.mc=function(d){d.zb().v(d.e(),"click",d.Hc)};a.Vf=da;a.ed=da;a.Yc=function(d){return d.ea()};a.oc=da;a.Jb=function(d,e,h){wj.g.Jb.call(this,d,e,h);if((d=d.e())&&e==1)d.disabled=h};a.Oa=function(d){return d.value};a.wa=function(d,e){if(d)d.value=e};a.Ze=da;function xj(d,e,h){W.call(this,d,e||wj.ua(),h)}H(xj,W);a=xj.prototype;a.Oa=w("Ji");a.wa=function(d){this.Ji=d;this.t.wa(this.e(),d)};a.Sd=w("Hi");a.Pe=function(d){this.Hi=d;this.t.Pe(this.e(),d)};a.k=function(){xj.g.k.call(this);delete this.Ji;delete this.Hi};a.sa=function(){xj.g.sa.call(this);if(this.$a&32){var d=this.Ea();d&&this.zb().v(d,"keyup",this.Ud)}};a.Ud=function(d){if(d.keyCode==13&&d.type=="key"||d.keyCode==32&&d.type=="keyup")return this.Hc(d);return d.keyCode==32};Li("goog-button",function(){return new xj(null)});function yj(){}H(yj,vj);ea(yj);yj.prototype.j=function(d){var e={"class":"goog-inline-block "+this.Fc(d).join(" "),title:d.Sd()||""};return d.ta().j("div",e,this.jg(d.eb,d.ta()))};yj.prototype.ya=function(d){return d&&d.firstChild.firstChild};yj.prototype.jg=function(d,e){return e.j("div","goog-inline-block "+(this.p()+"-outer-box"),e.j("div","goog-inline-block "+(this.p()+"-inner-box"),d))};yj.prototype.p=B("goog-custom-button");function zj(){}H(zj,yj);ea(zj);zj.prototype.p=B("goog-toolbar-button");function Aj(d,e,h){xj.call(this,d,e||zj.ua(),h)}H(Aj,xj);Li("goog-toolbar-button",function(){return new Aj(null)});var Bj={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Cj(d){var e={};d=String(d);var h=d.charAt(0)=="#"?d:"#"+d;if(Dj.test(h)){e.vf=Ej(h);e.type="hex";return e}else{a:{var l=d.match(Fj);if(l){h=Number(l[1]);var m=Number(l[2]);l=Number(l[3]);if(h>=0&&h<=255&&m>=0&&m<=255&&l>=0&&l<=255){h=[h,m,l];break a}}h=[]}if(h.length){e.vf=Gj(h[0],h[1],h[2]);e.type="rgb";return e}else if(Bj)if(h=Bj[d.toLowerCase()]){e.vf=h;e.type="named";return e}}throw Error(d+" is not a valid color string");}var Hj=/#(.)(.)(.)/;
function Ej(d){if(!Dj.test(d))throw Error("'"+d+"' is not a valid hex color");if(d.length==4)d=d.replace(Hj,"#$1$1$2$2$3$3");return d.toLowerCase()}function Ij(d){d=Ej(d);return[parseInt(d.substr(1,2),16),parseInt(d.substr(3,2),16),parseInt(d.substr(5,2),16)]}
function Gj(d,e,h){d=Number(d);e=Number(e);h=Number(h);if(isNaN(d)||d<0||d>255||isNaN(e)||e<0||e>255||isNaN(h)||h<0||h>255)throw Error('"('+d+","+e+","+h+'") is not a valid RGB color');d=Jj(d.toString(16));e=Jj(e.toString(16));h=Jj(h.toString(16));return"#"+d+e+h}var Dj=/^#(?:[0-9a-f]{3}){1,2}$/i,Fj=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;function Jj(d){return d.length==1?"0"+d:d};function Kj(){}H(Kj,Yi);ea(Kj);Kj.prototype.Ec=B("menu");Kj.prototype.md=function(d,e){return $e(d.e(),e)};Kj.prototype.p=B("goog-menu");Kj.prototype.mc=function(d){Kj.g.mc.call(this,d);d=d.e();Xh(d,"haspopup","true")};Li("goog-menuseparator",function(){return new Xi});function Lj(d,e){bj.call(this,aj,e||Kj.ua(),d);this.oc(false)}H(Lj,bj);a=Lj.prototype;a.dg=true;a.Xi=false;a.p=function(){return this.t.p()};a.md=function(d){if(this.t.md(this,d))return true;for(var e=0,h=Tf(this);e<h;e++){var l=Uf(this,e);if(typeof l.md=="function"&&l.md(d))return true}return false};a.Xa=function(d){this.kd(d,true)};a.Fd=function(d,e){this.ne(d,e,true)};a.Od=function(d){return Uf(this,d)};a.nf=function(){return Tf(this)};
a.ub=function(d,e){(e=Lj.g.ub.call(this,d,e))&&d&&this.X&&this.dg&&this.Ea().focus();return e};a.Bg=function(d){this.dg&&this.Ea().focus();return Lj.g.Bg.call(this,d)};a.zh=function(d){return(this.Xi||d.ea())&&d.ab()&&!!(d.$a&2)};function Mj(){}H(Mj,yj);ea(Mj);if(M)Mj.prototype.Jc=function(d,e){var h=Mj.g.ya.call(this,d&&d.firstChild);h&&Ze(this.createCaption(e,Me(d)),h)};Mj.prototype.ya=function(d){d=Mj.g.ya.call(this,d&&d.firstChild);if(M&&d&&d.__goog_wrapper_div)d=d.firstChild;return d};Mj.prototype.jg=function(d,e){return Mj.g.jg.call(this,[this.createCaption(d,e),this.kg(e)],e)};Mj.prototype.createCaption=function(d,e){return Nj(d,this.p(),e)};
function Nj(d,e,h){return h.j("div","goog-inline-block "+(e+"-caption"),d)}Mj.prototype.kg=function(d){return d.j("div","goog-inline-block "+(this.p()+"-dropdown"),"\u00a0")};Mj.prototype.p=B("goog-menu-button");function Oj(){}H(Oj,Mj);ea(Oj);Oj.prototype.createCaption=function(d,e){return Oj.g.createCaption.call(this,Pj(d,e),e)};function Pj(d,e){return e.j("div","goog-color-menu-button-indicator",d)}Oj.prototype.wa=function(d,e){d&&Qj(this.ya(d),e)};function Qj(d,e){if(d&&d.firstChild){var h;try{h=Cj(e).vf}catch(l){h=null}d.firstChild.style.borderBottomColor=h||(L?"":"transparent")}}Oj.prototype.mc=function(d){this.wa(d.e(),d.Oa());Je(d.e(),"goog-color-menu-button");Oj.g.mc.call(this,d)};function Rj(){}H(Rj,Fi);ea(Rj);var Sj=0;Rj.prototype.j=function(d){var e=this.Fc(d);return d.ta().j("div",e?e.join(" "):null,Tj(this,d.eb,d.sd(),d.ta()))};function Tj(d,e,h,l){for(var m=[],n=0,o=0;n<h.height;n++){for(var q=[],s=0;s<h.width;s++){var t=e&&e[o++];q.push(Uj(d,t,l))}m.push(l.j("tr",d.p()+"-row",q))}return d.Gh(m,l)}Rj.prototype.Gh=function(d,e){d=e.j("table",this.p()+"-table",e.j("tbody",this.p()+"-body",d));d.cellSpacing=0;d.cellPadding=0;Wh(d,"grid");return d};
function Uj(d,e,h){d=h.j("td",{"class":d.p()+"-cell",id:d.p()+"-cell-"+Sj++},e);Wh(d,"gridcell");return d}
Rj.prototype.Jc=function(d,e){if(d){var h=Pe(document,"tbody",this.p()+"-body",d)[0];if(h){var l=0;I(h.rows,function(s){I(s.cells,function(t){Xe(t);if(e){var u=e[l++];u&&We(t,u)}})});if(l<e.length){for(var m=[],n=Me(d),o=h.rows[0].cells.length;l<e.length;){var q=e[l++];m.push(Uj(this,q,n));if(m.length==o){q=n.j("tr",this.p()+"-row",m);h.appendChild(q);m.length=0}}if(m.length>0){for(;m.length<o;)m.push(Uj(this,"",n));q=n.j("tr",this.p()+"-row",m);h.appendChild(q)}}}Gf(d,true,M)}};
function Vj(d,e,h){for(e=e.e();h&&h.nodeType==1&&h!=e;){if(h.tagName=="TD"&&K(Ie(h),d.p()+"-cell"))return h.firstChild;h=h.parentNode}return null}function Wj(d,e,h,l){if(h){h=h.parentNode;Le(h,d.p()+"-cell-hover",l);d=e.e().firstChild;Xh(d,"activedescendent",h.id)}}function Xj(d,e,h,l){h&&Le(h.parentNode,d.p()+"-cell-selected",l)}Rj.prototype.p=B("goog-palette");function Yj(d){this.vd=[];Zj(this,d)}H(Yj,xc);Yj.prototype.cd=null;Yj.prototype.Vg=null;Yj.prototype.nf=function(){return this.vd.length};Yj.prototype.Od=function(d){return this.vd[d]||null};function Zj(d,e){if(e){I(e,function(h){this.he(h,false)},d);Ka(d.vd,e)}}a=Yj.prototype;a.Xa=function(d){this.Fd(d,this.nf())};a.Fd=function(d,e){if(d){this.he(d,false);Ea(this.vd,d,e)}};a.rd=w("cd");a.qc=function(d){if(d!=this.cd){this.he(this.cd,false);this.cd=d;this.he(d,true)}this.dispatchEvent("select")};
a.Rd=function(){return this.cd?ya(this.vd,this.cd):-1};a.Xf=function(d){this.qc(this.Od(d))};a.clear=function(){var d=this.vd;if(!ha(d))for(var e=d.length-1;e>=0;e--)delete d[e];d.length=0;this.cd=null};a.k=function(){Yj.g.k.call(this);delete this.vd;this.cd=null};a.he=function(d,e){if(d)if(typeof this.Vg=="function")this.Vg(d,e);else typeof d.ah=="function"&&d.ah(e)};function $j(d,e,h){W.call(this,d,e||Rj.ua(),h)}H($j,W);a=$j.prototype;a.Kb=null;a.ha=-1;a.u=null;a.k=function(){$j.g.k.call(this);if(this.u){this.u.da();this.u=null}this.Kb=null};a.Wf=function(d){$j.g.Wf.call(this,d);ak(this);if(this.u){this.u.clear();Zj(this.u,d)}else{this.u=new Yj(d);this.u.Vg=sa(this.he,this);this.zb().v(this.u,"select",this.sf)}this.ha=-1};a.lf=B(null);
a.Bb=function(d){$j.g.Bb.call(this,d);var e=Vj(this.t,this,d.target);e&&d.relatedTarget&&$e(e,d.relatedTarget)||e!=bk(this)&&ck(this,e)};a.Ab=function(d){$j.g.Ab.call(this,d);var e=Vj(this.t,this,d.target);e&&d.relatedTarget&&$e(e,d.relatedTarget)||e==bk(this)&&Wj(this.t,this,e,false)};a.za=function(d){$j.g.za.call(this,d);if(this.Gc()){d=Vj(this.t,this,d.target);d!=bk(this)&&ck(this,d)}};a.Hc=function(){var d=bk(this);if(d){this.qc(d);return this.dispatchEvent("action")}return false};
a.lc=function(d){var e=this.eb;e=e?e.length:0;var h=this.Kb.width;if(e==0||!this.ea())return false;if(d.keyCode==13||d.keyCode==32)return this.Hc(d);if(d.keyCode==36){this.ib(0);return true}else if(d.keyCode==35){this.ib(e-1);return true}var l=this.ha<0?this.Rd():this.ha;switch(d.keyCode){case 37:if(l==-1)l=e;if(l>0){this.ib(l-1);d.preventDefault();return true}break;case 39:if(l<e-1){this.ib(l+1);d.preventDefault();return true}break;case 38:if(l==-1)l=e+h-1;if(l>=h){this.ib(l-h);d.preventDefault();
return true}break;case 40:if(l==-1)l=-h;if(l<e-h){this.ib(l+h);d.preventDefault();return true}break}return false};a.sf=aa();a.sd=w("Kb");a.tb=function(d,e){if(this.e())throw Error("Component already rendered");this.Kb=ja(d)?new Kd(d,e):d;ak(this)};function bk(d){var e=d.eb;return e&&e[d.ha]}$j.prototype.ib=function(d){if(d!=this.ha){dk(this,this.ha,false);this.ha=d;dk(this,d,true)}};function ck(d,e){var h=d.eb;d.ib(h?ya(h,e):-1)}$j.prototype.Rd=function(){return this.u?this.u.Rd():-1};
$j.prototype.rd=function(){return this.u?this.u.rd():null};$j.prototype.Xf=function(d){this.u&&this.u.Xf(d)};$j.prototype.qc=function(d){this.u&&this.u.qc(d)};function dk(d,e,h){if(d.e()){var l=d.eb;l&&e>=0&&e<l.length&&Wj(d.t,d,l[e],h)}}$j.prototype.he=function(d,e){this.e()&&Xj(this.t,this,d,e)};
function ak(d){var e=d.eb;if(e)if(d.Kb&&d.Kb.width){e=Math.ceil(e.length/d.Kb.width);if(!ja(d.Kb.height)||d.Kb.height<e)d.Kb.height=e}else{e=Math.ceil(Math.sqrt(e.length));d.Kb=new Kd(e,e)}else d.Kb=new Kd(0,0)};function ek(d,e,h){this.af=d||[];$j.call(this,null,e||Rj.ua(),h);this.af=this.af;this.Nf=null;this.Jc(fk(this))}H(ek,$j);ek.prototype.Nf=null;ek.prototype.yg=function(){var d=this.rd();if(d){d=d.style[Bf("background-color")];return gk(d)}else return null};ek.prototype.bh=function(d){d=gk(d);if(!this.Nf)this.Nf=J(this.af,function(e){return gk(e)});this.Xf(d?ya(this.Nf,d):-1)};
function fk(d){return J(d.af,function(e){var h=this.ta().j("div",{"class":this.t.p()+"-colorswatch",style:"background-color:"+e});h.title=e.charAt(0)=="#"?"RGB ("+Ij(e).join(", ")+")":e;return h},d)}function gk(d){if(d)try{return Cj(d).vf}catch(e){}return null};function hk(d,e,h,l,m,n,o,q){var s,t=h.offsetParent;if(t){var u=t.tagName=="HTML"||t.tagName=="BODY";if(!u||qf(t,"position")!="static"){s=uf(t);u||(s=Fd(s,new O(t.scrollLeft,t.scrollTop)))}}t=zf(d);(u=tf(d))&&t.Yh(id(u));u=Me(d);var v=Me(h);if(u.L!=v.L){var A=u.L.body;v=v.L.parentWindow||v.L.defaultView;var E=new O(0,0),S=Oe(A)?Oe(A).parentWindow||Oe(A).defaultView:window,la=A;do{var vb=S==v?uf(la):wf(la);E.x+=vb.x;E.y+=vb.y}while(S&&S!=v&&(la=S.frameElement)&&(S=S.parent));v=E;v=Fd(v,uf(A));if(L&&
!jf(u))v=Fd(v,kf(u));t.left+=v.x;t.top+=v.y}d=(e&4&&vf(d)?e^2:e)&-5;e=new O(d&2?t.left+t.width:t.left,d&1?t.top+t.height:t.top);if(s)e=Fd(e,s);if(m){e.x+=(d&2?-1:1)*m.x;e.y+=(d&1?-1:1)*m.y}var ma;if(o)if((ma=tf(h))&&s){ma.top=Math.max(0,ma.top-s.y);ma.right-=s.x;ma.bottom-=s.y;ma.left=Math.max(0,ma.left-s.x)}a:{m=e;s=ma;m=m.aa();ma=0;d=(l&4&&vf(h)?l^2:l)&-5;l=yf(h);q=q?q.aa():l;if(n||d!=0){if(d&2)m.x-=q.width+(n?n.right:0);else if(n)m.x+=n.left;if(d&1)m.y-=q.height+(n?n.bottom:0);else if(n)m.y+=n.top}if(o){ma=
s?ik(m,q,s,o):256;if(ma&496){h=ma;break a}}m=m;o=M&&(kb||tb)&&Bb("1.9");if(m instanceof O){n=m.x;m=m.y}else{n=m;m=void 0}h.style.left=typeof n=="number"?(o?Math.round(n):n)+"px":n;h.style.top=typeof m=="number"?(o?Math.round(m):m)+"px":m;(l==q?true:!l||!q?false:l.width==q.width&&l.height==q.height)||xf(h,q);h=ma}return h}
function ik(d,e,h,l){var m=0;if(d.x<h.left&&l&1){d.x=h.left;m|=1}if(d.x<h.left&&d.x+e.width>h.right&&l&16){e.width-=d.x+e.width-h.right;m|=4}if(d.x+e.width>h.right&&l&1){d.x=Math.max(h.right-e.width,h.left);m|=1}if(l&2)m|=(d.x<h.left?16:0)|(d.x+e.width>h.right?32:0);if(d.y<h.top&&l&4){d.y=h.top;m|=2}if(d.y>=h.top&&d.y+e.height>h.bottom&&l&32){e.height-=d.y+e.height-h.bottom;m|=8}if(d.y+e.height>h.bottom&&l&4){d.y=Math.max(h.bottom-e.height,h.top);m|=2}if(l&8)m|=(d.y<h.top?64:0)|(d.y+e.height>h.bottom?
128:0);return m};function jk(){}jk.prototype.Le=aa();function kk(d,e){this.element=d;this.Hd=e}H(kk,jk);kk.prototype.Le=function(d,e,h){hk(this.element,this.Hd,d,e,undefined,h)};function lk(d,e,h){kk.call(this,d,e);this.Ui=h}H(lk,kk);lk.prototype.Le=function(d,e,h,l){var m=hk(this.element,this.Hd,d,e,null,h,10,l);if(m&496){var n=this.Hd,o=e;if(m&48){n^=2;o^=2}if(m&192){n^=1;o^=1}m=hk(this.element,n,d,o,null,h,10,l);if(m&496)this.Ui?hk(this.element,this.Hd,d,e,null,h,5,l):hk(this.element,this.Hd,d,e,null,h,0,l)}};function mk(d,e,h,l){lk.call(this,d,e,h);this.tk=l}H(mk,lk);mk.prototype.Le=function(d,e,h,l){this.tk?hk(this.element,this.Hd,d,e,null,h,33,l):mk.g.Le.call(this,d,e,h,l)};function nk(d,e,h,l){xj.call(this,d,h||Mj.ua(),l);Ti(this,64,true);e&&this.dd(e);this.Lb=new xg(500)}H(nk,xj);a=nk.prototype;a.th=true;a.Ug=false;a.Gg=false;a.sa=function(){nk.g.sa.call(this);this.w&&ok(this,this.w,true);Xh(this.e(),"haspopup","true")};a.xb=function(){nk.g.xb.call(this);if(this.w){this.na(false);this.w.xb();ok(this,this.w,false);var d=this.w.e();d&&Ye(d)}};a.k=function(){nk.g.k.call(this);if(this.w){this.w.da();delete this.w}this.Lb.da()};
a.za=function(d){nk.g.za.call(this,d);if(this.Gc()){this.na(!!!(this.Ja&64));this.w&&ej(this.w,!!(this.Ja&64))}};a.ud=function(d){nk.g.ud.call(this,d);this.w&&!this.Gc()&&ej(this.w,false)};a.Hc=function(){this.setActive(false);return true};a.Gj=function(d){this.w&&this.w.ab()&&!this.md(d.target)&&this.na(false)};a.md=function(d){return d&&$e(this.e(),d)||this.w&&this.w.md(d)||false};
a.Ud=function(d){if(d.type!=(d.keyCode==32?"keyup":"key"))return false;if(this.w&&this.w.ab()){var e=this.w.lc(d);if(d.keyCode==27){this.na(false);return true}return e}if(d.keyCode==40||d.keyCode==38||d.keyCode==32){this.na(true);return true}return false};a.ve=function(){this.na(false)};a.Lj=function(){this.Gc()||this.na(false)};a.Wc=function(d){this.Gg||this.na(false);nk.g.Wc.call(this,d)};function pk(d){d.w||d.dd(new Lj(d.ta()));return d.w||null}a=nk.prototype;
a.dd=function(d){var e=this.w;if(d!=e){if(e){this.na(false);this.X&&ok(this,e,false);delete this.w}if(d){this.w=d;Pf(d,this);d.ub(false);var h=this.Gg;(d.dg=h)&&d.oc(true);this.X&&ok(this,d,true)}}return e};a.Xa=function(d){pk(this).kd(d,true)};a.Fd=function(d,e){pk(this).ne(d,e,true)};a.Od=function(d){return this.w?Uf(this.w,d):null};a.nf=function(){return this.w?Tf(this.w):0};a.ub=function(d,e){(d=nk.g.ub.call(this,d,e))&&!this.ab()&&this.na(false);return d};
a.Kc=function(d){nk.g.Kc.call(this,d);this.ea()||this.na(false)};
a.na=function(d){nk.g.na.call(this,d);if(this.w&&!!(this.Ja&64)==d){if(d){this.w.X||this.w.J();this.Ki=tf(this.e());this.xh=zf(this.e());qk(this);this.w.ib(-1)}else{this.setActive(false);this.w.wd=false;if(this.Qf!=null){this.Qf=undefined;var e=this.w.e();e&&xf(e,"","")}}this.w.ub(d);e=this.zb();var h=d?e.v:e.Mb;h.call(e,hf(this.ta()),"mousedown",this.Gj,true);this.Gg&&h.call(e,this.w,"blur",this.Lj);h.call(e,this.Lb,zg,this.hk);d?this.Lb.start():this.Lb.stop()}};
function qk(d){var e=d.th?5:7;e=new mk(d.e(),e,!d.Ug,d.Ug);var h=d.w.e();if(!d.w.ab()){h.style.visibility="hidden";Cf(h,true)}if(!d.Qf&&d.Ug)d.Qf=yf(h);e.Le(h,d.th?4:6,null,d.Qf);if(!d.w.ab()){Cf(h,false);h.style.visibility="visible"}}nk.prototype.hk=function(){var d=zf(this.e()),e=tf(this.e()),h;h=this.xh;h=h==d?true:!h||!d?false:h.left==d.left&&h.width==d.width&&h.top==d.top&&h.height==d.height;if(!h||!Jd(this.Ki,e)){this.xh=d;this.Ki=e;qk(this)}};
function ok(d,e,h){var l=d.zb();h=h?l.v:l.Mb;h.call(l,e,"action",d.ve);h.call(l,e,"highlight",d.Cg);h.call(l,e,"unhighlight",d.Fg)}nk.prototype.Cg=function(d){Xh(this.e(),"activedescendant",d.target.e().id)};nk.prototype.Fg=function(){Uf(this.w,this.w.ha)||Xh(this.e(),"activedescendant","")};Li("goog-menu-button",function(){return new nk(null)});function rk(d,e,h,l){nk.call(this,d,e,h||Oj.ua(),l)}H(rk,nk);
var sk={Lk:["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],Qk:["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],Ok:["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc","#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd","#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0","#cc0000","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79","#990000","#b45f06","#bf9000","#38761d","#134f5c",
"#0b5394","#351c75","#741b47","#660000","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]};function tk(d,e){var h=new Lj(e);d&&I(d,function(l){h.kd(l,true)});$b(sk,function(l){l=new ek(l,null,e);l.tb(8);h.kd(l,true)});return h}a=rk.prototype;a.yg=function(){return this.Oa()};a.bh=function(d){this.wa(d)};a.wa=function(d){for(var e=0,h;h=this.Od(e);e++)typeof h.bh=="function"&&h.bh(d);rk.g.wa.call(this,d)};
a.ve=function(d){if(typeof d.target.yg=="function")this.wa(d.target.yg());else d.target.Oa()=="none"&&this.wa(null);rk.g.ve.call(this,d);d.stopPropagation();this.dispatchEvent("action")};a.na=function(d){if(d&&this.nf()==0){this.dd(tk(null,this.ta()));this.wa(this.Oa())}rk.g.na.call(this,d)};Li("goog-color-menu-button",function(){return new rk(null)});function uk(){}H(uk,Mj);ea(uk);uk.prototype.p=B("goog-toolbar-menu-button");function vk(){}H(vk,uk);ea(vk);vk.prototype.createCaption=function(d,e){return Nj(Pj(d,e),this.p(),e)};vk.prototype.wa=function(d,e){d&&Qj(this.ya(d),e)};vk.prototype.mc=function(d){this.wa(d.e(),d.Oa());Je(d.e(),"goog-toolbar-color-menu-button");vk.g.mc.call(this,d)};function wk(d,e,h,l){rk.call(this,d,e,h||vk.ua(),l)}H(wk,rk);Li("goog-toolbar-color-menu-button",function(){return new wk(null)});function xk(d,e,h,l){nk.call(this,d,e,h||uk.ua(),l)}H(xk,nk);Li("goog-toolbar-menu-button",function(){return new xk(null)});function yk(d,e,h,l){nk.call(this,d,e,h,l);this.cf=d;zk(this)}H(yk,nk);a=yk.prototype;a.u=null;a.cf=null;a.sa=function(){yk.g.sa.call(this);zk(this)};a.k=function(){yk.g.k.call(this);if(this.u){this.u.da();this.u=null}this.cf=null};a.ve=function(d){this.qc(d.target);yk.g.ve.call(this,d);d.stopPropagation();this.dispatchEvent("action")};a.sf=function(){var d=this.rd();yk.g.wa.call(this,d&&d.Oa());zk(this)};
a.dd=function(d){var e=yk.g.dd.call(this,d);if(d!=e){this.u&&this.u.clear();if(d)this.u?Sf(d,function(h){this.u.Xa(h)},this):Ak(this,d)}return e};a.Xa=function(d){yk.g.Xa.call(this,d);this.u?this.u.Xa(d):Ak(this,pk(this))};a.Fd=function(d,e){yk.g.Fd.call(this,d,e);this.u?this.u.Fd(d,e):Ak(this,pk(this))};a.qc=function(d){this.u&&this.u.qc(d)};a.Xf=function(d){this.u&&this.qc(this.u.Od(d))};
a.wa=function(d){if(d!=null&&this.u)for(var e=0,h;h=this.u.Od(e);e++)if(h&&typeof h.Oa=="function"&&h.Oa()==d){this.qc(h);return}this.qc(null)};a.rd=function(){return this.u?this.u.rd():null};a.Rd=function(){return this.u?this.u.Rd():-1};function Ak(d,e){d.u=new Yj;e&&Sf(e,function(h){this.u.Xa(h)},d);d.zb().v(d.u,"select",d.sf)}function zk(d){var e=d.rd();d.Jc(e?e.lf():d.cf)}yk.prototype.na=function(d){yk.g.na.call(this,d);this.Ja&64&&pk(this).ib(this.Rd())};Li("goog-select",function(){return new yk(null)});function Bk(d,e,h,l){yk.call(this,d,e,h||uk.ua(),l)}H(Bk,yk);Li("goog-toolbar-select",function(){return new Bk(null)});D("kemia.controller.ToolbarFactory.makeButton",Ck,void 0);function Ck(d,e,h,l,m,n){h=new Aj(Dk(h,l,n),m,n);Of(h,d);h.Pe(e);return h}function Ek(d,e,h,l,m,n){d=Ck(d,e,h,l,m,n);Ti(d,16,true);return d}function Fk(d,e,h,l,m,n){m=new Bk(null,null,m,n);l&&I(l.split(/\s+/),m.bg,m);m.bg("goog-toolbar-select");m.cf=h;zk(m);Of(m,d);m.Pe(e);return m}function Dk(d,e,h){if((!d||d=="")&&M&&!Bb("1.9a"))d="\u00a0";return(h||Me()).j("DIV",e?{"class":e}:null,d)};var xi={};function Gk(){U.call(this)}H(Gk,U);D("kemia.controller.plugins.Erase",Gk,void 0);a=Gk.prototype;a.Cb=function(d){return d=="erase"};a.kc=Kh("erase");a.r=N("kemia.controller.plugins.Erase");a.pd=function(d,e,h){this.r.info("active: "+h);this.Gc=h};a.za=function(d){if(this.Gc){Ph(this.f);d=ri(this.f,d);d instanceof Q&&Hk(this,d);d instanceof R&&Ik(this,d);d instanceof V&&Jk(this,d);d instanceof O&&Kk(this,d);Rh(this.f)}};
function Hk(d,e){var h=e.G;I(e.h.ga(),function(l){Lk(h,l)});Mk(h,e);d.f.qa(d.f.Z)}function Ik(d,e){var h=e.G;Lk(h,e);e=Nk(h);var l=h.cb;if(K(l.sb,h))I(e,function(m){Ok(l,m)});else K(l.rb,h)&&I(e,function(m){Pk(l,m)});Qk(l,h);d.f.qa(d.f.Z)}function Jk(d,e){Qk(e.cb,e);d.f.qa(d.f.Z)}function Kk(d,e){var h=e.cb;if(K(h.wc,e)){e=coord;Ga(h.wc,e);e.cb=undefined}else K(h.$d,e)&&Rk(h,coord);d.f.qa(d.f.Z)}Gk.prototype.de=function(){this.Gc=false};
Gk.prototype.queryCommandValue=function(d){var e=null;if(d=="erase")e=this.Gc;return e};function Sk(){U.call(this)}H(Sk,U);D("kemia.controller.plugins.ClearEditor",Sk,void 0);Sk.prototype.kc=Kh("clearEditor");Sk.prototype.Cb=function(d){return d=="clearEditor"};Sk.prototype.pd=function(){this.f.clear()};function Tk(){U.call(this)}H(Tk,U);D("kemia.controller.plugins.Zoom",Tk,void 0);var Uk={Sk:"zoomIn",Tk:"zoomOut"},Vk=gc(Uk);Tk.prototype.kc=Kh(Uk);Tk.prototype.Cb=function(d){return d in Vk};Tk.prototype.execCommand=function(d){var e=this.f.R.Uf;if(d=="zoomIn")mi(this.f,e*1.1);else d=="zoomOut"&&mi(this.f,e*0.9);this.f.qa(this.f.Z)};Tk.prototype.r=N("kemia.controller.plugins.Zoom");function Wk(){U.call(this)}H(Wk,U);D("kemia.controller.plugins.BondEdit",Wk,void 0);Wk.prototype.Cb=function(d){return d=="selectBond"};Wk.prototype.kc=Kh("selectBond");Wk.prototype.pd=function(d,e){this.db=e};var Xk=[{id:"1",key:"1",fa:pe,$:qe},{id:"2",key:"2",fa:2,$:qe},{id:"3",key:"3",fa:3,$:qe}];Wk.prototype.pf=function(){return Xk};
var Yk=[{caption:"Single",fa:pe,$:qe},{caption:"Double",fa:2,$:qe},{caption:"Triple",fa:3,$:qe},{caption:"Quadruple",fa:4,$:qe},{caption:"Single Up",fa:pe,$:11},{caption:"Single Down",fa:pe,$:13},{caption:"Single Up or Down",fa:pe,$:12}];Wk.prototype.r=N("kemia.controller.plugins.BondEdit");Wk.prototype.Dg=function(d){var e=Da(Xk,function(h){return h.id==d.identifier});if(e){this.db=e;return true}};
Wk.prototype.za=function(d){Ph(this.f);var e=ri(this.f,d);if(e instanceof Q){Zk(this,e);this.f.qa(this.f.Z);Rh(this.f);return true}if(e instanceof R)if(this.db){d=this.db.$!=qe&&e.$==this.db.$?new R(e.target,e.source,this.db.fa,this.db.$):new R(e.source,e.target,this.db.fa,this.db.$);var h=e.G;Lk(h,e);h.Wa(d);this.f.qa(this.f.Z);Rh(this.f);return true}else{if(e.nh)if(ua()-e.nh<1E3){if(e.$==qe){d=pe;if(e.fa==pe)d=2;else if(e.fa==2)d=3;d=new R(e.target,e.source,d,e.$);h=e.G;Lk(h,e);h.Wa(d)}this.f.qa(this.f.Z);
Rh(this.f);return true}else this.Jd(d,e);e.nh=ua();this.Jd(d,e)}if(e==undefined&&this.db){e=si(d);e=je(this.f.R.transform.Vb(),[e])[0];h=new Q("C",e.x,e.y);d=new V;d.Va(h);Zk(this,h);if(this.f.Z.length>0){h=this.f.Z[0];if(h.wc.length>0)h.wc[0].x>e.x?Ok(h,d):Pk(h,d);Ok(h,d)}this.f.qa(this.f.Z);Rh(this.f);return true}};
function Zk(d,e){if(d.db){var h=J(e.h.ga(),function(m){return Rd(new Qd(e.a,oe(m,e).a))}),l;if(h.length==0)l=0;if(h.length==1)l=h[0]>0?h[0]-Math.PI*2/3:h[0]+Math.PI*2/3;else if(h.length==2){l=Aa(h,function(m,n){return m+n},0);l=Math.PI+l/h.length}if(l!=undefined){h=new Q("C",e.a.x+Math.cos(l)*1.25,e.a.y+Math.sin(l)*1.25);d=new R(e,h,d.db.fa,d.db.$);l=e.G;l.Va(h);l.Wa(d)}}}
Wk.prototype.Jd=function(d,e){var h=new jh(this.f.Fb);h.bc=d.clientX;h.cc=d.clientY;h.wh=e;h.ca=this.f;h.addEventListener("drag",function(l){h.wh.G.Za.clear();new bg(l.clientX-h.bc,l.clientY-h.cc);var m=je(h.ca.R.transform.Vb(),[new O(l.clientX,l.clientY),new O(h.bc,h.cc)]);m=Fd(m[0],m[1]);e.source.a=Gd(e.source.a,m);e.target.a=Gd(e.target.a,m);h.ca.R.Sa.J(e.G,h.ca.R.transform);h.bc=l.clientX;h.cc=l.clientY});h.addEventListener("end",function(){h.ca.qa(h.ca.Z);h.da()});h.fd(d)};
Wk.prototype.de=function(){this.db=undefined};Wk.prototype.queryCommandValue=function(d){if(d=="selectBond")return this.db};function $k(){U.call(this)}H($k,U);D("kemia.controller.plugins.Highlight",$k,void 0);$k.prototype.kc=Kh("kemia.controller.plugins.Highlight");$k.prototype.r=N("kemia.controller.plugins.Highlight");
$k.prototype.Nj=function(d){var e=ri(this.f,d);d.currentTarget.Xc&&d.currentTarget.Xc.clear();d.currentTarget.Xc=e instanceof Q?d.currentTarget.Xc?this.f.R.Sa.Oc.hb(e,d.currentTarget.Xc):this.f.R.Sa.Oc.hb(e,void 0):e instanceof R?d.currentTarget.Xc?this.f.R.Sa.hg.m(e).hb(e,d.currentTarget.Xc):this.f.R.Sa.hg.m(e).hb(e,void 0):e instanceof O?d.currentTarget.Xc?this.f.R.fg.hb(e,d.currentTarget.Xc):this.f.R.fg.hb(e,void 0):undefined};function al(){U.call(this)}H(al,U);D("kemia.controller.plugins.AtomEdit",al,void 0);al.prototype.Cb=function(d){return d=="selectSymbol"};al.prototype.kc=Kh("selectSymbol");var bl=[{id:"C",key:"c"},{id:"N",key:"n"},{id:"S",key:"s"},{id:"P",key:"p"},{id:"O",key:"o"}];a=al.prototype;a.pf=function(){return bl};a.de=function(){this.A=undefined};a.pd=function(d,e){this.A=e};a.r=N("kemia.controller.plugins.AtomEdit");
a.Dg=function(d){var e=Da(bl,function(h){return h.id==d.identifier});if(e){this.r.info("handleKeyboardShortcut "+d.identifier);this.A=e.id;return true}};a.za=function(d){var e=ri(this.f,d);if(e instanceof Q)if(this.A&&this.A!=e.A){Ph(this.f);cl(this,d,e);this.f.qa(this.f.Z);Rh(this.f);return true}else{Ph(this.f);this.Jd(d,e);Rh(this.f)}};
a.ud=function(d){d=za(vi(this.f,d),function(e){return e instanceof Q&&e!==this.df},this);d=d.length>0?d[0]:undefined;if(this.df&&d instanceof Q){Ph(this.f);dl(this.df,d);this.df=undefined;this.f.qa(this.f.Z);Rh(this.f);return true}};
function dl(d,e){var h=d.G,l=e.G;I(e.h.ga(),function(m){var n=m.aa();e==n.source?(n.source=d):(n.target=d);l.Wa(n);Lk(l,m)});Mk(l,e);I(h.b,function(m){l.Va(m)});I(h.h,function(m){m=m.aa();m.G=undefined;l.Wa(m)});I(h.b,function(m){Mk(h,m)});I(h.h,function(m){Lk(h,m)});Qk(h.cb,h);delete h;return l}function cl(d,e,h){var l=new Q(d.A,h.a.x,h.a.y),m=h.G;I(h.h.ga(),function(n){var o=n.aa();o.G=undefined;h==o.source?(o.source=l):(o.target=l);m.Wa(o);Lk(m,n)});Mk(m,h);m.Va(l)}
al.prototype.Jd=function(d,e){this.df=e;var h=new jh(this.f.Fb);h.bc=d.clientX;h.cc=d.clientY;h.gg=e;h.ca=this.f;h.addEventListener("drag",function(l){h.gg.G.Za.clear();new bg(l.clientX-h.bc,l.clientY-h.cc);var m=je(h.ca.R.transform.Vb(),[new O(l.clientX,l.clientY),new O(h.bc,h.cc)]);e.a=Gd(e.a,Fd(m[0],m[1]));h.ca.R.Sa.J(h.gg.G,h.ca.R.transform);h.bc=l.clientX;h.cc=l.clientY});h.addEventListener("end",function(){h.ca.qa(h.ca.Z);h.da()});h.fd(d)};al.prototype.queryCommandValue=function(d){if(d=="selectSymbol")return this.A};function el(d){d=String(d);if(/^\s*$/.test(d)?false:/^[\],:{}\s\u2028\u2029]*$/.test(d.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+d+")")}catch(e){}throw Error("Invalid JSON string: "+d);}function fl(){}function gl(d,e){var h=[];hl(d,e,h);return h.join("")}
function hl(d,e,h){switch(typeof e){case "string":il(d,e,h);break;case "number":h.push(isFinite(e)&&!isNaN(e)?e:"null");break;case "boolean":h.push(e);break;case "undefined":h.push("null");break;case "object":if(e==null){h.push("null");break}if(ha(e)){var l=e.length;h.push("[");for(var m="",n=0;n<l;n++){h.push(m);hl(d,e[n],h);m=","}h.push("]");break}h.push("{");l="";for(m in e)if(e.hasOwnProperty(m)){n=e[m];if(typeof n!="function"){h.push(l);il(d,m,h);h.push(":");hl(d,n,h);l=","}}h.push("}");break;
case "function":break;default:throw Error("Unknown type: "+typeof e);}}var jl={'"':'\\"',"\\":"\\\\","/":"\\/","\u0008":"\\b","\u000c":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\u000b":"\\u000b"},kl=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;function il(d,e,h){h.push('"',e.replace(kl,function(l){if(l in jl)return jl[l];var m=l.charCodeAt(0),n="\\u";if(m<16)n+="000";else if(m<256)n+="00";else if(m<4096)n+="0";return jl[l]=n+m.toString(16)}),'"')};function ll(){U.call(this);this.ak=100;this.zd=[];this.Je=[];this.lg=null}H(ll,U);D("kemia.controller.plugins.UndoRedo",ll,void 0);var ml=[{id:"undo",key:27}];ll.prototype.pf=function(){return ml};ll.prototype.Dg=function(d){if(Da(ml,function(e){return e.id==d.identifier}).id=="undo"){nl(this);return true}};var ol=gc({Rk:"undo",Pk:"redo"});ll.prototype.kc=B("UndoRedo");ll.prototype.Cb=function(d){return d in ol};ll.prototype.pd=function(d){if(d=="undo")nl(this);else d=="redo"&&ql(this)};
ll.prototype.Dj=function(d){rl(this,d.target)};function rl(d,e){var h="[]";if(e.Z){h=J(e.Z,sl);h=gl(new fl,h)}e=d.lg;e!=h&&tl(d,e);d.lg=h}function tl(d,e){d.zd.push(e);if(d.zd.length>d.ak){d.zd.shift();var h=d.Je.length;d.Je.length=0;d.dispatchEvent({type:ul,hm:e});if(d.zd.length==1||h)d.dispatchEvent(vl)}}function nl(d){d.r.info("undo");wl(d,d.zd,d.Je)}function ql(d){wl(d,d.Je,d.zd)}
function wl(d,e,h){d.r.info("shiftState");d.r.info("    fromStack.length "+e.length);d.r.info("    toStack.length "+h.length);if(e.length){var l=e.pop();h.push(l);d.f.qa(J(eval("("+l+")"),xl));d.r.info("    fromStack.length "+e.length);d.r.info("    toStack.length "+h.length);if(e.length==0||h.length==1)d.dispatchEvent(vl)}}ll.prototype.gf=function(d){ll.g.gf.call(this,d);this.jf=new Hf(this);this.jf.v(d,qi,this.Dj);rl(this,d)};ll.prototype.og=function(d){d.$k();this.jf.da();this.lg=this.jf=null};
ll.prototype.k=function(){ll.g.k.call(this);this.jf.da();this.f=null};var vl="state_change",ul="state_added";ll.prototype.r=N("kemia.controller.plugins.UndoRedo");ll.prototype.queryCommandValue=function(d){var e=null;if(d=="undo")e=this.zd.length>0;else if(d=="redo")e=this.Je.length>0;return e};function yl(){this.jd={};U.call(this)}H(yl,U);D("kemia.controller.plugins.ArrowPlusEdit",yl,void 0);var zl=gc({Jk:"editArrow",Kk:"editPlus"});a=yl.prototype;a.Cb=function(d){return d in zl};a.kc=Kh("ArrowPlusEdit");a.pd=function(d,e,h){this.r.info(d+" active: "+h);this.jd[d]=h};a.r=N("kemia.controller.plugins.ArrowPlusEdit");a.Cj=function(d){if(this.jd.editArrow){Ph(this.f);Al(this,d);Rh(this.f)}};
a.za=function(d){if(this.jd.editArrow){Ph(this.f);var e=this.f.R.Sa.transform.Vb();e=P(e,[new O(d.offsetX,d.offsetY)]);d=this.f.Z[0];e=e[0];d.wc.push(e);e.cb=d;this.f.qa(this.f.Z);Rh(this.f)}else if(this.jd.editPlus){Ph(this.f);e=this.f.R.Sa.transform.Vb();e=P(e,[new O(d.offsetX,d.offsetY)]);Bl(this.f.Z[0],e[0]);this.f.qa(this.f.Z);Rh(this.f)}};
function Al(d,e){d.r.info("dragArrow");d=e.a;var h=new jh(e.Za);h.bc=e.clientX;h.cc=e.clientY;h.Uk=e.clientX;h.Vk=e.clientY;h.a=d;h.Za=e.Za;h.addEventListener("drag",function(l){var m=h.Za.transform;dg(h.Za,l.clientX-h.bc+m.Fa,l.clientY-h.cc+m.Ha,0,0,0);h.bc=l.clientX;h.cc=l.clientY});h.addEventListener("end",function(){h.da()});h.fd(e)}yl.prototype.de=function(){this.jd.editArrow=false;this.jd.editPlus=false};yl.prototype.queryCommandValue=function(d){var e=null;if(this.Cb(d))e=this.jd[d];return e};function Cl(d,e){this.b=d;this.h=e;ee(this);this.Ma=new Array(3)}Cl.prototype.Ib=function(d,e){this.Ma[d]=e};function ee(d){for(var e=0,h=0,l=0,m=d.b.length;l<m;l++){e+=d.b[l].a.x;h+=d.b[l].a.y}d.fe=new O(e/d.b.length,h/d.b.length)};function Dl(d){this.b=d}function El(d){var e=d.b.length-1;return d.b.length>2&&d.b[0]==d.b[e]}
Dl.prototype.splice=function(d){var e;var h=d.b;e=this.b.length-1;var l=h.length-1;if(this.b[e]==h[0]||this.b[e]==h[l])e=this.b[e];else if(this.b[0]==h[0]||this.b[0]==h[l])e=this.b[0];else throw"Couldn't splice - no intersection";h=[];l=0;for(var m=this.b.length;l<m;l++)h.push(this.b[l]);this.b[0]==e&&h.reverse();if(d.b[0]==e){l=1;for(m=d.b.length;l<m;l++)h.push(d.b[l])}else for(l=d.b.length-2;l>=0;l--)h.push(d.b[l]);a:{d=1;for(e=h.length-1;d<e;d++)for(l=1;l<e;l++)if(d!=l)if(h[d]==h[l]){d=false;break a}d=
true}if(!d)return null;return new Dl(h)};function Fl(d){this.Bc=[];this.b=[];for(var e=0,h=d.fb();e<h;e++){bond=d.h[e];this.Bc.push(new Dl([bond.source,bond.target]))}e=0;for(h=d.b.length;e<h;e++)this.b.push(d.q(e))}
Fl.prototype.remove=function(d,e){for(var h=[],l=0,m=this.Bc.length;l<m;l++){var n=this.Bc[l];if(El(n))K(n.b,d)&&h.push(n);else{var o=n.b.length-1;if(n.b[0]==d||n.b[o]==d)h.push(n)}}l=[];n=0;for(o=h.length;n<o;n++)El(h[n])&&l.push(h[n]);n=0;for(o=l.length;n<o;n++){K(h,l[n])&&Ga(h,l[n]);K(this.Bc,l[n])&&Ga(this.Bc,l[n])}m=[];n=0;for(o=h.length;n<o;n++)for(var q=n+1;q<o;q++){var s=h[q].splice(h[n]);s!=null&&m.push(s)}n=0;for(o=h.length;n<o;n++)K(this.Bc,h[n])&&Ga(this.Bc,h[n]);n=0;for(o=m.length;n<
o;n++)!K(this.Bc,m[n])&&m[n].b.length<=e+1&&this.Bc.push(m[n]);Ga(this.b,d);return l};function Gl(d){for(var e=[],h=0,l=d.length;h<l;h++){var m=d[h];m instanceof Array?e.push(Gl(m)):e.push(m)}return e}function Hl(d,e,h){if(d.length)d.push(e[0].concat(h[0]));else d[0]=e[0].concat(h[0])}function Il(d,e){return d.Cnum-e.Cnum}
function Jl(d,e,h,l){for(var m=0,n=e.length;m<n;m++){var o=e[m];if(d.length>=o.length){for(var q=true,s=0,t=o.length;s<t;s++)K(d,o[s])||(q=false);if(q)return true}s=0;for(t=d.length;s<t;s++)K(o,d[s])&&l[s]++}e=false;s=0;for(t=d.length;s<t;s++)if(l[d[s]]<h[d[s]]-1)e=true;if(e){s=0;for(t=d.length;s<t;s++)l[d[s]]++;return false}return true}function Kl(d,e){for(var h=[],l=0,m=d.length;l<m;l++){var n=e.h[d[l]],o=e.Aa(n.source);n=e.Aa(n.target);K(h,o)||h.push(o);K(h,n)||h.push(n)}return h}
function Ll(d,e){for(var h=[d[0]],l=e.q(d[0]),m=0;d.length!=h.length;){m++;if(m>1E3)break;for(var n=1,o=d.length;n<o;n++){var q=e.q(h[h.length-1]),s=e.q(d[n]);if(!K(h,d[n]))if(e.yb(q,s))h.push(d[n]);else e.yb(l,s)&&Ea(h,d[n],0)}}return h}
function Ml(d){var e=d.fb()-d.b.length+1;if(!e)return[];var h;h=d.b.length;for(var l=[],m=0;m<h;m++){for(var n=[],o=0;o<h;o++)if(m==o)n.push(0);else d.yb(d.q(m),d.q(o))?n.push(1):n.push(99999999);l.push(n)}m=[];for(n=0;n<h;n++){o=[];for(var q=0;q<h;q++){var s=d.yb(d.q(n),d.q(q));s?o.push([[ya(d.h,s)]]):o.push([])}m.push(o)}n=[];for(o=0;o<h;o++){q=[];for(s=0;s<h;s++)q.push([]);n.push(q)}for(o=0;o<h;o++)for(q=0;q<h;q++)for(s=0;s<h;s++){var t=l[q][s],u=l[q][o]+l[o][s],v=m[q][o],A=m[o][s];if(u!=1E8)if(t>
u){n[q][s]=t==u+1?Gl(m[q][s]):[];l[q][s]=u;m[q][s]=[v[0].concat(A[0])]}else if(t==u)v.length&&A.length&&Hl(m[q][s],v,A);else if(t==u-1)Hl(n[q][s],v,A);else l[q][s]=l[q][s]}h={D:l,Pe1:m,Pe2:n};l=h.D;m=h.Pe1;n=h.Pe2;o=l.length;h=[];for(q=0;q<o;q++)for(s=0;s<o;s++)l[q][s]==0||m[q][s].length==1&&n[q][s].length==0||h.push({Cnum:n[q][s].length?2*(l[q][s]+0.5):2*l[q][s],Pe1:m[q][s],Pe2:n[q][s]});h.sort(Il);a:{l=[];m=[];n=0;for(o=d.b.length;n<o;n++)m.push(d.q(n).fb());q=[];for(n=0;n<d.b.length;n++)q[n]=0;
n=0;for(o=h.length;n<o;n++){s=h[n];if(s.Cnum%2){t=0;for(u=s.Pe2.length;t<u;t++){v=v=s.Pe1[0].concat(s.Pe2[t]);A=Kl(v,d);if(v.length===A.length)Jl(A,l,m,q)||l.push(A);if(l.length==e){e=l;break a}}}else{t=0;for(u=s.Pe1.length-1;t<u;t++){v=v=s.Pe1[t].concat(s.Pe1[t+1]);A=Kl(v,d);if(v.length===A.length)Jl(A,l,m,q)||l.push(A);if(l.length==e){e=l;break a}}}}e=l}h=0;for(l=e.length;h<l;h++)e[h]=Ll(e[h],d);return e}D("kemia.ring.SSSR.findRings",Ml,void 0);function Nl(d,e){for(var h=[],l=0,m=d.length;l<m;l++)h.push(e.q(d[l]));d=[];l=0;for(m=h.length-1;l<m;l++){var n=e.yb(h[l],h[l+1]);n!=null&&d.push(n)}n=e.yb(h[0],h[h.length-1]);n!=null&&d.push(n);return new Cl(h,d)}
function Ol(d){if(!(d.fb()-d.b.length+d.Ld))return[];for(var e=0,h=d.b.length;e<h;e++)d.b[e].index=e;e=0;for(h=d.h.length;e<h;e++)d.h[e].index=e;if(h=d.b.length){e=Qa(false,h);h=Qa(false,h);var l=[],m=d.b[0];m.yc=0;l.push(m);for(e[0]=true;;){if(!l.length)break;m=l[0];Ha(l,0);for(var n=m.h.ga(),o=0,q=n.length;o<q;o++){var s=n[o],t=s.index;if(!h[t]){h[t]=true;var u=oe(s,m);s=u.index;if(e[s]){s=[];if(m.yc==u.yc){s.push(m);s.push(u)}else{u.ye=true;var v=u.Qd();t=0;for(var A=v.length;t<A;t++){var E=v[t];
E.yc==u.yc-1&&s.push(E)}}for(u=m.yc;;){s[0].ye=true;s[1].ye=true;u--;v=s[0].Qd();t=0;for(A=v.length;t<A;t++)if(v[t].yc==u){s[0]=v[t];break}v=s[1].Qd();t=0;for(A=v.length;t<A;t++)if(v[t].yc==u){s[1]=v[t];break}if(s[0]==s[1]){s[0].ye=true;break}}}else{u.yc=m.yc+1;e[s]=true;l.push(u)}}}}}e=[];m=d.b.length;h=Qa(false,m);l=Qa(false,m);m=Qa(-1,m);n=0;for(o=d.b.length;n<o;n++){s=d.b[n];if(!h[s.index])if(s.ye){q=new V;A=[];A.push(s);h[0]=true;E=new Q;E.wf=s.index;m[s.index]=0;for(q.Va(E);;){if(!A.length)break;
u=A[0];Ha(A,0);v=u.h.ga();s=0;for(t=v.length;s<t;s++){var S=v[s];E=S.index;if(!l[E]){l[E]=true;S=oe(S,u);E=S.index;if(S.ye){if(h[E]){E=d.yb(u,S);var la=new R(q.b[m[u.index]],q.b[m[S.index]]);la.wf=E.index}else{h[E]=true;A.push(S);E=new Q;E.wf=S.index;m[S.index]=q.b.length;q.Va(E);S=d.yb(u,S);la=new R(q.b[m[u.index]],E);la.wf=S.index}q.Wa(la)}}}}s=0;for(t=q.b.length;s<t;s++)q.b[s].index=s;s=0;for(t=q.h.length;s<t;s++)q.h[s].index=s;s=q.h.length-q.b.length+1;t=[];A=new Fl(q);u=0;for(v=q.b.length;u<
v;u++){E=A.remove(q.q(u),6);for(S=0;S<E.length;S++){la=E[S].b;Ha(la,la.length-1);for(var vb=0,ma=la.length;vb<ma;vb++)la[vb]=la[vb];t.push(la)}}xa.sort.call(t,Pa);if(t.length>=s){a:{A=[];u=[];v=0;for(E=q.b.length;v<E;v++)u.push(q.q(v).fb());S=Qa(0,q.b.length);v=0;for(E=t.length;v<E;v++){la=t[v];if(!Jl(la,A,u,S)){A.push(la);if(A.length==s){A=A;break a}}}A=A}if(A.length<s)A=Ml(q)}else A=Ml(q);s=0;for(t=A.length;s<t;s++){u=A[s];v=0;for(E=u.length;v<E;v++)u[v]=q.b[u[v]].wf}s=0;for(q=A.length;s<q;s++)e.push(Nl(A[s],
d))}}return e}D("kemia.ring.RingFinder.findRings",Ol,void 0);function V(d){this.h=[];this.b=[];this.name=d?d:"";this.Yf=[];this.gi=true;this.lb=[];this.Ld=0}D("kemia.model.Molecule",V,void 0);V.prototype.Wa=function(d){var e=this.Aa(d.source),h=this.Aa(d.target);if(this.lb[e]!=this.lb[h]){var l;if(this.lb[e]<this.lb[h]){e=this.lb[e];l=this.lb[h]}else{l=this.lb[e];e=this.lb[h]}this.Ld--;h=0;for(var m=this.b.length;h<m;h++)if(this.lb[h]==e)this.lb[h]=l}this.h.push(d);d.source.h.add(d);d.target.h.add(d);d.G=this};
D("kemia.model.Molecule.prototype.addBond",V.prototype.Wa,void 0);V.prototype.q=function(d){return this.b[d]};D("kemia.model.Molecule.prototype.getAtom",V.prototype.q,void 0);V.prototype.yb=function(d,e){for(var h=d.h.ga(),l=0,m=h.length;l<m;l++){var n=h[l];if(oe(n,d)==e)return n}return null};V.prototype.Aa=function(d){return ya(this.b,d)};
function Mk(d,e){var h;if(e.constructor==Number)h=d.b[e];else if(e.constructor==Q)h=e;e=h.h.ga();var l=d.h;I(e,function(m){Ga(l,m)});h.h.clear();Ga(d.b,h);h.G=undefined}function Lk(d,e){e=e.constructor==Number?d.h[e]:e;e.source.h.remove(e);e.target.h.remove(e);if(e.source.h.ga().length==0){Ga(d.b,e.source);e.source.G=undefined}if(e.target.h.ga().length==0){Ga(d.b,e.target);e.target.G=undefined}Ga(d.h,e);e.G=undefined;e.source=undefined;e.target=undefined}V.prototype.Fh=function(){return this.b.length};
D("kemia.model.Molecule.prototype.countAtoms",V.prototype.Fh,void 0);V.prototype.fb=function(){return this.h.length};D("kemia.model.Molecule.prototype.countBonds",V.prototype.fb,void 0);V.prototype.Va=function(d){var e=this.b.length;this.Ld++;this.lb[e]=this.Ld;this.b.push(d);d.G=this};D("kemia.model.Molecule.prototype.addAtom",V.prototype.Va,void 0);function fe(d){if(d.gi){d.gi=false;d.Yf=Ol(d)}return d.Yf}
V.prototype.aa=function(){var d=new V(this.name);I(this.b,function(e){d.Va(e)});I(this.h,function(e){d.Wa(e)});return d};function Nk(d){var e=d.aa();if(e.Ld==1)return[e];var h=new Ec;I(e.b,function(l){var m=e.lb[e.Aa(l)];Gc(h.ma,m)==false&&h.Da(m,new V);h.m(m).Va(l)});I(e.h,function(l){var m=e.lb[e.Aa(l.source)];h.m(m).Wa(l)});return h.ga()}V.prototype.toString=function(){return J(this.b,function(d){return d.A+d.index+d.a.toString()}).toString()};
function Pl(d){d=Ql(d);return new O((d.left+d.right)/2,(d.top+d.bottom)/2)}function Ql(d){return Id.apply(null,J(d.b,function(e){return e.a}))};function Rl(){U.call(this)}H(Rl,U);D("kemia.controller.plugins.MoleculeEdit",Rl,void 0);Rl.prototype.r=N("kemia.controller.plugins.MoleculeEdit");Rl.prototype.Cb=function(d){return d=="selectMoleculeTemplate"};Rl.prototype.kc=Kh("selectMoleculeTemplate");
Rl.prototype.pd=function(d,e,h,l){this.hh=e;d=Sl(this.hh);e=je(this.f.R.Sa.transform.Vb(),[new O(0,0)])[0];h=Ql(d);e=Fd(e,new O(h.right,h.top));h=this.f.Z.length>0?this.f.Z[0]:new ni;Ok(h,d);Tl(h,d,e);this.f.qa([h]);h=ti(this.f,Pl(d));e=ui(this.f.Fb,document.body.scrollLeft+document.documentElement.scrollLeft,document.body.scrollTop+document.documentElement.scrollTop);l.clientX=h.x-e.x;l.clientY=h.y-e.y;Ul(this,l,d)};
function Ul(d,e,h){var l=new jh(d.f.Fb);l.vc=new O(e.clientX,e.clientY);l.oh=l.vc;l.G=h;l.ca=d.f;l.addEventListener("drag",function(m){l.uc&&I(l.uc,function(o){o.clear()});l.uc=[];m=new O(m.clientX,m.clientY);var n=Fd(m,l.vc);dg(l.G.Za,n.x,n.y,0,0,0);n=je(l.ca.R.transform.Vb(),[m,l.oh]);n=Fd(n[0],n[1]);Tl(l.G.cb,l.G,n);l.oh=m;m=Vl(this,h);if(m.length>0)m=[m[0]];I(m,function(o){l.uc.push(l.ca.R.Sa.Oc.hb(o[0]));l.uc.push(l.ca.R.Sa.Oc.hb(o[1]))})},undefined,d);l.addEventListener("end",function(){var m=
Vl(this,l.G);if(m.length>0)m=[m[0]];I(m,function(n){dl(n[0],n[1])},this);l.ca.qa(l.ca.Z);l.da()},undefined,d);l.fd(e)}Rl.prototype.r=N("kemia.controller.plugins.MoleculeEdit");Rl.prototype.za=function(d){Ph(this.f);var e=ri(this.f,d);if(e instanceof V)d.shiftKey?this.rotate(d,e):this.Jd(d,e);Rh(this.f)};
Rl.prototype.Jd=function(d,e){var h=new jh(this.f.Fb);h.ac=ti(this.f,Pl(e));h.Mc=null;h.Nc=null;h.ph=0;h.qh=0;h.G=e;h.ca=this.f;h.addEventListener("drag",function(){h.uc&&I(h.uc,function(q){q.clear()});h.uc=[];h.Mc=h.Mc||h.Wb;h.Nc=h.Nc||h.Xb;var l=h.Wb-h.Mc,m=h.Xb-h.Nc,n=l-h.ph,o=m-h.qh;dg(h.G.Za,l,m,0,0,0);Tl(h.G.cb,h.G,new O(n/h.ca.R.transform.ba,o/h.ca.R.transform.ka));h.ph=h.Wb-h.Mc;h.qh=h.Xb-h.Nc;l=Vl(this,e);if(l.length>0)l=[l[0]];I(l,function(q){h.uc.push(h.ca.R.Sa.Oc.hb(q[0]));h.uc.push(h.ca.R.Sa.Oc.hb(q[1]))})},
undefined,this);h.addEventListener("end",function(){var l=Vl(this,h.G);if(l.length>0)l=[l[0]];I(l,function(m){dl(m[0],m[1])},this);h.ca.qa(h.ca.Z);h.da()},undefined,this);h.fd(d)};function Vl(d,e){return za(J(e.b,function(h){var l=Vh(this.f.Mf,{x:h.a.x,y:h.a.y},this);l=za(l,function(m){if(m instanceof Q)if(!K(e.b,m))return true;return false});return l.length>0?[h,l[0]]:false},d),function(h){return h!=false},d)}
Rl.prototype.rotate=function(d,e){var h=new jh(this.f.Fb);h.ac=je(this.f.R.transform,[Pl(e)])[0];h.vc=si(d);h.rh=Nd(h.ac.x,h.ac.y,h.vc.x,h.vc.y);h.Mc=null;h.Nc=null;h.Za=e.Za;h.G=e;h.ca=this.f;h.addEventListener("drag",function(){h.Mc=h.Mc||h.Wb;h.Nc=h.Nc||h.Xb;var l=Nd(h.ac.x,h.ac.y,h.vc.x+(h.Wb-h.Mc),h.vc.y+(h.Xb-h.Nc));h.Za.Ye?h.Za.Ye.aa():new $f;dg(h.Za,0,0,l-h.rh,h.ac.x,h.ac.y)});h.addEventListener("end",function(){var l=je(h.ca.R.transform.Vb(),[h.ac])[0];Wl(h.G.cb,h.G,-(Nd(h.ac.x,h.ac.y,h.vc.x+
h.Wb,h.vc.y+h.Xb)-h.rh),l);h.ca.qa(h.ca.Z);h.da()});h.fd(d)};Rl.prototype.de=function(){this.hh=undefined};Rl.prototype.queryCommandValue=function(d){if(d=="selectMoleculeTemplate")return this.hh};
var Xl=[{name:"benzene",atoms:[{symbol:"C",coord:{x:2.5981,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:2.5981,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:1.3,y:3,z:0},charge:0},{symbol:"C",coord:{x:0,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:0,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:1.3,y:0,z:0},charge:0}],bondindex:[{source:0,target:1,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:3,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:3,
target:4,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:4,target:5,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:5,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"}]},{name:"cyclohexane",atoms:[{symbol:"C",coord:{x:2.5981,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:2.5981,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:1.3,y:3,z:0},charge:0},{symbol:"C",coord:{x:0,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:0,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:1.3,y:0,z:0},charge:0}],bondindex:[{source:0,target:1,
type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:3,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:3,target:4,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:4,target:5,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:5,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"}]},{name:"cyclopentane",atoms:[{symbol:"C",coord:{x:-2.3083,y:0.4635,z:0},charge:0},{symbol:"C",coord:{x:-2.3083,y:1.9635,z:0},charge:0},{symbol:"C",coord:{x:-0.8817,y:2.427,
z:0},charge:0},{symbol:"C",coord:{x:0,y:1.2135,z:0},charge:0},{symbol:"C",coord:{x:-0.8817,y:0,z:0},charge:0}],bondindex:[{source:0,target:1,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:3,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:3,target:4,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:4,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"}]},{name:"cyclopentane",atoms:[{symbol:"C",coord:{x:2.5981,y:0.75,z:0},charge:0},{symbol:"C",
coord:{x:2.5981,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:0,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:0,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:1.3,y:0,z:0},charge:0}],bondindex:[{source:0,target:1,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:3,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:3,target:4,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:4,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"}]},{name:"pyrrole",atoms:[{symbol:"C",
coord:{x:2.5981,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:2.5981,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:0,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:0,y:0.75,z:0},charge:0},{symbol:"N",coord:{x:1.3,y:0,z:0},charge:0}],bondindex:[{source:0,target:1,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:3,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:3,target:4,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:4,target:0,type:"SINGLE_BOND",
stereo:"NOT_STEREO"}]},{name:"pyrrole",atoms:[{symbol:"C",coord:{x:-2.3083,y:0.4635,z:0},charge:0},{symbol:"C",coord:{x:-2.3083,y:1.9635,z:0},charge:0},{symbol:"C",coord:{x:-0.8817,y:2.427,z:0},charge:0},{symbol:"C",coord:{x:0,y:1.2135,z:0},charge:0},{symbol:"N",coord:{x:-0.8817,y:0,z:0},charge:0}],bondindex:[{source:0,target:1,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:3,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:3,target:4,
type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:4,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"}]},{name:"naphthalene",atoms:[{symbol:"C",coord:{x:2.5981,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:2.5981,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:1.2991,y:3,z:0},charge:0},{symbol:"C",coord:{x:0,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:0,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:1.2991,y:0,z:0},charge:0},{symbol:"C",coord:{x:3.8971,y:3,z:0},charge:0},{symbol:"C",coord:{x:5.1962,y:2.25,z:0},charge:0},
{symbol:"C",coord:{x:5.1962,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:3.8971,y:0,z:0},charge:0}],bondindex:[{source:0,target:1,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:3,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:3,target:4,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:4,target:5,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:5,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:1,target:6,type:"SINGLE_BOND",
stereo:"NOT_STEREO"},{source:6,target:7,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:7,target:8,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:8,target:9,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:9,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"}]}];function Yl(d,e){if(arguments.length>0){this.x=d;this.y=e}}a=Yl.prototype;a.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};a.add=function(d){return new Yl(this.x+d.x,this.y+d.y)};a.toString=function(){return this.x+","+this.y};a.scale=function(d){this.x*=d;this.y*=d};a.normalize=function(){norm=1/Math.sqrt(this.x*this.x+this.y*this.y);this.x*=norm;this.y*=norm};a.sub=function(d){this.x-=d.x;this.y-=d.y};a.ii=function(d){this.x=-d.x;this.y=-d.y};
a.ii=function(){this.x=-this.x;this.y=-this.y};a.oe=function(d){vDot=(this.x*d.x+this.y*d.y)/(this.length()*d.length());if(vDot<-1)vDot=-1;if(vDot>1)vDot=1;return Math.acos(vDot)};function Zl(d){var e,h;e=d.b.length;var l=new Array(e);for(i=0;i<e;++i){l[i]=new Array(e);for(j=0;j<e;j++)l[i][j]=0}for(var m=d.fb(),n=0;n<m;n++){bond=d.h[n];e=d.Aa(bond.source);h=d.Aa(bond.target);l[e][h]=1;l[h][e]=1}return l};var $l;function am(d,e,h,l,m){this.hc=d;this.qb=e;this.cg=h;this.Zi=l;this.Gb=m}am.prototype.getName=w("qb");
function bm(d){var e=[d.hc?cm(d.hc)+".":"",d.qb?cm($l?$l(d.qb):d.qb):"anonymous",cm(d.Zi),d.cg?" [as "+cm($l?$l(d.cg):d.cg)+"]":""];if(d.Gb){e.push(" at ");if(Boolean(C.CLOSURE_INSPECTOR___&&C.CLOSURE_INSPECTOR___.supportsJSUnit)){var h=d.Gb.match(/\d+$/)[0];e.push('<a href="" onclick="CLOSURE_INSPECTOR___.showLine(\'',cm(d.Gb),"', '",h,"'); return false\">",cm(d.Gb),"</a>")}else e.push(cm(d.Gb))}return e.join("")}
var dm=new RegExp("^    at(?: (?:(.*?)\\.)?((?:new )?(?:[a-zA-Z_$][\\w$]*|<anonymous>))(?: \\[as ([a-zA-Z_$][\\w$]*)\\])?)? (?:\\(unknown source\\)|\\(native\\)|\\((?:eval at )?((?:http|https|file)://[^\\s)]+|javascript:.*)\\)|((?:http|https|file)://[^\\s)]+|javascript:.*))$"),em=/^([a-zA-Z_$][\w$]*)?(\(.*\))?@(?::0|((?:http|https|file):\/\/[^\s)]+|javascript:.*))$/,fm=/^function ([a-zA-Z_$][\w$]*)/;
function gm(){for(var d=[],e=arguments.callee.caller,h=0;e&&h<20;){var l=Function.prototype.toString.call(e).match(fm);l=l?l[1]:"";var m=["("];if(e.arguments)for(var n=0;n<e.arguments.length;n++){var o=e.arguments[n];n>0&&m.push(", ");F(o)?m.push('"',o,'"'):m.push(String(o))}else m.push("unknown");m.push(")");d.push(new am("",l,"",m.join(""),""));try{e=e.caller}catch(q){break}h++}return d}
function hm(d){var e=d.match(dm);if(e)return new am(e[1]||"",e[2]||"",e[3]||"","",e[4]||e[5]||"");if(e=d.match(em))return new am("",e[1]||"","",e[2]||"",e[3]||"");return null}function cm(d){return d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}
function im(d){for(var e=d.length-1;d[e]&&(!d[e].qb||d[e].hc=="[object Object]");)e--;for(var h=-1,l=0;l<d.length;l++)if(d[l]&&d[l].getName()=="_assert"){h=l;break}var m=[];for(l=h+1;l<=e;l++){m.push("> ");d[l]?m.push(bm(d[l])):m.push("(unknown)");m.push("\n")}return m.join("")}function jm(d){d=d.replace(/\s*$/,"").split("\n");for(var e=[],h=0;h<d.length;h++)e.push(hm(d[h]));return e}function km(d){d=jm(d);return im(d)}D("setDeobfuscateFunctionName",function(d){$l=d},void 0);function lm(d,e){return d==e}function mm(d,e){return d.toString()===e.toString()}var nm={String:lm,Number:lm,Boolean:lm,Date:function(d,e){return d===e},RegExp:mm,Function:mm};
function om(d){var e=typeof d;try{switch(e){case "string":break;case "boolean":break;case "number":break;case "object":case "function":switch(d.constructor){case (new String("")).constructor:e="String";break;case (new Boolean(true)).constructor:e="Boolean";break;case (new Number(0)).constructor:e="Number";break;case [].constructor:e="Array";break;case (new RegExp).constructor:e="RegExp";break;case (new Date).constructor:e="Date";break;case Function:e="Function";break;default:var h=d.constructor.toString().match(/function\s*([^( ]+)\(/);
if(h)e=h[1];else break}break}}finally{return e=e.substr(0,1).toUpperCase()+e.substr(1)}}function pm(d){var e="<"+d+">";d===null||d===void 0||(e+=" ("+om(d)+")");return e}function qm(d){rm("Call to fail()",d)}function X(d,e){if(e.length==d+1)return e[0];return null}function Y(d,e,h){return h.length==e+1?h[d]:h[d-1]}function Z(d,e){$(null,e.length==d||e.length==d+1&&F(e[0]),"Incorrect arguments passed to assert function")}function $(d,e,h){e||rm(d,h)}
function sm(){Z(1,arguments);var d=X(1,arguments),e=Y(1,1,arguments);$(d,typeof e=="boolean","Bad argument to assert(boolean)");$(d,e,"Call to assert(boolean) with false")}function tm(){Z(1,arguments);var d=Y(1,1,arguments),e=X(1,arguments);$(e,typeof d=="function","Argument passed to assertThrows is not a function");try{d()}catch(h){return h}rm(e,"No exception thrown from function passed to assertThrows")}
function um(){Z(1,arguments);var d=Y(1,1,arguments);$(X(1,arguments),typeof d=="function","Argument passed to assertNotThrows is not a function");var e=true;try{d()}catch(h){e=false}$(X(1,arguments),e,"A non expected exception was thrown from function passed to assertNotThrows")}function vm(){Z(1,arguments);var d=X(1,arguments),e=Y(1,1,arguments);$(d,typeof e=="boolean","Bad argument to assertTrue(boolean)");$(d,e,"Call to assertTrue(boolean) with false")}
function wm(){Z(1,arguments);var d=X(1,arguments),e=Y(1,1,arguments);$(d,typeof e=="boolean","Bad argument to assertFalse(boolean)");$(d,!e,"Call to assertFalse(boolean) with true")}function xm(){Z(2,arguments);var d=Y(1,2,arguments),e=Y(2,2,arguments);$(X(2,arguments),d===e,"Expected "+pm(d)+" but was "+pm(e))}function ym(){Z(2,arguments);var d=Y(1,2,arguments),e=Y(2,2,arguments);$(X(2,arguments),d!==e,"Expected not to be "+pm(e))}
function zm(){Z(1,arguments);var d=Y(1,1,arguments);$(X(1,arguments),d===null,"Expected "+pm(null)+" but was "+pm(d))}function Am(){Z(1,arguments);var d=Y(1,1,arguments);$(X(1,arguments),d!==null,"Expected not to be "+pm(null))}function Bm(){Z(1,arguments);var d=Y(1,1,arguments);$(X(1,arguments),d===void 0,"Expected "+pm(void 0)+" but was "+pm(d))}function Cm(){Z(1,arguments);var d=Y(1,1,arguments);$(X(1,arguments),d!==void 0,"Expected not to be "+pm(void 0))}
function Dm(){Z(1,arguments);Am.apply(null,arguments);Cm.apply(null,arguments)}function Em(){Z(1,arguments);var d=Y(1,1,arguments);$(X(1,arguments),d!==void 0&&d!==null&&typeof d=="string"&&d!=="","Expected non-empty string but was "+pm(d))}function Fm(){Z(1,arguments);var d=Y(1,1,arguments);$(X(1,arguments),isNaN(d),"Expected NaN")}function Gm(){Z(1,arguments);var d=Y(1,1,arguments);$(X(1,arguments),!isNaN(d),"Expected not NaN")}
function Hm(){function d(n,o,q){if(n===o)return true;var s=om(n),t=om(o);if(s==t){var u=s=="Array",v=nm[s];if(v)v(n,o)||m.push(q+" expected "+pm(n)+" but was "+pm(o));else if(!u||n.length===o.length){v=q+(u?"[%s]":q?".%s":"%s");if(n.__iterator__)if(ka(n.Kd))n.Kd(o)||m.push("equals() returned false for "+(q||s));else n.ma?d(n.ma,o.ma,v.replace("%s","map_")):m.push("unable to check "+(q||s)+" for equality: it has an iterator we do not know how to handle. please add an equals method");else{for(var A in n)u||
A in o?d(n[A],o[A],v.replace("%s",A)):m.push("property "+A+" not present in actual "+(q||t));if(!u)for(A in o)A in n||m.push("property "+A+" not present in expected "+(q||s))}}else m.push(q+" expected "+n.length+"-element array but got a "+o.length+"-element array")}else m.push(q+" expected "+pm(n)+" but was "+pm(o))}Z(2,arguments);var e=Y(1,2,arguments),h=Y(2,2,arguments),l=X(2,arguments)?X(2,arguments):"",m=[""];d(e,h,"");$(l,m.length==1,"Expected "+pm(e)+" but was "+pm(h)+m.join("\n   "))}
function Im(){Z(2,arguments);var d=Y(1,2,arguments),e=Y(2,2,arguments),h=X(2,arguments)?X(2,arguments):"";d=om(d);$(h,d=="Array","Expected an array for assertArrayEquals but found a "+d);e=om(e);$(h,e=="Array","Expected an array for assertArrayEquals but found a "+e);Hm.apply(null,arguments)}
function Jm(){Z(2,arguments);var d=Y(1,2,arguments),e=Y(2,2,arguments),h=X(2,arguments);vm("Bad arguments to assertSameElements(opt_message, expected: ArrayLike, actual: ArrayLike)",ia(d)&&ia(e));d=Km(d);e=Km(e);$(h,d.length==e.length,"Expected "+d.length+" elements: ["+d+"], got "+e.length+" elements: ["+e+"]");for(var l=Km(d),m=0;m<e.length;m++){var n=Lm(l,e[m]);$(h,n!=-1,"Expected ["+d+"], got ["+e+"]");l.splice(n,1)}}
function Mm(){Z(1,arguments);Y(1,1,arguments)||$(X(1,arguments),false,"Expected to evaluate to true")}function Nm(){Z(1,arguments);Y(1,1,arguments)&&$(X(1,arguments),false,"Expected to evaluate to false")}function Om(){Z(2,arguments);var d=Y(1,2,arguments),e=Y(2,2,arguments);d=Pm(d);e=Pm(e);$(X(2,arguments),d===e,"Expected "+pm(d)+" but was "+pm(e))}
function Qm(){Z(2,arguments);var d=Y(1,2,arguments),e=Y(2,2,arguments),h=X(2,arguments);for(var l in d){$(h,l in e,"Expected hash had key "+l+" that was not found");$(h,d[l]==e[l],"Value for key "+l+" mismatch - expected = "+d[l]+", actual = "+e[l])}for(l in e)$(h,l in d,"Actual hash had key "+l+" that was not expected")}
function Rm(){Z(3,arguments);var d=Y(1,3,arguments),e=Y(2,3,arguments),h=Y(3,3,arguments);$(X(3,arguments),Math.abs(d-e)<=h,"Expected "+d+", but got "+e+" which was more than "+h+" away")}function Sm(){Z(2,arguments);var d=Y(1,2,arguments),e=Y(2,2,arguments);$(X(2,arguments),Lm(e,d)!=-1,"Expected '"+e+"' to contain '"+d+"'")}function Tm(){Z(2,arguments);var d=Y(1,2,arguments),e=Y(2,2,arguments);$(X(2,arguments),Lm(e,d)==-1,"Expected '"+e+"' not to contain '"+d+"'")}
function Km(d){for(var e=[],h=0;h<d.length;h++)e[h]=d[h];return e}function Lm(d,e){if(d.indexOf)return d.indexOf(e);else{for(var h=0;h<d.length;h++)if(d[h]===e)return h;return-1}}function Pm(d){var e=document.createElement("DIV");e.innerHTML=d;return e.innerHTML.replace(/^\s+|\s+$/g,"")}function rm(d,e){C.CLOSURE_INSPECTOR___&&C.CLOSURE_INSPECTOR___.supportsJSUnit&&C.CLOSURE_INSPECTOR___.jsUnitFailure(d,e);throw new Um(d,e);}
function Um(d,e){this.Ol=true;this.message=(d?d:"")+(d&&e?"\n":"")+(e?e:"");var h=(new Error).stack;h=h?jm(h):gm();this.gm=im(h);this.bl=d||null;this.Ql=e||""}Um.prototype.toString=B("[JsUnitException]");D("fail",qm,void 0);D("assert",sm,void 0);D("assertThrows",tm,void 0);D("assertNotThrows",um,void 0);D("assertTrue",vm,void 0);D("assertFalse",wm,void 0);D("assertEquals",xm,void 0);D("assertNotEquals",ym,void 0);D("assertNull",zm,void 0);D("assertNotNull",Am,void 0);D("assertUndefined",Bm,void 0);
D("assertNotUndefined",Cm,void 0);D("assertNotNullNorUndefined",Dm,void 0);D("assertNonEmptyString",Em,void 0);D("assertNaN",Fm,void 0);D("assertNotNaN",Gm,void 0);D("assertObjectEquals",Hm,void 0);D("assertArrayEquals",Im,void 0);D("assertSameElements",Jm,void 0);D("assertEvaluatesToTrue",Mm,void 0);D("assertEvaluatesToFalse",Nm,void 0);D("assertHTMLEquals",Om,void 0);D("assertHashEquals",Qm,void 0);D("assertRoughlyEquals",Rm,void 0);D("assertContains",Sm,void 0);D("assertNotContains",Tm,void 0);function Vm(d){this.qb=d||"Untitled Test Case";this.$f=[];this.Ue=null;d=window.location.search;var e=d.match(/(?:\?|&)runTests=([^?&]+)/i);if(e){this.Ue={};e=e[1].split(",");for(var h=0,l=e.length;h<l;h++)this.Ue[e[h]]=1}if(d=d.match(/(?:\?|&)order=(natural|random|sorted)/i))this.fa=d[1];this.va=new Wm(this)}Vm.prototype.fa="sorted";var Xm=window.setTimeout,Ym=String(window.setTimeout),Zm=null,$m=typeof opera=="undefined"&&!!navigator&&navigator.userAgent.indexOf("MSIE")!=-1;a=Vm.prototype;
a.Di=false;a.Oe=false;a.zi=0;a.vh=0;a.bf=0;a.Pf=null;a.Qe=null;a.add=function(d){this.$f.push(d)};a.mb=function(){return this.$f.length};a.next=function(){for(var d;d=this.$f[this.bf++];)if(!this.Ue||this.Ue[d.name]||this.Ue[this.bf-1])return d;return null};a.reset=function(){this.bf=0;this.va=new Wm(this)};a.ui=B(true);
a.execute=function(){this.Di=true;this.reset();this.zi=(new Date).getTime();this.Oe=true;this.va.jh=this.mb();if(this.ui()){this.log("Starting tests: "+this.qb);this.Ih()}else{this.log("shouldRunTests() returned false, skipping these tests.");this.va.ih=true;an(this)}};
function an(d){bn(d,"Done");d.Fi();var e=Xm==window.setTimeout;if(!e&&$m&&String(window.setTimeout)==Ym)e=true;if(!e){bn(d,"ERROR: Test did not restore setTimeout");d.va.kb.push(new cn(d.qb,"ERROR: Test did not restore setTimeout"))}window.setTimeout=Xm;d.kj=(new Date).getTime();d.Oe=false;d.va.Tf=d.kj-d.zi;d.va.Pg=dn(d);d.log(en(d.va));d.va.Zc()?d.log("Tests complete"):d.log("Tests Failed");if(d.Pf){e=d.Pf;e();d.Pf=null}}function bn(d,e){d.va.fi.push(fn(d)+"  "+e)}a=Vm.prototype;
a.log=function(d){var e=C.top;if(!(e&&typeof e._allTests!="undefined")&&window.console){if(typeof d=="string")d=fn(this)+" : "+d;window.console.log(d)}};a.Zc=function(){return!!this.va&&this.va.Zc()};
a.qf=function(d){var e=[];this.Qe&&!this.Qe.$h()?e.push(this.qb+" [RUNNING]"):e.push(this.qb+" ["+(this.va.Zc()&&!(this.Qe.kb.length>0)?"PASSED":"FAILED")+"]");e.push(window.location.href.substring(window.location.href.indexOf("google3")+8));e.push(en(this.va));if(d)e.push(".",this.va.fi.join("\n"));else this.va.Zc()||e.push(this.va.kb.join("\n"));e.push(" ");return e.join("\n")};a.xg=function(){return this.va.Tf};a.wg=function(){return this.va.Pg};a.oi=function(){this.ti();this.execute()};
function gn(d,e){switch(d.fa){case "random":for(d=e.length;d>1;){var h=Math.floor(Math.random()*d);d--;var l=e[d];e[d]=e[h];e[h]=l}break;case "sorted":e.sort(function(m,n){if(m.name==n.name)return 0;return m.name<n.name?-1:1});break}}a=Vm.prototype;a.ti=aa();a.Fi=aa();a.si=aa();a.gh=aa();
a.Ih=function(){bn(this,"Start");this.vh=(new Date).getTime();for(var d;(d=this.next())&&this.Oe;){this.va.ge++;var e=false;try{this.log("Running test: "+d.name);Zm=d.name;this.si();d.execute();this.gh();Zm=null;e=true;var h=d;this.va.Zf++;var l=h.name+" : PASSED";bn(this,l);this.log(l)}catch(m){d=d;h=d.name+" : FAILED";this.log(h);bn(this,h);this.va.kb.push(this.Yd(d.name,m));if(!e)try{this.gh()}catch(n){}}if(this.bf<this.$f.length&&(new Date).getTime()-this.vh>200){bn(this,"Breaking async");this.timeout(sa(this.Ih,
this),100);return}}an(this)};function dn(){for(var d=document.getElementsByTagName("script"),e=0,h=0,l=d.length;h<l;h++)d[h].src&&e++;return e}Vm.prototype.timeout=function(d,e){return Xm(d,e)};function fn(){var d=new Date,e="00"+d.getMilliseconds();e=e.substr(e.length-3);return(d.getHours()<10?"0"+d.getHours():String(d.getHours()))+":"+(d.getMinutes()<10?"0"+d.getMinutes():String(d.getMinutes()))+":"+(d.getSeconds()<10?"0"+d.getSeconds():String(d.getSeconds()))+"."+e}
Vm.prototype.Yd=function(d,e){var h=null,l=null;if(e){this.log(e);if(F(e))h=e;else{h=e.message||e.description||e.toString();l=e.stack?km(e.stack):e.stackTrace}}else h="An unknown error occurred";d=new cn(d,h,l);if(!e||!e.isJsUnitException||!e.loggedJsUnitException)bn(this,d.toString());if(e&&e.isJsUnitException)e.loggedJsUnitException=true;return d};function hn(d,e,h){this.name=d;this.rk=e;this.scope=h||null}hn.prototype.execute=function(){this.rk.call(this.scope)};
function Wm(d){this.zk=d;this.Pg=this.Tf=this.Zf=this.ge=this.jh=0;this.ih=false;this.kb=[];this.fi=[]}Wm.prototype.Zc=function(){var d=this.ge==this.Zf&&this.kb.length==0;if(d&&!this.ih&&this.Df())return this.ge>0;return d};
function en(d){var e=d.ge+" of "+d.jh+" tests run in "+d.Tf+"ms.\n";if(d.ih)e+="Tests not run because shouldRunTests() returned false.";else if(d.ge==0){e+="No tests found.  ";if(d.Df())e+="Call G_testRunner.setStrict(false) if this is expected behavior.  "}else e+=d.Zf+" passed, "+(d.jh-d.Zf)+" failed.\n"+Math.round(d.Tf/d.ge)+" ms/test. "+d.Pg+" files loaded.";return e}Wm.prototype.Df=function(){return this.zk.Qe.Df()};function cn(d,e,h){this.source=d;this.message=e;this.stack=h||null}
cn.prototype.toString=function(){return"ERROR in "+this.source+"\n"+this.message+(this.stack?"\n"+this.stack:"")};function jn(){this.kb=[]}a=jn.prototype;a.ra=null;a.xf=false;a.Lf=null;a.sg=null;a.Ei=true;a.Xh=function(d){if(!this.Lf){var e=document.getElementById("closureTestRunnerLog");if(e==null){e=document.createElement("div");document.body.appendChild(e)}this.Lf=e}if(this.ra&&this.ra.Oe)throw Error("The test runner is already waiting for a test to complete");this.ra=d;d.Qe=this;this.xf=true};a.xk=ba("Ei");a.Df=w("Ei");a.Vj=w("xf");
a.$h=function(){return this.kb.length>0||this.xf&&!!this.ra&&this.ra.Di&&!this.ra.Oe};a.Zc=function(){return!(this.kb.length>0)&&!!this.ra&&this.ra.Zc()};a.Yd=function(d){if(!this.sg||this.sg.call(null,d))this.kb.push(d)};a.Yj=function(d){var e=Zm;if(this.ra)this.ra.Yd(e,d);else throw new Error("Test runner not initialized with a test case. Original exception: "+d.message);};function kn(d,e){d.sg=e}a=jn.prototype;
a.qf=function(d){var e=[];this.ra&&e.push(this.ra.qf(d));if(this.kb.length>0){e.push("JavaScript errors detected by test runner:");e.push.apply(e,this.kb);e.push("\n")}return e.join("\n")};a.xg=function(){return this.ra?this.ra.xg():0};a.wg=function(){return this.ra?this.ra.wg():0};a.execute=function(){if(!this.ra)throw Error("The test runner must be initialized with a test case before execute can be called.");this.ra.Pf=sa(this.fk,this);this.ra.oi()};
a.fk=function(){var d=this.ra.qf(true);if(this.kb.length>0)d+="\n"+this.kb.join("\n");for(var e=this.Lf;e.firstChild;)e.removeChild(e.firstChild);ln(this,d);d=document.createElement("a");d.style.display="block";d.style.fontSize="small";d.href="";d.onclick=sa(function(){this.execute();return false},this);d.innerHTML="Run again without reloading";e.appendChild(d)};
function ln(d,e){e=e.split("\n");for(var h=0;h<e.length;h++){var l=e[h],m,n=/FAILED/.test(l)||/ERROR/.test(l);m=/PASSED/.test(l)?"darkgreen":n?"darkred":"#333";var o=document.createElement("div");if(l.substr(0,2)=="> ")o.innerHTML=l;else o.appendChild(document.createTextNode(l));if(n)if(l=/(\S+) (\[[^\]]*] )?: (FAILED|ERROR)/.exec(l)){l="runTests="+l[1];if(n=window.location.search){var q=/runTests=([^&]*)/.exec(n);l=q?n.substr(0,q.index)+l+n.substr(q.index+q[0].length):n+"&"+l}else l="?"+l;n=window.location.href;
if((q=window.location.hash)&&q.charAt(0)!="#")q="#"+q;n=n.split("#")[0].split("?")[0]+l+q;l=document.createElement("A");l.innerHTML="(run individually)";l.style.fontSize="0.8em";l.href=n;o.appendChild(document.createTextNode(" "));o.appendChild(l)}o.style.color=m;o.style.font="normal 100% monospace";try{o.style.whiteSpace="pre-wrap"}catch(s){}if(h<2)o.style.fontWeight="bold";d.Lf.appendChild(o)}}jn.prototype.log=function(d){this.ra&&this.ra.log(d)};(function(){var d=window.setTimeout;if(top.JsUnitTestManager||top.jsUnitTestManager)document.write('<script type="text/javascript" src="../../third_party/java/jsunit/core/app/jsUnitCore.js"><\/script>');else{var e=new jn;D("G_testRunner",e,void 0);D("G_testRunner.initialize",e.Xh,void 0);D("G_testRunner.isInitialized",e.Vj,void 0);D("G_testRunner.isFinished",e.$h,void 0);D("G_testRunner.isSuccess",e.Zc,void 0);D("G_testRunner.getReport",e.qf,void 0);D("G_testRunner.getRunTime",e.xg,void 0);D("G_testRunner.getNumFilesLoaded",
e.wg,void 0);D("G_testRunner.setStrict",e.xk,void 0);D("G_testRunner.logTestFailure",e.Yj,void 0);C.debug||va("debug",sa(e.log,e));C.G_errorFilter&&kn(e,C.G_errorFilter);window.onerror=function(h,l,m){if(typeof h=="object")h.target&&h.target.tagName=="SCRIPT"?e.Yd("UNKNOWN ERROR: Script "+h.target.src):e.Yd("UNKNOWN ERROR: No error information available.");else e.Yd("JS ERROR: "+h+"\nURL: "+l+"\nLine: "+m)};window.onload=function(){d(function(){if(!e.xf){var h=new Vm(document.title),l=typeof C.RuntimeObject!=
"undefined"?C.RuntimeObject("test*"):C,m=[];for(var n in l){try{var o=l[n]}catch(q){}/^test/.test(n)&&ka(o)&&m.push(new hn(n,o,C))}gn(h,m);for(l=0;l<m.length;l++)h.add(m[l]);h.log(h.mb()+" tests auto-discovered");if(C.setUp)h.si=C.setUp;if(C.tearDown)h.gh=C.tearDown;if(C.setUpPage)h.ti=C.setUpPage;if(C.tearDownPage)h.Fi=C.tearDownPage;if(C.runTests)h.oi=C.runTests;if(C.shouldRunTests)h.ui=C.shouldRunTests;e.Xh(h)}e.execute()},500);window.onload=null}}})();function mn(d){var e=this.cl(Zl(d)),h=0,l=-1,m=d.fb(),n=e.length;for(f=0;f<n;f++){atom=d.q(f);if(this.ll(atom,d,m)==1)for(g=0;g<n;g++)if(e[f][g]>h){h=e[f][g];l=f}}return path=this.ml(d,d.q(l))}
function nn(d,e,h){bondVector=e;for(f=0;f<d.b.length-1;f++){atom=d.q(f);nextAtom=d.q(f+1);atomPoint=new O(atom.a.x,atom.a.y);bondVector.normalize();bondVector.scale(h);atomPoint.x+=bondVector.x;atomPoint.y+=bondVector.y;nextAtom.a=atomPoint;nextAtom.Ib(0,true);e=true;if(this.Ml(d)==2)e=false;bondVector=this.ol(nextAtom,atom,this.il(d),e)}}
function on(d){var e=0,h=0,l=0;atIdx=0;for(atCount=d.length;atIdx<atCount;atIdx++){atom=d[atIdx];if(atom.Ma[0]==true){e+=atom.a.x;h+=atom.a.y;l++}}return center=new O(e/l,h/l)}function pn(d,e){var h=0;if(d>=0&&e>=0)h=Math.atan(e/d);else if(d<0&&e>=0)h=Math.PI+Math.atan(e/d);else if(d<0&&e<0)h=Math.PI+Math.atan(e/d);else if(d>=0&&e<0)h=2*Math.PI+Math.atan(e/d);return h}function qn(d,e){for(ap=0;ap<e;ap++)if(!d.q(ap).Ma[0])return false;return true}
function rn(d,e,h,l,m){var n=0,o=0,q=n=0;n=0;sharedAtomsCenterVector=new Yl(h.x,h.y);newDirection=new Yl(d.a.x,d.a.y);occupiedDirection=new Yl(h.x,h.y);occupiedDirection.sub(newDirection);atomsToDraw=[];n=e.b.length;h=l.b.length;if(n==1){for(f1=0;f1<h;f1++)atomsToDraw.push(l.q(f1));n=Math.PI*2/(h+n);placedAtom=e.q(0);xDiff=placedAtom.a.x-d.a.x;yDiff=placedAtom.a.y-d.a.y;o=this.kf(xDiff,yDiff);this.ji(atomsToDraw,new O(d.a.x,d.a.y),o,n,m)}else if(n==0){for(f1=0;f1<h;f1++)atomsToDraw.push(l.q(f1));
n=Math.PI*2/h;o=0;this.ji(atomsToDraw,new O(d.a.x,d.a.y),o,n,m)}else{q=[];sharedAtomsCenterVector.sub(newDirection);newDirection=sharedAtomsCenterVector;newDirection.normalize();newDirection.scale(m);newDirection.ii();distanceMeasure=new O(d.a.x,d.a.y);distanceMeasure.x+=newDirection.x;distanceMeasure.y+=newDirection.y;for(f1=0;f1<n;f1++)q.push(e.q(f1));this.fm(q,distanceMeasure);closestPoint1=new Yl(q[0].a.x,q[0].a.y);closestPoint2=new Yl(q[1].a.x,q[1].a.y);closestPoint1.sub(new Yl(d.a.x,d.a.y));
closestPoint2.sub(new Yl(d.a.x,d.a.y));n=closestPoint1.oe(occupiedDirection);n+=closestPoint2.oe(occupiedDirection);angle1=this.kf(q[0].a.x-d.a.x,q[0].a.y-d.a.y);angle2=this.kf(q[1].a.x-d.a.x,q[1].a.y-d.a.y);angle3=this.kf(distanceMeasure.x-d.a.x,distanceMeasure.y-d.a.y);e=null;e=angle1>angle3?angle1-angle3<Math.PI?q[1]:q[0]:angle3-angle1<Math.PI?q[0]:q[1];n=2*Math.PI-n;n=n/(h+1);for(fff=0;fff<h;fff++)atomsToDraw.push(l.q(fff));q=m;o=this.kf(e.a.x-d.a.x,e.a.y-d.a.y);this.ji(atomsToDraw,new O(d.a.x,
d.a.y),o,n,q)}}function sn(d,e,h,l,m){points=[];angle=h;ad=0;for(ads=d.length;ad<ads;ad++){angle+=l;if(angle>=2*Math.PI)angle-=2*Math.PI;connectAtom=d[ad];if(connectAtom.A=="H")m*=0.6;x=Math.cos(angle)*m;y=Math.sin(angle)*m;newX=x+e.x;newY=y+e.y;points.push(new O(newX,newY))}ad=0;for(ads=d.length;ad<ads;ad++){connectAtom=d[ad];connectAtom.a=points[ad];connectAtom.Ma[0]=true}}function tn(d,e,h,l){cntLoop=0;I(e.h.ga(),function(m){cntLoop++;m=oe(m,e);m.Ma[0]?l.Va(m):h.Va(m)});return cntLoop}
function un(d){I(d,function(e){e.Ib(0,false)})}function vn(d){I(d,function(e){e.Ib(0,true)})};function wn(d,e,h){d=Math.sqrt(Math.pow(h/(2*Math.sin(Math.PI/d.b.length)),2)-Math.pow(h/2,2));e=pn(e.x,e.y);e+=Math.PI/2;return new Yl(Math.cos(e)*d,Math.sin(e)*d)}
function xn(d,e,h,l,m){var n=e.b.length;if(n>2){h=m/(2*Math.sin(Math.PI/d.b.length));l.normalize();l.scale(h);m=new O(sharedAtomsCenter.x+l.x,sharedAtomsCenter.y+l.y);var o=yn(e);n=o[0];o=o[1];var q=new Yl(n.a.x,n.a.y),s=new Yl(o.a.x,o.a.y);q.sub(l);s.sub(l);q=q.oe(s);q=(2*Math.PI-q)/(d.b.length-e.b.length+1);var t;a:{if(Fd(n.a,o.a).x==0){if(n.a.y>o.a.y){t=n;break a}}else if(n.a.x>o.a.x){t=n;break a}t=o}s=Md(Nd(t.a.x,t.a.y,l.x,l.y));d=zn(t,e.h[0],d.h);e=1;o=Fd(n.a,o.a);if(o.x==0){if(l.x>n.a.x)e=-1}else if(l.y-
n.a.y<(l.x-n.a.x)*o.y/o.x)e=-1;q*=e;sn(d,m,s,q,h)}else if(n==2)An(d,e,h,l,m);else n==1&&Bn(d,e,h,l,m)}function Cn(d,e,h){var l=new V,m=0;I(e,function(n){I(n.b,function(o){var q=new V,s=new V,t=za(e,function(u){return K(u.b,o)});t=Ra(J(t,function(u){return u.b}));t=Dn(t);m+=tn(d,o,q,s);un(q.b);I(q.b,function(u){l.Va(u)});q.b.length>0&&rn(o,s,t,q,h)})});return l}
function zn(d,e,h){h=za(h,function(n){return n!==e});var l=Da(h,function(n){return oe(n,d)});h=za(h,function(n){return n!==l});if(h.length>0){var m=oe(l,d);return Ia(m,zn(m,l,h))}else return[]}function yn(d){var e=[];I(d.b,function(h){I(h.h.ga(),function(l){K(d.h,l)&&e.push(oe(l,h))})});return e}
function An(d,e,h,l,m){var n=m/(2*Math.sin(Math.PI/d.b.length));m=Math.sqrt(Math.pow(n,2)-Math.pow(m/2,2));l.normalize();l.scale(m);h=new O(h.x+l.x,h.y+l.y);l=e.b[0];m=e.b[1];var o=new Yl(l.a.x,l.a.y),q=new Yl(m.a.x,m.a.y),s=new Yl(h.x,h.y);o.sub(s);q.sub(s);o=o.oe(q);o=(2*Math.PI-o)/(d.b.length-1);centerX=h.x;centerY=h.y;xDiff=l.a.x-m.a.x;yDiff=l.a.y-m.a.y;direction=1;if(xDiff==0){startAtom=l.a.y>m.a.y?l:m;direction=centerX<l.a.x?1:-1}else{startAtom=l.a.x>m.a.x?l:m;direction=centerY-l.a.y>(centerX-
l.a.x)*yDiff/xDiff?1:-1}startAngle=pn(startAtom.a.x-h.x,startAtom.a.y-h.y);currentAtom=startAtom;currentBond=e.h[0];atomsToDraw=[];x1=0;for(x2=d.h.length-2;x1<x2;x1++){currentBond=this.nl(d,currentBond,currentAtom);currentAtom=oe(currentBond,currentAtom);atomsToDraw.push(currentAtom)}o*=direction;sn(atomsToDraw,h,startAngle,o,n)}
function Bn(d,e,h,l,m){m=m/(2*Math.sin(Math.PI/d.b.length));l.normalize();l.scale(m);h=new O(h.x+l.x,h.y+l.y);var n=2*Math.PI/d.b.length,o=e.b[0];l=(new Yl(o.a.x,o.a.y)).oe(l);d=zn(o,e.h[0],d.h);sn(d,h,l,n,m)}function En(d,e){var h=[];I(e.b,function(l){K(d.b,l)&&h.push(l)});return h}function Fn(d,e){var h=[];I(e.h,function(l){K(d.h,l)&&h.push(l)});return h}function Dn(d){var e=Aa(d,function(h,l){return Gd(h,l.a)},new O(0,0));return new O(e.x/d.length,e.y/d.length)}
function Gn(d,e,h,l){var m;result=[];atomCount=e.b.length;k=0;for(k1=d.length;k<k1;k++)if(e!=d[k]){atomCount2=d[k].b.length;a=0;a:for(;a<atomCount;a++)for(a2=0;a2<atomCount2;a2++)if(e.b[a]==d[k].b[a2]){result.push(d[k]);break a}}m=result;r=0;for(r1=m.length;r<r1;r++){var n=m[r];if(!n.Ma[0]){var o={b:En(e,n),h:Fn(e,n)};sac=o.b.length;if(sac==2&&h=="FUSED"||sac==1&&h=="SPIRO"||sac>2&&h=="BRIDGED"){debug="";for(qw=0;qw<o.b.length;qw++)debug+="\n         "+o.b[qw].a+" "+o.b[qw].Ma[0];sharedAtomsCenter=
on(o.b);oldRingCenter=on(e.b);var q=new Yl(sharedAtomsCenter.x,sharedAtomsCenter.y);newRingCenterVector=new Yl(q.x,q.y);newRingCenterVector.sub(new Yl(oldRingCenter.x,oldRingCenter.y));oldRingCenterVector=new Yl(newRingCenterVector.x,newRingCenterVector.y);tempPoint=new O(sharedAtomsCenter.x+newRingCenterVector.x,sharedAtomsCenter.y+newRingCenterVector.y);xn(n,o,sharedAtomsCenter,newRingCenterVector,l);n.Ib(0,true);Gn(d,n,h,l)}}}}
function Hn(d){I(d,function(e){e.ci||I(e.b,function(h){h.Ib(0,false)})})}function In(d){return Da(d,function(e){return Ba([e.source,e.target],function(h){return h.Ma[2]&&!h.Ma[0]&&oe(e,h).Ma[0]})})}
function Jn(d,e,h,l){Hn(h);h=za(e.b,function(s){return s.Ma[0]});var m=In(e.h);if(m){var n=Da([m.source,m.target],function(s){return s.Ma[2]&&!s.Ma[0]});m=oe(m,n);l=Da(l,function(s){return Da(s,function(t){return K(t.b,n)})});var o=n.a.aa(),q=m.a.aa();Kn(d,l);un(h);d=Cn(e,l,Ln);vn(h);h=Ia(d.b,Ra(J(l,function(s){return s.b})));Ma(h);oldPoint2=o;oldPoint1=q;newPoint2=n.a;newPoint1=m.a;oldAngle=pn(oldPoint2.x-oldPoint1.x,oldPoint2.y-oldPoint1.y);newAngle=pn(newPoint2.x-newPoint1.x,newPoint2.y-newPoint1.y);
angleDiff=oldAngle-newAngle;translationVector=new Yl(oldPoint1.x,oldPoint1.y);translationVector.sub(new Yl(newPoint1.x,newPoint1.y));I(h,function(s){s.a.x+=translationVector.x;s.a.y+=translationVector.y});costheta=Math.cos(angleDiff);sintheta=Math.sin(angleDiff);I(h,function(s){point=s.a;relativex=point.x-oldPoint1.x;relativey=point.y-oldPoint1.y;point.x=relativex*costheta-relativey*sintheta+oldPoint1.x;point.y=relativex*sintheta+relativey*costheta+oldPoint1.y});I(l,function(s){s.ci=true})}};function Mn(d){var e=[];done=new Array(d.length);x=0;for(x2=d.length;x<x2;x++)done[x]=false;i=0;for(j=d.length;i<j;i++)if(!done[i]){partition=[];partition.push(d[i]);done[i]=true;atomCount=d[i].b.length;for(k=i+1;k<d.length;k++)if(!done[k]){atomCount2=d[k].b.length;p=0;a:for(;p<partition.length;p++){atomCount=partition[p].b.length;for(a=0;a<atomCount;a++)for(a2=0;a2<atomCount2;a2++)if(partition[p].b[a]==d[k].b[a2]){partition.push(d[k]);done[k]=true;k=i;break a}}}e.push(partition)}return e};var Ln=1.5;
function Nn(d){var e=0,h=new Yl(0,1),l=d.b.length;for(f=0;f<l;f++){atom=d.q(f);atom.Ib(0,false);atom.Ib(1,false);atom.Ib(2,false);atom.Ib(me.Nk,false)}if(l==1){d.q(0).coords=new O(0,0);return d}if(d.Ld>1)throw Error("Molecule not connected.");var m=d.fb();e=m-d.b.length+1;var n=fe(d),o=new Mn(n);if(e>0){I(n,function(q){I(q.b,function(s){s.Ib(2,true)})});xa.sort.call(o,function(q,s){return Pa(q.length,s.length)}||Pa);e=o[o.length-1];this.Rl(h,e);Cn(d,e,Ln);I(e,function(q){q.ci=true})}else{e=mn(d);
e.q(0).a=new O(0,0);e.q(0).Ma[0]=true;nn(e,h,Ln)}e=0;do{e++;this.tl(d,m,Ln);Jn(h,d,n,o)}while(!qn(d,l)&&e<=d.b.length);return d}
function Kn(d,e){function h(o){var q=za(e,function(s){return K(e,s)});Aa(q,function(s,t){t=za(t.b,function(u){K(o.b,u)});return s+t.length},0)}xa.sort.call(e,function(o,q){Pa(h(o),h(q))}||Pa);var l=e[e.length-1];if(!l.Ma[0]){var m={b:this.Zl(l.h[0],d),h:[l.h[0]]},n=Aa(m.b,function(o,q){return Gd(o,q.a)},new O(0,0));xn(l,m,new Yl(n.x/m.b.length,n.y/m.b.length),wn(l,d,Ln),Ln);l.Ib(0,true)}d=0;do{if(l.Ma[0]){Gn(e,l,"FUSED",Ln);Gn(e,l,"BRIDGED",Ln);Gn(e,l,"SPIRO",Ln)}d++;if(d==e.length)d=0;l=e[d]}while(!this.Wk(e))}
;function On(){U.call(this)}H(On,U);D("kemia.controller.plugins.Cleanup",On,void 0);On.prototype.kc=Kh("cleanup");On.prototype.Cb=function(d){return d=="cleanup"};On.prototype.execCommand=function(){I(this.f.Z,function(d){if(d instanceof V)Nn(d);else if(d instanceof ni){I(d.sb,function(e){Nn(e)});I(d.rb,function(e){Nn(e)});Pn(d)}});this.f.qa(this.f.Z)};On.prototype.r=N("kemia.controller.plugins.Cleanup");function Qn(){}H(Qn,vj);ea(Qn);Qn.prototype.j=function(d){var e={"class":"goog-inline-block "+this.Fc(d).join(" "),title:d.Sd()||""};return d.ta().j("div",e,d.eb)};Qn.prototype.Oa=B(null);Qn.prototype.p=B("goog-flat-button");Li("goog-flat-button",function(){return new xj(null,Qn.ua())});function Rn(){}H(Rn,Qn);ea(Rn);a=Rn.prototype;a.j=function(d){var e={"class":"goog-inline-block "+this.Fc(d).join(" "),title:d.Sd()||""};return d.ta().j("div",e,[this.createCaption(d.eb,d.ta()),this.kg(d.ta())])};a.ya=function(d){return d&&d.firstChild};a.createCaption=function(d,e){return e.j("div","goog-inline-block "+(this.p()+"-caption"),d)};a.kg=function(d){return d.j("div","goog-inline-block "+(this.p()+"-dropdown"),"\u00a0")};a.p=B("goog-flat-menu-button");
Li("goog-flat-menu-button",function(){return new nk(null,null,Rn.ua())});function Sn(){}H(Sn,Rn);ea(Sn);D("kemia.controller.DefaultToolbar.makeDefaultToolbar",function(d){var e=[],h=Ck("clearEditor","Erase All","","tr-icon tr-clear");e.push(h);e.push(Ck("zoomIn","Zoom In","","tr-icon tr-zoom-in"));e.push(Ck("zoomOut","Zoom Out","","tr-icon tr-zoom-out"));h=Tn("undo","Undo","","tr-icon tr-undo");h.nc=true;e.push(h);h=Tn("redo","Redo","","tr-icon tr-redo");h.nc=true;e.push(h);h=Ek("erase","Erase","","tr-icon tr-erase");h.nc=true;e.push(h);var l=Fk("selectSymbol","Atomic Symbol","","tr-icon tr-symbol");
l.nc=true;l.$e=function(s){s=s&&s.length>0?s:null;s!=l.Oa()&&l.wa(s)};h=new Lj;h.Xa(new rj(Te("DIV",{style:"color:black"},"C")));h.Xa(new rj(Te("DIV",{style:"color:blue"},"N")));h.Xa(new rj(Te("DIV",{style:"color:red"},"O")));h.Xa(new rj(Te("DIV",{style:"color:yellow"},"S")));h.Xa(new rj(Te("DIV",{style:"color:orange"},"P")));h.Xa(new rj(Te("DIV",{style:"color:green"},"F")));h.Xa(new rj(Te("DIV",{style:"color:green"},"Cl")));h.Xa(new rj(Te("DIV",{style:"color:DarkRed"},"Br")));l.dd(h);e.push(l);var m=
Fk("selectBond","Bond Type","","tr-icon tr-bond");m.nc=true;m.$e=function(s){s!=m.Oa()&&m.wa(s)};var n=new Lj;I(Yk,function(s){n.Xa(new rj(s.caption,s))});m.dd(n);e.push(m);var o=Fk("selectMoleculeTemplate","Template","","tr-icon tr-template",undefined);o.nc=true;o.$e=function(s){s!=o.Oa()&&o.wa(s)};var q=new Lj;I(Xl,function(s){q.Xa(new rj(s.name,s))});o.dd(q);e.push(o);h=Ek("editPlus","Plus","","tr-icon tr-plus");h.nc=true;e.push(h);h=Ek("editArrow","Arrow","","tr-icon tr-arrow");h.nc=true;e.push(h);
e.push(Ck("cleanup","Cleanup","","tr-icon tr-cleanup"));return Un(e,d)},void 0);function Un(d,e){for(var h=Me(e),l=[],m=0,n;n=d[m];m++){if(F(n)){var o=void 0;if(n=Vn[n]){o=n.factory||Ek;var q=n.fj,s=n.jm,t=n.caption,u=n.Zk,v=h||Me();o=o(q,s,t,u,null,v);if(n.nc)o.nc=true}n=o}n&&l.push(n)}d=Me(e);d=new uj(tj.ua(),$i,d);h=vf(e);d.ed(h);d.oc(false);for(m=0;n=l[m];m++){Ti(n,32,false);n.ed(h);d.kd(n,true)}d.J(e);return d}
function Tn(d,e,h,l,m,n){var o=Ck(d,e,h,l,m,n);o.$e=function(q){o.Kc(q)};return o}G("Format");G("Format");G("Undo");G("Redo");G("Font");G("Font size");G("Text color");G("Bold");G("Italic");G("Underline");G("Text background color");G("Add or remove link");G("Numbered list");G("Bullet list");G("Decrease indent");G("Increase indent");G("Align left");G("Align center");G("Align right");G("Justify");G("Remove formatting");G("Insert image");G("Strikethrough");G("Left-to-right");G("Right-to-left");G("Quote");
G("Edit HTML source");G("Link");G("Subscript");G("Superscript");G("Edit HTML");for(var Vn={},Wn=[],Xn=0,Yn;Yn=Wn[Xn];Xn++)Vn[Yn.fj]=Yn;delete Wn;function Zn(d,e){this.ob=new Hf(this);this.ff=d;this.vb=e;this.Tg=[];Sf(this.vb,function(h){h.nc&&this.Tg.push($n(this,Nf(h)))},this);this.vb.oc(false);this.ob.v(this.ff,Sh,this.Ck).v(this.vb,"action",this.Bj)}H(Zn,xc);D("kemia.controller.ToolbarController",Zn,void 0);function $n(d,e){return e}a=Zn.prototype;a.zb=w("ob");a.ab=function(){return this.vb.ab()};a.ub=function(d){this.vb.ub(d)};a.ea=function(){return this.vb.ea()};a.Kc=function(d){this.vb.Kc(d)};a.blur=function(){this.vb.Wc(null)};
a.k=function(){Zn.g.k.call(this);if(this.ob){this.ob.da();delete this.ob}if(this.vb){this.vb.da();delete this.vb}delete this.ff;delete this.Tg};a.Ck=function(d){this.r.info("updateToolbar");if(this.vb.ea()&&this.dispatchEvent("change")){var e;try{e=this.ff.queryCommandValue(d.al||this.Tg)}catch(h){e={}}d=e;this.r.info("updateToobarFromState");for(var l in d)if(e=Qf(this.vb,l)){var m=d[l];this.r.info(l+": "+m);e.$e?e.$e(m):Ri(e,!!m)}}};
a.Bj=function(d){var e;e=Nf(d.target);var h=d.target.Oa(),l;if(d.target.Af)l=d.target.Af();this.ff.execCommand(e,h,l,d)};a.r=N("kemia.controller.ToolbarController");function ao(d,e,h){this.source=d!==undefined?d:new O(0,0);this.target=e!==undefined?e:Gd(this.source,new O(2,0));this.style=h!==undefined?h:bo}var bo=1;function ni(){this.uf="";this.sb=[];this.rb=[];this.wc=[];this.$d=[];this.gj=this.pk=""}ni.prototype.getHeader=w("uf");D("kemia.model.Reaction.prototype.getHeader",ni.prototype.getHeader,void 0);function Ok(d,e){d.sb.push(e);e.cb=d}function Pk(d,e){d.rb.push(e);e.cb=d}function Qk(d,e){if(K(d.sb,e)){Ga(d.sb,e);e.cb=undefined}else if(K(d.rb,e)){Ga(d.rb,e);e.cb=undefined}}function Bl(d,e){d.$d.push(e);e.cb=d}function Rk(d,e){Ga(d.$d,e);e.cb=undefined}
function oi(d,e){var h;I(e,function(l){h&&Bl(this,co(this,[h,l]));h=l},d)}function pi(d,e,h){e=d.ld(e);h=d.ld(h);h=new ao(new O((e.right+h.left)/2,(e.top+h.bottom)/2));d.wc.push(h);h.cb=d}ni.prototype.ld=function(d){d=Ra(J(d,function(e){return e.b}));d=J(d,function(e){return e.a});return Id.apply(null,d)};function co(d,e){d=d.ld(e);return new O((d.left+d.right)/2,(d.top+d.bottom)/2)}
function Pn(d){var e;I(Ia(d.sb,d.rb),function(h){var l=id(this.ld([h]));if(e){var m;a:{m=Math.max(e.left,l.left);var n=Math.min(e.left+e.width,l.left+l.width);if(m<=n){var o=Math.max(e.top,l.top),q=Math.min(e.top+e.height,l.top+l.height);if(o<=q){m=new Ld(m,o,n-m,q-o);break a}}m=null}m&&Tl(this,h,new O(4+e.left+e.width-l.left,0));l=e;h=id(this.ld([h]));m=Math.max(l.left+l.width,h.left+h.width);n=Math.max(l.top+l.height,h.top+h.height);l.left=Math.min(l.left,h.left);l.top=Math.min(l.top,h.top);l.width=
m-l.left;l.height=n-l.top}else e=l},d)}function Tl(d,e,h){I(e.b,function(l){l.a=Gd(l.a,h)});return e}function Wl(d,e,h,l){var m=ag(new jd,Md(h),l.x,l.y);I(e.b,function(n){n.a=P(m,[n.a])[0]});return e};function eo(d){if(d.fa==pe)return"SINGLE_BOND";if(d.fa==2)return"DOUBLE_BOND";if(d.fa==3)return"TRIPLE_BOND";if(d.fa==4)return"QUADRUPLE_BOND";throw new Error("Invalid bond type ["+d.toString()+"]");}function fo(d){if(d.$==11)return"SINGLE_BOND_UP";if(d.$==13)return"SINGLE_BOND_DOWN";if(d.$==12)return"SINGLE_BOND_UP_OR_DOWN";return"NOT_STEREO"}
function go(d,e,h,l){switch(d){case "SINGLE_BOND":switch(e){case "NOT_STEREO":return new R(h,l);case "SINGLE_BOND_UP":return new R(h,l,pe,11);case "SINGLE_BOND_UP_OR_DOWN":return new R(h,l,pe,12);case "SINGLE_BOND_DOWN":return new R(h,l,pe,13);default:throw new Error("invalid bond type/stereo ["+d+"]/["+e+"]");}case "DOUBLE_BOND":return new R(h,l,2);case "TRIPLE_BOND":return new R(h,l,3);case "QUADRUPLE_BOND":return new R(h,l,4);case "AROMATIC":return new R(h,l,undefined,undefined,true);case "SINGLE_OR_DOUBLE":case "SINGLE_OR_AROMATIC":case "DOUBLE_OR_AROMATIC":case "ANY":default:throw new Error("invalid bond type/stereo ["+
d+"]/["+e+"]");}}function Sl(d){d=d.constructor==String?el(d):d;var e=new V;e.name=d.name;I(d.atoms,function(h){e.Va(new Q(h.symbol,h.coord.x,h.coord.y,h.charge))});I(d.bondindex,function(h){e.Wa(go(h.type,h.stereo,e.q(h.source),e.q(h.target)))});return e}D("kemia.io.json.readMolecule",Sl,void 0);D("kemia.io.json.writeMolecule",function(d){return gl(new fl,ho(d))},void 0);
function ho(d){var e=J(d.b,function(l){return{A:l.A,a:{x:l.a.x,y:l.a.y},Ya:l.Ya}}),h=J(d.h,function(l){var m=eo(l),n=fo(l);return{source:d.Aa(l.source),target:d.Aa(l.target),type:m,$:n}});return{name:d.name,b:e,Xk:h}}function xl(d){d=d.constructor==String?el(d):d;var e=new ni;e.uf=d.header;I(d.reactants,function(h){Ok(e,Sl(h))});I(d.products,function(h){Pk(e,Sl(h))});return e}D("kemia.io.json.readReaction",xl,void 0);function sl(d){var e=d.uf,h=J(d.sb,ho);d=J(d.rb,ho);return{uf:e,sb:h,rb:d}}
D("kemia.io.json.writeReaction",function(d){return gl(new fl,sl(d))},void 0);var io=3;io=3;
function jo(d,e,h,l){switch(d){case 1:switch(e){case 0:return new R(h,l);case 1:return new R(h,l,pe,11);case 4:return new R(h,l,pe,12);case 6:return new R(h,l,pe,13);default:throw new Error("invalid bond type/stereo ["+d+"]/["+e+"]");}case 2:return new R(h,l,2);case io:return new R(h,l,3);case 4:d=new R(h,l);d.dc=true;return d;case 5:throw new Error("type not implemented ["+d+"]");case 6:throw new Error("type not implemented ["+d+"]");case 7:throw new Error("type not implemented ["+d+"]");case 8:throw new Error("type not implemented ["+
d+"]");default:throw new Error("invalid bond type/stereo ["+d+"]/["+e+"]");}}
function ko(d){d=d.split(d.indexOf("\r\n")>0?"\r\n":"\n");for(var e=new V(d[0]),h=parseInt(d[3].substr(0,3),10),l=parseInt(d[3].substr(3,3),10),m=1;m<=h;m++){var n=d[m+3],o=n.substr(30,4).replace(/(^\s*)|(\s*$)/g,""),q=parseFloat(n.substr(0,10)),s=parseFloat(n.substr(10,10));n=parseInt(n.substr(36,3),10);var t=0;if(n!=0)if(n==1)t=3;else if(n==2)t=2;else if(n==3)t=1;else if(n!=4)if(n==5)t=-1;else if(n==6)t=-2;else if(n==7)t=-3;n=new Q(o,q,s,t);e.Va(n)}for(m=1;m<=l;m++){n=d[m+3+h];t=e.q(parseInt(n.substr(0,
3),10)-1);o=e.q(parseInt(n.substr(3,3),10)-1);n=jo(parseInt(n.substr(6,3),10),parseInt(n.substr(9,3),10),t,o);e.Wa(n)}m=4+h+l;h=d.length;for(l=false;;){n=d[m++];if(m==h||n.indexOf("M  END")>=0)break;if(n.indexOf("M  CHG")>=0){if(!l){t=0;for(l=e.b.length;t<l;t++)e.q(t).Ya=0;l=true}o=parseInt(n.substr(6,3),10);for(q=0;q<o;q++){s=parseInt(n.substr(10+8*q,3),10);t=parseInt(n.substr(14+8*q,3),10);e.q(s-1).Ya=t}}}return e}D("kemia.io.mdl.readMolfile",ko,void 0);D("kemia.io.mdl.readMolfile",ko,void 0);D("kemia.io.smiles.SmilesGenerator.generate",function(d,e){if(d.b.length==0)return"shit "+d.b.length;var h=0;for(i=0;i<d.b.length;i++){var l=d.q(i);l.a.x==0&&l.a.y==0&&h++}if(e&&h==d.b.length)throw"Atoms have no 2D coordinates, but 2D coordinates are needed for creating chiral smiles";e&&rings.jl();return"todo.."},void 0);function lo(d,e,h){this.type=d;this.Hb=e;this.ae=h;this.Yf=fe(h);this.bd=[];this.be=[];this.ec=[]};function mo(d){this.Hb=d}D("kemia.query.DFSMapper",mo,void 0);function no(d,e){if(d.bd.length===d.Hb.b.length){for(var h=new Ec,l=0,m=d.bd.length;l<m;l++)h.Da(d.Hb.Aa(d.bd[l]),d.ae.Aa(d.be[l]));if(d.type===1){d=h.ga();d.sort(function(q,s){return q-s});var n=true;l=0;for(m=e.length;l<m;l++){var o=e[l].ga();o.sort(function(q,s){return q-s});if(Na(d,o))n=false}n&&e.push(h)}else e.push(h)}}
function oo(d,e,h,l){for(var m=e.Qd(),n=h.Qd(),o=[],q=0,s=m.length;q<s;q++)for(var t=m[q],u=0,v=n.length;u<v;u++)o.push({nk:e,ni:t,mk:h,mi:n[u]});for(d.ec.length?d.ec.push(d.ec[d.ec.length-1].concat(o)):d.ec.push(o);d.ec[d.ec.length-1].length;){e=d.ec[d.ec.length-1].pop();o=e.nk;n=e.mk;h=e.ni;m=e.mi;if(ya(d.bd,h)!==-1)h=false;else if(ya(d.be,m)!==-1)h=false;else if(h.De(m,d.ae,d.Yf)){o=d.Hb.yb(o,h);n=d.ae.yb(n,m);if(o.De(n,d.ae)){d.bd.push(h);d.be.push(m);no(d,l);h=true}else h=false}else h=false;
if(h){oo(d,e.ni,e.mi,l);d.bd.pop();d.be.pop();d.ec.pop()}}}mo.prototype.$j=function(d){for(var e=[],h=this.Hb.q(0),l=0,m=d.b.length;l<m;l++){var n=new lo(1,this.Hb,d),o=d.q(l);if(h.De(o))if(this.Hb.b.length>1){n.bd.push(h);n.be.push(o);oo(n,h,o,e)}else{var q=new Ec;q.Da(n.Hb.Aa(h),n.ae.Aa(o));e.push(q)}}return e};D("kemia.query.DFSMapper.prototype.mapUnique",mo.prototype.$j,void 0);Ec.prototype.getCount=Ec.prototype.mb;
mo.prototype.Zj=function(d){for(var e=[],h=this.Hb.q(0),l=0,m=d.b.length;l<m;l++){var n=new lo(0,this.Hb,d),o=d.q(l);if(h.De(o)){if(this.Hb.b.length>1){n.bd.push(h);n.be.push(o);oo(n,h,o,e)}else{d=new Ec;d.Da(n.Hb.Aa(h),n.ae.Aa(o));return d}if(e.length)return e[0]}}return new Ec};D("kemia.query.DFSMapper.prototype.mapFirst",mo.prototype.Zj,void 0);var po=new RegExp(/\[[^[]+\]|Br|B|Cl|C|N|F|O|P]|S|c|n|o|s|-|=|#|%[0-9][0-9]|[0-9]|\(|\)|./g),qo=new RegExp(/^\[([0-9]*)([A-Z][a-z]?|c|n|o|se|s|as)(@|@@)?(H)?([0-9])?([+-][\d]?)?\]$/),ro=["C","c","N","n","O","o","S","s","P","F","Br","Cl","I","B"],so=["c","n","o","s","as","se"];
function to(d){for(var e=d.match(po),h=new V(d),l=0,m,n="NONE",o=[],q=[],s="",t=[],u=0;u<e.length;u++){var v=e[u];if(v!=".")if(v=="(")o.push(m);else if(v==")")if(o.length)m=o.pop();else s=" unbalanced parens";else if(v=="-")n="-";else if(v=="=")n="=";else if(v=="#")n="#";else if(v=="$")n="$";else if(v==":")n=":";else if(v[0]=="%"){ringid=parseInt(v[1]+v[2],10);if(ring_atom=q[ringid]){h.Wa(uo(n,m,ring_atom));n="NONE";q[ringid]=null}else q[ringid]=m}else if(v!="/")if(v!="\\")if(isNaN(ringid=parseInt(v,
10))){var A={Ef:null,symbol:null,$:"NONE",Rj:null,Ya:null,dc:false,Ah:false},E=qo.exec(v);if(E){A.Ef=E[1];if(vo[E[2]])A.A=E[2];if(E[3]=="@"||E[3]=="@@"){A.$=E[3];if(E[4]=="H")A.Ah=true}else A.$="NONE";if(E[4]=="H")A.Rj=E[5]?E[5]:1;A.Ya=E[6]=="+"?1:E[6]=="-"?-1:parseInt(E[6],10)}else if(K(ro,v))A.A=v;if(K(so,A.A)){A.dc=true;A.A=A.A.length==1?A.A.toUpperCase():A.A[0].toUpperCase()+A.A[1]}smi_atom=A;if(smi_atom.A){l+=1;v=new Q(smi_atom.A,0,0,smi_atom.Ya,smi_atom.dc,smi_atom.Ef);if(m){h.Wa(uo(n,m,v));
n="NONE"}h.Va(v);if(smi_atom.$!="NONE"){t.push(h.Aa(v));t.push(smi_atom.$);t.push(smi_atom.Ah)}m=v}else s=" unknown atom "+v}else if(ring_atom=q[ringid]){h.Wa(uo(n,m,ring_atom));n="NONE";q[ringid]=null}else q[ringid]=m;if(s)throw new Error(d+s);}wo(h,t);if(o.length)throw new Error(smi+" unbalanced parens");for(d=0;d<q.length;++d)if(q[d])throw new Error(smi+" unclosed rings");if(n!="NONE")throw new Error(smi+" unpaired bond "+n);return h}D("kemia.io.smiles.SmilesParser.parse",to,void 0);
function uo(d,e,h){var l=d;if(d=="NONE")l=e.dc&&h.dc?":":"-";switch(l){case "-":return new R(e,h,pe);case "=":return new R(e,h,2);case "#":return new R(e,h,3);case ":":d=new R(e,h);d.dc=true;return d;case "~":default:throw new Error("invalid bond type/stereo ["+d+"]/["+stereo+"]");}}
function wo(d,e){c=0;for(centers=e.length;c<centers;c++){var h=d.q(e[c]);if(h!=undefined){var l=e[++c];++c;var m=[],n=0,o=null;I(d.b,function(s){bond_=d.yb(h,s);if(bond_!=null&&bond_!=undefined){if(bond_.source!=h){bond_.source=h;bond_.target=s}n++;a:{s=bond_;rings=fe(d);r=0;for(ringCount=rings.length;r<ringCount;r++){b=0;for(bondCount=rings[r].h.length;b<bondCount;b++)if(s==rings[r].h[b]){s=true;break a}}s=false}s||m.push(bond_)}});var q=m.length;if((n==3||n==4)&&q>0){bondidx=0;if(n==3&&q>1||n==
4&&q>2)bondidx=1;o=m[bondidx];o.$=l=="@"?11:13}if(n==4&&q>1){bondidx=1;if(q==4)bondidx=3;else if(q==4)bondidx=2;o=m[bondidx];o.$=l=="@"?13:11}}}}
var vo={H:{number:1,name:"Hydrogen"},He:{number:2,name:"Helium"},Li:{number:3,name:"Lithium"},Be:{number:4,name:"Beryllium"},B:{number:5,name:"Boron"},C:{number:6,name:"Carbon"},c:{number:6,name:"Carbon"},N:{number:7,name:"Nitrogen"},n:{number:7,name:"Nitrogen"},O:{number:8,name:"Oxygen"},o:{number:8,name:"Oxygen"},F:{number:9,name:"Fluorine"},Ne:{number:10,name:"Neon"},Na:{number:11,name:"Sodium"},Mg:{number:12,name:"Magnesium"},Al:{number:13,name:"Aluminium"},Si:{number:14,name:"Silicon"},P:{number:15,
name:"Phosphorus"},S:{number:16,name:"Sulfur"},s:{number:16,name:"Sulfur"},Cl:{number:17,name:"Chlorine"},Ar:{number:18,name:"Argon"},K:{number:19,name:"Potassium"},Ca:{number:20,name:"Calcium"},Sc:{number:21,name:"Scandium"},Ti:{number:22,name:"Titanium"},V:{number:23,name:"Vanadium"},Cr:{number:24,name:"Chromium"},Mn:{number:25,name:"Manganese"},Fe:{number:26,name:"Iron"},Co:{number:27,name:"Cobalt"},Ni:{number:28,name:"Nickel"},Cu:{number:29,name:"Copper"},Zn:{number:30,name:"Zinc"},Ga:{number:31,
name:"Gallium"},Ge:{number:32,name:"Germanium"},As:{number:33,name:"Arsenic"},as:{number:33,name:"Arsenic"},Se:{number:34,name:"Selenium"},se:{number:34,name:"Selenium"},Br:{number:35,name:"Bromine"},Kr:{number:36,name:"Krypton"},Rb:{number:37,name:"Rubidium"},Sr:{number:38,name:"Strontium"},Y:{number:39,name:"Yttrium"},Zr:{number:40,name:"Zirconium"},Nb:{number:41,name:"Niobium"},Mo:{number:42,name:"Molybdenum"},Tc:{number:43,name:"Technetium"},Ru:{number:44,name:"Ruthenium"},Rh:{number:45,name:"Rhodium"},
Pd:{number:46,name:"Palladium"},Ag:{number:47,name:"Silver"},Cd:{number:48,name:"Cadmium"},In:{number:49,name:"Indium"},Sn:{number:50,name:"Tin"},Sb:{number:51,name:"Antimony"},Te:{number:52,name:"Tellurium"},I:{number:53,name:"Iodine"},Xe:{number:54,name:"Xenon"},Cs:{number:55,name:"Caesium"},Ba:{number:56,name:"Barium"},La:{number:57,name:"Lanthanum"},Ce:{number:58,name:"Cerium"},Pr:{number:59,name:"Praseodymium"},Nd:{number:60,name:"Neodymium"},Pm:{number:61,name:"Promethium"},Sm:{number:62,name:"Samarium"},
Eu:{number:63,name:"Europium"},Gd:{number:64,name:"Gadolinium"},Tb:{number:65,name:"Terbium"},Dy:{number:66,name:"Dysprosium"},Ho:{number:67,name:"Holmium"},Er:{number:68,name:"Erbium"},Tm:{number:69,name:"Thulium"},Yb:{number:70,name:"Ytterbium"},Lu:{number:71,name:"Lutetium"},Hf:{number:72,name:"Hafnium"},Ta:{number:73,name:"Tantalum"},W:{number:74,name:"Tungsten"},Re:{number:75,name:"Rhenium"},Os:{number:76,name:"Osmium"},Ir:{number:77,name:"Iridium"},Pt:{number:78,name:"Platinum"},Au:{number:79,
name:"Gold"},Hg:{number:80,name:"Mercury"},Tl:{number:81,name:"Thallium"},Pb:{number:82,name:"Lead"},Bi:{number:83,name:"Bismuth"},Po:{number:84,name:"Polonium"},At:{number:85,name:"Astatine"},Rn:{number:86,name:"Radon"},Fr:{number:87,name:"Francium"},Ra:{number:88,name:"Radium"},Ac:{number:89,name:"Actinium"},Th:{number:90,name:"Thorium"},Pa:{number:91,name:"Protactinium"},U:{number:92,name:"Uranium"},Np:{number:93,name:"Neptunium"},Pu:{number:94,name:"Plutonium"},Am:{number:95,name:"Americium"},
Cm:{number:96,name:"Curium"},Bk:{number:97,name:"Berkelium"},Cf:{number:98,name:"Californium"},Es:{number:99,name:"Einsteinium"},Fm:{number:100,name:"Fermium"},Md:{number:101,name:"Mendelevium"},No:{number:102,name:"Nobelium"},Lr:{number:103,name:"Lawrencium"},Rf:{number:104,name:"Rutherfordium"},Db:{number:105,name:"Dubnium"},Sg:{number:106,name:"Seaborgium"},Bh:{number:107,name:"Bohrium"},Hs:{number:108,name:"Hassium"},Mt:{number:109,name:"Meitnerium"},Ds:{number:110,name:"Darmstadtium"},Rg:{number:111,
name:"Roentgenium"},Cn:{number:112,name:"Copernicium"}};function xo(){this.b=[];this.h=[];this.Pl=false}a=xo.prototype;a.Fh=function(){return this.b.length};a.Aa=function(d){return ya(this.b,d)};a.q=function(d){return this.b[d]};a.Va=function(d){this.b.push(d)};a.Wa=function(d){d.source.Og.push(d.target);d.target.Og.push(d.source);this.h.push(d)};a.yb=function(d,e){for(var h=0,l=this.h.length;h<l;h++){var m=this.h[h];if(d===m.source&&e===m.target||e===m.source&&d===m.target)return m}return null};function yo(){this.fh=[];this.Dk=0;this.Og=[]}yo.prototype.De=function(d){var e=true;if(this.fh.length)if(ya(this.fh,d.A)===-1)e=false;d=this.Dk<=d.fb();return e&&d};yo.prototype.Qd=w("Og");function zo(d,e){this.Qg=[];this.source=d;this.target=e}zo.prototype.De=function(d){if(!this.Qg.length)return true;if(ya(this.Qg,d.fa)!==-1)return true;return false};function Ao(){}D("kemia.query.MoleculeCompiler",Ao,void 0);Ao.prototype.compile=function(d){for(var e=new xo,h=0,l=d.b.length;h<l;h++){var m=new yo;m.fh.push(d.q(h).A);e.Va(m)}h=0;for(l=d.fb();h<l;h++){m=d.h[h];var n=e.q(d.Aa(m.source)),o=e.q(d.Aa(m.target));n=new zo(n,o);n.Qg.push(m.fa);e.Wa(n)}return e};D("kemia.query.MoleculeCompiler.prototype.compile",Ao.prototype.compile,void 0);function Bo(){}D("kemia.query.SmilesCompiler",Bo,void 0);Bo.prototype.compile=function(d){d=to(d);return(new Ao).compile(d)};D("kemia.query.SmilesCompiler.prototype.compile",Bo.prototype.compile,void 0);

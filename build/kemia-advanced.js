function aa(){return function(){}}function ca(d){return function(e){this[d]=e}}function w(d){return function(){return this[d]}}function B(d){return function(){return d}}var a,C=this;function D(d,e,h){d=d.split(".");h=h||C;!(d[0]in h)&&h.execScript&&h.execScript("var "+d[0]);for(var l;d.length&&(l=d.shift());)if(!d.length&&e!==undefined)h[l]=e;else h=h[l]?h[l]:(h[l]={})}function da(d,e){d=d.split(".");e=e||C;for(var h;h=d.shift();)if(e[h])e=e[h];else return null;return e}function ea(){}
function fa(d){d.ra=function(){return d.Uj||(d.Uj=new d)}}
function ha(d){var e=typeof d;if(e=="object")if(d){if(d instanceof Array||!(d instanceof Object)&&Object.prototype.toString.call(d)=="[object Array]"||typeof d.length=="number"&&typeof d.splice!="undefined"&&typeof d.propertyIsEnumerable!="undefined"&&!d.propertyIsEnumerable("splice"))return"array";if(!(d instanceof Object)&&(Object.prototype.toString.call(d)=="[object Function]"||typeof d.call!="undefined"&&typeof d.propertyIsEnumerable!="undefined"&&!d.propertyIsEnumerable("call")))return"function"}else return"null";
else if(e=="function"&&typeof d.call=="undefined")return"object";return e}function ia(d){return ha(d)=="array"}function ja(d){var e=ha(d);return e=="array"||e=="object"&&typeof d.length=="number"}function F(d){return typeof d=="string"}function ka(d){return typeof d=="number"}function la(d){return ha(d)=="function"}function ma(d){d=ha(d);return d=="object"||d=="array"||d=="function"}function na(d){if(d.hasOwnProperty&&d.hasOwnProperty(oa))return d[oa];d[oa]||(d[oa]=++pa);return d[oa]}
var oa="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),pa=0;function qa(d){var e=ha(d);if(e=="object"||e=="array"){if(d.aa)return d.aa.call(d);e=e=="array"?[]:{};for(var h in d)e[h]=qa(d[h]);return e}return d}function ra(d,e){var h=e||C;if(arguments.length>2){var l=Array.prototype.slice.call(arguments,2);return function(){var m=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(m,l);return d.apply(h,m)}}else return function(){return d.apply(h,arguments)}}
function sa(d){var e=Array.prototype.slice.call(arguments,1);return function(){var h=Array.prototype.slice.call(arguments);h.unshift.apply(h,e);return d.apply(this,h)}}var ta=Date.now||function(){return+new Date};function G(d,e){e=e||{};for(var h in e)d=d.replace(new RegExp("\\{\\$"+h+"\\}","gi"),e[h]);return d}function ua(d,e,h){D(d,e,h)}function H(d,e){function h(){}h.prototype=e.prototype;d.g=e.prototype;d.prototype=new h;d.prototype.constructor=d};function va(){}va.prototype.pg=false;va.prototype.ca=function(){if(!this.pg){this.pg=true;this.k()}};va.prototype.k=aa();var wa=Array.prototype,xa=wa.indexOf?function(d,e,h){return wa.indexOf.call(d,e,h)}:function(d,e,h){h=h==null?0:h<0?Math.max(0,d.length+h):h;if(F(d)){if(!F(e)||e.length!=1)return-1;return d.indexOf(e,h)}for(h=h;h<d.length;h++)if(h in d&&d[h]===e)return h;return-1},I=wa.forEach?function(d,e,h){wa.forEach.call(d,e,h)}:function(d,e,h){for(var l=d.length,m=F(d)?d.split(""):d,n=0;n<l;n++)n in m&&e.call(h,m[n],n,d)},ya=wa.filter?function(d,e,h){return wa.filter.call(d,e,h)}:function(d,e,h){for(var l=d.length,
m=[],n=0,o=F(d)?d.split(""):d,q=0;q<l;q++)if(q in o){var s=o[q];if(e.call(h,s,q,d))m[n++]=s}return m},J=wa.map?function(d,e,h){return wa.map.call(d,e,h)}:function(d,e,h){for(var l=d.length,m=new Array(l),n=F(d)?d.split(""):d,o=0;o<l;o++)if(o in n)m[o]=e.call(h,n[o],o,d);return m};function za(d,e,h,l){if(d.reduce)return l?d.reduce(ra(e,l),h):d.reduce(e,h);var m=h;I(d,function(n,o){m=e.call(l,m,n,o,d)});return m}
var Aa=wa.some?function(d,e,h){return wa.some.call(d,e,h)}:function(d,e,h){for(var l=d.length,m=F(d)?d.split(""):d,n=0;n<l;n++)if(n in m&&e.call(h,m[n],n,d))return true;return false},Ba=wa.every?function(d,e,h){return wa.every.call(d,e,h)}:function(d,e,h){for(var l=d.length,m=F(d)?d.split(""):d,n=0;n<l;n++)if(n in m&&!e.call(h,m[n],n,d))return false;return true};
function Ca(d,e,h){a:{for(var l=d.length,m=F(d)?d.split(""):d,n=0;n<l;n++)if(n in m&&e.call(h,m[n],n,d)){e=n;break a}e=-1}return e<0?null:F(d)?d.charAt(e):d[e]}function K(d,e){return xa(d,e)>=0}function Da(d,e,h){Fa(d,h,0,e)}function Ga(d,e){e=xa(d,e);var h;if(h=e>=0)Ha(d,e);return h}function Ha(d,e){return wa.splice.call(d,e,1).length==1}function Ia(){return wa.concat.apply(wa,arguments)}function Ja(d){if(ia(d))return Ia(d);else{for(var e=[],h=0,l=d.length;h<l;h++)e[h]=d[h];return e}}
function Ka(d){for(var e=1;e<arguments.length;e++){var h=arguments[e],l;if(ia(h)||(l=ja(h))&&h.hasOwnProperty("callee"))d.push.apply(d,h);else if(l)for(var m=d.length,n=h.length,o=0;o<n;o++)d[m+o]=h[o];else d.push(h)}}function Fa(d){return wa.splice.apply(d,La(arguments,1))}function La(d,e,h){return arguments.length<=2?wa.slice.call(d,e):wa.slice.call(d,e,h)}
function Ma(d,e){e=e||d;for(var h={},l=0,m=0;m<d.length;){var n=d[m++],o=ma(n)?na(n):n;if(!Object.prototype.hasOwnProperty.call(h,o)){h[o]=true;e[l++]=n}}e.length=l}function Na(d,e,h){if(!ja(d)||!ja(e)||d.length!=e.length)return false;var l=d.length;h=h||Oa;for(var m=0;m<l;m++)if(!h(d[m],e[m]))return false;return true}function Pa(d,e){return d>e?1:d<e?-1:0}function Oa(d,e){return d===e}function Qa(d,e){for(var h=[],l=0;l<e;l++)h[l]=d;return h}
function Ra(){for(var d=[],e=0;e<arguments.length;e++){var h=arguments[e];ia(h)?d.push.apply(d,Ra.apply(null,h)):d.push(h)}return d};function Sa(d,e){this.type=d;this.currentTarget=this.target=e}H(Sa,va);a=Sa.prototype;a.k=function(){delete this.type;delete this.target;delete this.currentTarget};a.ad=false;a.ee=true;a.stopPropagation=function(){this.ad=true};a.preventDefault=function(){this.ee=false};function Ta(d){d.preventDefault()};function Ua(d,e){var h=d.length-e.length;return h>=0&&d.indexOf(e,h)==h}function Va(d){return d.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function Wa(d,e){if(e)return d.replace(Xa,"&amp;").replace(Ya,"&lt;").replace(Za,"&gt;").replace($a,"&quot;");else{if(!ab.test(d))return d;if(d.indexOf("&")!=-1)d=d.replace(Xa,"&amp;");if(d.indexOf("<")!=-1)d=d.replace(Ya,"&lt;");if(d.indexOf(">")!=-1)d=d.replace(Za,"&gt;");if(d.indexOf('"')!=-1)d=d.replace($a,"&quot;");return d}}
var Xa=/&/g,Ya=/</g,Za=/>/g,$a=/\"/g,ab=/[&<>\"]/;
function bb(d,e){var h=0;d=Va(String(d)).split(".");e=Va(String(e)).split(".");for(var l=Math.max(d.length,e.length),m=0;h==0&&m<l;m++){var n=d[m]||"",o=e[m]||"",q=new RegExp("(\\d*)(\\D*)","g"),s=new RegExp("(\\d*)(\\D*)","g");do{var t=q.exec(n)||["","",""],u=s.exec(o)||["","",""];if(t[0].length==0&&u[0].length==0)break;h=db(t[1].length==0?0:parseInt(t[1],10),u[1].length==0?0:parseInt(u[1],10))||db(t[2].length==0,u[2].length==0)||db(t[2],u[2])}while(h==0)}return h}
function db(d,e){if(d<e)return-1;else if(d>e)return 1;return 0}var eb=Math.random()*2147483648|0;var fb,gb,hb,ib,jb,kb;function lb(){return C.navigator?C.navigator.userAgent:null}function mb(){return C.navigator}jb=ib=hb=gb=fb=false;var nb;if(nb=lb()){var ob=mb();fb=nb.indexOf("Opera")==0;gb=!fb&&nb.indexOf("MSIE")!=-1;ib=(hb=!fb&&nb.indexOf("WebKit")!=-1)&&nb.indexOf("Mobile")!=-1;jb=!fb&&!hb&&ob.product=="Gecko"}var pb=fb,L=gb,M=jb,qb=hb,rb=ib,sb=mb();kb=(sb&&sb.platform||"").indexOf("Mac")!=-1;var tb=!!mb()&&(mb().appVersion||"").indexOf("X11")!=-1,ub,vb="",wb;
if(pb&&C.opera){var xb=C.opera.version;vb=typeof xb=="function"?xb():xb}else{if(M)wb=/rv\:([^\);]+)(\)|;)/;else if(L)wb=/MSIE\s+([^\);]+)(\)|;)/;else if(qb)wb=/WebKit\/(\S+)/;if(wb){var yb=wb.exec(lb());vb=yb?yb[1]:""}}ub=vb;var zb={};function Ab(d){return zb[d]||(zb[d]=bb(ub,d)>=0)};function Bb(d,e){d&&this.we(d,e)}H(Bb,Sa);var Cb=[1,4,2];a=Bb.prototype;a.target=null;a.relatedTarget=null;a.offsetX=0;a.offsetY=0;a.clientX=0;a.clientY=0;a.screenX=0;a.screenY=0;a.button=0;a.keyCode=0;a.charCode=0;a.ctrlKey=false;a.altKey=false;a.shiftKey=false;a.metaKey=false;a.jk=false;a.Dc=null;
a.we=function(d,e){var h=this.type=d.type;this.target=d.target||d.srcElement;this.currentTarget=e;if(e=d.relatedTarget){if(M)try{e=e.nodeName&&e}catch(l){e=null}}else if(h=="mouseover")e=d.fromElement;else if(h=="mouseout")e=d.toElement;this.relatedTarget=e;this.offsetX=d.offsetX!==undefined?d.offsetX:d.layerX;this.offsetY=d.offsetY!==undefined?d.offsetY:d.layerY;this.clientX=d.clientX!==undefined?d.clientX:d.pageX;this.clientY=d.clientY!==undefined?d.clientY:d.pageY;this.screenX=d.screenX||0;this.screenY=
d.screenY||0;this.button=d.button;this.keyCode=d.keyCode||0;this.charCode=d.charCode||(h=="keypress"?d.keyCode:0);this.ctrlKey=d.ctrlKey;this.altKey=d.altKey;this.shiftKey=d.shiftKey;this.metaKey=d.metaKey;this.jk=kb?d.metaKey:d.ctrlKey;this.Dc=d;delete this.ee;delete this.ad};function Db(d,e){return L?d.type=="click"?e==0:!!(d.Dc.button&Cb[e]):d.Dc.button==e}Bb.prototype.stopPropagation=function(){this.ad=true;if(this.Dc.stopPropagation)this.Dc.stopPropagation();else this.Dc.cancelBubble=true};
var Eb=L&&!Ab("8");Bb.prototype.preventDefault=function(){this.ee=false;var d=this.Dc;if(d.preventDefault)d.preventDefault();else{d.returnValue=false;if(Eb)try{if(d.ctrlKey||d.keyCode>=112&&d.keyCode<=123)d.keyCode=-1}catch(e){}}};Bb.prototype.k=function(){Bb.g.k.call(this);this.relatedTarget=this.currentTarget=this.target=this.Dc=null};function Fb(){}var Gb=0;a=Fb.prototype;a.key=0;a.ce=false;a.yh=false;a.we=function(d,e,h,l,m,n){if(la(d))this.ai=true;else if(d&&d.handleEvent&&la(d.handleEvent))this.ai=false;else throw Error("Invalid listener argument");this.Xd=d;this.ki=e;this.src=h;this.type=l;this.capture=!!m;this.tf=n;this.yh=false;this.key=++Gb;this.ce=false};a.handleEvent=function(d){if(this.ai)return this.Xd.call(this.tf||this.src,d);return this.Xd.handleEvent.call(this.Xd,d)};function Hb(d,e){this.ei=e;this.qd=[];if(d>this.ei)throw Error("[goog.structs.SimplePool] Initial cannot be greater than max");for(e=0;e<d;e++)this.qd.push(this.xc?this.xc():{})}H(Hb,va);Hb.prototype.xc=null;Hb.prototype.Lh=null;function Ib(d){if(d.qd.length)return d.qd.pop();return d.xc?d.xc():{}}function Jb(d,e){d.qd.length<d.ei?d.qd.push(e):Kb(d,e)}function Kb(d,e){if(d.Lh)d.Lh(e);else if(la(e.ca))e.ca();else for(var h in e)delete e[h]}
Hb.prototype.k=function(){Hb.g.k.call(this);for(var d=this.qd;d.length;)Kb(this,d.pop());delete this.qd};var Lb;var Mb=(Lb="ScriptEngine"in C&&C.ScriptEngine()=="JScript")?C.ScriptEngineMajorVersion()+"."+C.ScriptEngineMinorVersion()+"."+C.ScriptEngineBuildVersion():"0";var Nb,Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,Wb,Xb;
(function(){function d(){return{M:0,$b:0}}function e(){return[]}function h(){function A(E){return o.call(A.src,A.key,E)}return A}function l(){return new Fb}function m(){return new Bb}var n=Lb&&!(bb(Mb,"5.7")>=0),o;Sb=function(A){o=A};if(n){Nb=function(){return Ib(q)};Ob=function(A){Jb(q,A)};Pb=function(){return Ib(s)};Qb=function(A){Jb(s,A)};Rb=function(){return Ib(t)};Tb=function(){Jb(t,h())};Ub=function(){return Ib(u)};Vb=function(A){Jb(u,A)};Wb=function(){return Ib(v)};Xb=function(A){Jb(v,A)};
var q=new Hb(0,600);q.xc=d;var s=new Hb(0,600);s.xc=e;var t=new Hb(0,600);t.xc=h;var u=new Hb(0,600);u.xc=l;var v=new Hb(0,600);v.xc=m}else{Nb=d;Ob=ea;Pb=e;Qb=ea;Rb=h;Tb=ea;Ub=l;Vb=ea;Wb=m;Xb=ea}})();function Yb(d,e,h){for(var l in d)e.call(h,d[l],l,d)}function Zb(d){var e=[],h=0;for(var l in d)e[h++]=d[l];return e}function $b(d){var e=[],h=0;for(var l in d)e[h++]=l;return e}function ac(d,e){var h;if(h=e in d)delete d[e];return h}function cc(d,e,h){if(e in d)throw Error('The object already contains the key "'+e+'"');d[e]=h}function dc(d,e,h){if(e in d)return d[e];return h}function ec(d){var e={};for(var h in d)e[d[h]]=h;return e}
var fc=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];function gc(d){for(var e,h,l=1;l<arguments.length;l++){h=arguments[l];for(e in h)d[e]=h[e];for(var m=0;m<fc.length;m++){e=fc[m];if(Object.prototype.hasOwnProperty.call(h,e))d[e]=h[e]}}}
function hc(){var d=arguments.length;if(d==1&&ia(arguments[0]))return hc.apply(null,arguments[0]);if(d%2)throw Error("Uneven number of arguments");for(var e={},h=0;h<d;h+=2)e[arguments[h]]=arguments[h+1];return e};var ic={},jc={},kc={},lc={};
function mc(d,e,h,l,m){if(e)if(ia(e)){for(var n=0;n<e.length;n++)mc(d,e[n],h,l,m);return null}else{l=!!l;var o=jc;e in o||(o[e]=Nb());o=o[e];if(!(l in o)){o[l]=Nb();o.M++}o=o[l];var q=na(d),s;o.$b++;if(o[q]){s=o[q];for(n=0;n<s.length;n++){o=s[n];if(o.Xd==h&&o.tf==m){if(o.ce)break;return s[n].key}}}else{s=o[q]=Pb();o.M++}n=Rb();n.src=d;o=Ub();o.we(h,n,d,e,l,m);h=o.key;n.key=h;s.push(o);ic[h]=o;kc[q]||(kc[q]=Pb());kc[q].push(o);if(d.addEventListener){if(d==C||!d.mg)d.addEventListener(e,n,l)}else d.attachEvent(nc(e),
n);return h}else throw Error("Invalid event type");}function pc(d,e,h,l,m){if(ia(e)){for(var n=0;n<e.length;n++)pc(d,e[n],h,l,m);return null}l=!!l;d=qc(d,e,l);if(!d)return false;for(n=0;n<d.length;n++)if(d[n].Xd==h&&d[n].capture==l&&d[n].tf==m)return rc(d[n].key);return false}
function rc(d){if(!ic[d])return false;var e=ic[d];if(e.ce)return false;var h=e.src,l=e.type,m=e.ki,n=e.capture;if(h.removeEventListener){if(h==C||!h.mg)h.removeEventListener(l,m,n)}else h.detachEvent&&h.detachEvent(nc(l),m);h=na(h);m=jc[l][n][h];if(kc[h]){var o=kc[h];Ga(o,e);o.length==0&&delete kc[h]}e.ce=true;m.hi=true;sc(l,n,h,m);delete ic[d];return true}
function sc(d,e,h,l){if(!l.Kf)if(l.hi){for(var m=0,n=0;m<l.length;m++)if(l[m].ce){var o=l[m].ki;o.src=null;Tb(o);Vb(l[m])}else{if(m!=n)l[n]=l[m];n++}l.length=n;l.hi=false;if(n==0){Qb(l);delete jc[d][e][h];jc[d][e].M--;if(jc[d][e].M==0){Ob(jc[d][e]);delete jc[d][e];jc[d].M--}if(jc[d].M==0){Ob(jc[d]);delete jc[d]}}}}
function tc(d,e,h){var l=0,m=d==null,n=e==null,o=h==null;h=!!h;if(m)Yb(kc,function(s){for(var t=s.length-1;t>=0;t--){var u=s[t];if((n||e==u.type)&&(o||h==u.capture)){rc(u.key);l++}}});else{d=na(d);if(kc[d]){d=kc[d];for(m=d.length-1;m>=0;m--){var q=d[m];if((n||e==q.type)&&(o||h==q.capture)){rc(q.key);l++}}}}return l}function qc(d,e,h){var l=jc;if(e in l){l=l[e];if(h in l){l=l[h];d=na(d);if(l[d])return l[d]}}return null}function nc(d){if(d in lc)return lc[d];return lc[d]="on"+d}
function uc(d,e,h,l,m){var n=1;e=na(e);if(d[e]){d.$b--;d=d[e];if(d.Kf)d.Kf++;else d.Kf=1;try{for(var o=d.length,q=0;q<o;q++){var s=d[q];if(s&&!s.ce)n&=vc(s,m)!==false}}finally{d.Kf--;sc(h,l,e,d)}}return Boolean(n)}function vc(d,e){e=d.handleEvent(e);d.yh&&rc(d.key);return e}
Sb(function(d,e){if(!ic[d])return true;d=ic[d];var h=d.type,l=jc;if(!(h in l))return true;l=l[h];var m,n;if(L){m=e||da("window.event");e=true in l;var o=false in l;if(e){if(m.keyCode<0||m.returnValue!=undefined)return true;a:{var q=false;if(m.keyCode==0)try{m.keyCode=-1;break a}catch(s){q=true}if(q||m.returnValue==undefined)m.returnValue=true}}q=Wb();q.we(m,this);m=true;try{if(e){for(var t=Pb(),u=q.currentTarget;u;u=u.parentNode)t.push(u);n=l[true];n.$b=n.M;for(var v=t.length-1;!q.ad&&v>=0&&n.$b;v--){q.currentTarget=
t[v];m&=uc(n,t[v],h,true,q)}if(o){n=l[false];n.$b=n.M;for(v=0;!q.ad&&v<t.length&&n.$b;v++){q.currentTarget=t[v];m&=uc(n,t[v],h,false,q)}}}else m=vc(d,q)}finally{if(t){t.length=0;Qb(t)}q.ca();Xb(q)}return m}n=new Bb(e,this);try{m=vc(d,n)}finally{n.ca()}return m});function wc(){}H(wc,va);a=wc.prototype;a.mg=true;a.Sf=null;a.Lc=ca("Sf");a.addEventListener=function(d,e,h,l){mc(this,d,e,h,l)};a.removeEventListener=function(d,e,h,l){pc(this,d,e,h,l)};
a.dispatchEvent=function(d){d=d;if(F(d))d=new Sa(d,this);else if(d instanceof Sa)d.target=d.target||this;else{var e=d;d=new Sa(d.type,this);gc(d,e)}e=1;var h,l=d.type,m=jc;if(l in m){m=m[l];l=true in m;var n;if(l){h=[];for(n=this;n;n=n.Sf)h.push(n);n=m[true];n.$b=n.M;for(var o=h.length-1;!d.ad&&o>=0&&n.$b;o--){d.currentTarget=h[o];e&=uc(n,h[o],d.type,true,d)&&d.ee!=false}}if(false in m){n=m[false];n.$b=n.M;if(l)for(o=0;!d.ad&&o<h.length&&n.$b;o++){d.currentTarget=h[o];e&=uc(n,h[o],d.type,false,d)&&
d.ee!=false}else for(h=this;!d.ad&&h&&n.$b;h=h.Sf){d.currentTarget=h;e&=uc(n,h,d.type,false,d)&&d.ee!=false}}d=Boolean(e)}else d=true;return d};a.k=function(){wc.g.k.call(this);tc(this);this.Sf=null};function xc(d){if(typeof d.mb=="function")return d.mb();if(ja(d)||F(d))return d.length;var e=0;for(var h in d)e++;return e}function yc(d){if(typeof d.fa=="function")return d.fa();if(F(d))return d.split("");if(ja(d)){for(var e=[],h=d.length,l=0;l<h;l++)e.push(d[l]);return e}return Zb(d)}function zc(d){if(typeof d.vg=="function")return d.vg();if(typeof d.fa!="function"){if(ja(d)||F(d)){var e=[];d=d.length;for(var h=0;h<d;h++)e.push(h);return e}return $b(d)}}
function Ac(d,e){if(typeof d.contains=="function")return d.contains(e);if(typeof d.Eh=="function")return d.Eh(e);if(ja(d)||F(d))return K(d,e);a:{for(var h in d)if(d[h]==e){d=true;break a}d=false}return d}function Bc(d,e,h){if(typeof d.forEach=="function")d.forEach(e,h);else if(ja(d)||F(d))I(d,e,h);else for(var l=zc(d),m=yc(d),n=m.length,o=0;o<n;o++)e.call(h,m[o],l&&l[o],d)}
function Cc(d,e,h){if(typeof d.every=="function")return d.every(e,h);if(ja(d)||F(d))return Ba(d,e,h);for(var l=zc(d),m=yc(d),n=m.length,o=0;o<n;o++)if(!e.call(h,m[o],l&&l[o],d))return false;return true};function Dc(d){this.ja={};this.T=[];var e=arguments.length;if(e>1){if(e%2)throw Error("Uneven number of arguments");for(var h=0;h<e;h+=2)this.ya(arguments[h],arguments[h+1])}else d&&this.Ed(d)}a=Dc.prototype;a.M=0;a.lh=0;a.mb=w("M");a.fa=function(){Ec(this);for(var d=[],e=0;e<this.T.length;e++)d.push(this.ja[this.T[e]]);return d};a.vg=function(){Ec(this);return this.T.concat()};a.Eh=function(d){for(var e=0;e<this.T.length;e++){var h=this.T[e];if(Fc(this.ja,h)&&this.ja[h]==d)return true}return false};
a.Kd=function(d,e){if(this===d)return true;if(this.M!=d.mb())return false;e=e||Gc;Ec(this);for(var h,l=0;h=this.T[l];l++)if(!e(this.m(h),d.m(h)))return false;return true};function Gc(d,e){return d===e}Dc.prototype.clear=function(){this.ja={};this.lh=this.M=this.T.length=0};Dc.prototype.remove=function(d){if(Fc(this.ja,d)){delete this.ja[d];this.M--;this.lh++;this.T.length>2*this.M&&Ec(this);return true}return false};
function Ec(d){if(d.M!=d.T.length){for(var e=0,h=0;e<d.T.length;){var l=d.T[e];if(Fc(d.ja,l))d.T[h++]=l;e++}d.T.length=h}if(d.M!=d.T.length){var m={};for(h=e=0;e<d.T.length;){l=d.T[e];if(!Fc(m,l)){d.T[h++]=l;m[l]=1}e++}d.T.length=h}}Dc.prototype.m=function(d,e){if(Fc(this.ja,d))return this.ja[d];return e};Dc.prototype.ya=function(d,e){if(!Fc(this.ja,d)){this.M++;this.T.push(d);this.lh++}this.ja[d]=e};
Dc.prototype.Ed=function(d){var e;if(d instanceof Dc){e=d.vg();d=d.fa()}else{e=$b(d);d=Zb(d)}for(var h=0;h<e.length;h++)this.ya(e[h],d[h])};Dc.prototype.aa=function(){return new Dc(this)};function Fc(d,e){return Object.prototype.hasOwnProperty.call(d,e)};function Hc(d){this.ja=new Dc;d&&this.Ed(d)}function Ic(d){var e=typeof d;return e=="object"&&d||e=="function"?"o"+na(d):e.substr(0,1)+d}a=Hc.prototype;a.mb=function(){return this.ja.mb()};a.add=function(d){this.ja.ya(Ic(d),d)};a.Ed=function(d){d=yc(d);for(var e=d.length,h=0;h<e;h++)this.add(d[h])};a.Ke=function(d){d=yc(d);for(var e=d.length,h=0;h<e;h++)this.remove(d[h])};a.remove=function(d){return this.ja.remove(Ic(d))};a.clear=function(){this.ja.clear()};
a.contains=function(d){d=Ic(d);return Fc(this.ja.ja,d)};a.Yh=function(d){var e=new Hc;d=yc(d);for(var h=0;h<d.length;h++){var l=d[h];this.contains(l)&&e.add(l)}return e};a.fa=function(){return this.ja.fa()};a.aa=function(){return new Hc(this)};a.Kd=function(d){return this.mb()==xc(d)&&Jc(this,d)};function Jc(d,e){var h=xc(e);if(d.mb()>h)return false;if(!(e instanceof Hc)&&h>5)e=new Hc(e);return Cc(d,function(l){return Ac(e,l)})};function Kc(d){return Lc(d||arguments.callee.caller,[])}
function Lc(d,e){var h=[];if(K(e,d))h.push("[...circular reference...]");else if(d&&e.length<50){h.push(Mc(d)+"(");for(var l=d.arguments,m=0;m<l.length;m++){m>0&&h.push(", ");var n;n=l[m];switch(typeof n){case "object":n=n?"object":"null";break;case "string":n=n;break;case "number":n=String(n);break;case "boolean":n=n?"true":"false";break;case "function":n=(n=Mc(n))?n:"[fn]";break;case "undefined":default:n=typeof n;break}if(n.length>40)n=n.substr(0,40)+"...";h.push(n)}e.push(d);h.push(")\n");try{h.push(Lc(d.caller,
e))}catch(o){h.push("[exception trying to get caller]\n")}}else d?h.push("[...long stack...]"):h.push("[end]");return h.join("")}function Mc(d){d=String(d);if(!Nc[d]){var e=/function ([^\(]+)/.exec(d);Nc[d]=e?e[1]:"[Anonymous]"}return Nc[d]}var Nc={};function Oc(d,e,h,l,m){this.dm=typeof m=="number"?m:Pc++;this.im=l||ta();this.Ae=d;this.Wl=e;this.Ul=h}Oc.prototype.mj=null;Oc.prototype.lj=null;var Pc=0;Oc.prototype.qi=ca("Ae");function Qc(d){this.qb=d}Qc.prototype.ma=null;Qc.prototype.Ae=null;Qc.prototype.ha=null;Qc.prototype.Sh=null;function Rc(d,e){this.name=d;this.value=e}Rc.prototype.toString=w("name");var Sc=new Rc("SEVERE",1E3),Tc=new Rc("WARNING",900),Uc=new Rc("INFO",800),Vc=new Rc("CONFIG",700);Qc.prototype.getName=w("qb");Qc.prototype.qi=ca("Ae");function Wc(d,e){if(d.Ae)return e.value>=d.Ae.value;if(d.ma)return Wc(d.ma,e);return false}Qc.prototype.log=function(d,e,h){Wc(this,d)&&Xc(this,this.rj(d,e,h))};
Qc.prototype.rj=function(d,e,h){var l=new Oc(d,String(e),this.qb);if(h){l.mj=h;var m;var n=arguments.callee.caller;try{var o,q=da("window.location.href");o=typeof h=="string"?{message:h,name:"Unknown error",lineNumber:"Not available",fileName:q,stack:"Not available"}:!h.lineNumber||!h.fileName||!h.stack?{message:h.message,name:h.name,lineNumber:h.lineNumber||h.Sl||"Not available",fileName:h.fileName||h.filename||h.sourceURL||q,stack:h.stack||"Not available"}:h;m="Message: "+Wa(o.message)+'\nUrl: <a href="view-source:'+
o.fileName+'" target="_new">'+o.fileName+"</a>\nLine: "+o.lineNumber+"\n\nBrowser stack:\n"+Wa(o.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Wa(Kc(n)+"-> ")}catch(s){m="Exception trying to expose exception! You win, we lose. "+s}l.lj=m}return l};function Yc(d,e,h){d.log(Sc,e,h)}Qc.prototype.info=function(d,e){this.log(Uc,d,e)};Qc.prototype.i=function(d,e){this.log(Vc,d,e)};function Xc(d,e){for(d=d;d;){var h=d;if(h.Sh)for(var l=0,m=void 0;m=h.Sh[l];l++)m(e);d=d.ma}}var Zc={},$c=null;
function N(d){if(!$c){$c=new Qc("");Zc[""]=$c;$c.qi(Vc)}return Zc[d]||bd(d)}function bd(d){var e=new Qc(d),h=d.lastIndexOf("."),l=d.substr(0,h);h=d.substr(h+1);l=N(l);if(!l.ha)l.ha={};l.ha[h]=e;e.ma=l;return Zc[d]=e};function cd(d){this.Lc(d)}H(cd,wc);cd.prototype.Bb=function(){this.dispatchEvent(dd)};cd.prototype.Ab=function(){this.dispatchEvent(ed)};var dd="reaction_mouseover",ed="reaction_mouseout";cd.prototype.r=N("kemia.controller.ReactionController");function fd(d,e,h,l){this.Qc=d;this.Q=e;this.i=new Dc(l);h&&this.i.Ed(h)}fd.prototype.r=N("kemia.view.Renderer");function gd(d,e){var h=hd(e).sd(),l=h.width,m=d.Q.sd();h.scale(h.width/h.height>m.width/m.height?m.width/h.width:m.height/h.height);d=d.Uf*h.width/l;h=Math.max(e.top,e.bottom);return new id(d,0,0,-d,-Math.min(e.left,e.right)*d,h*d)};function jd(d){this.Lc(d)}H(jd,wc);jd.prototype.Bb=function(d){this.dispatchEvent(new kd(this,d,ld))};jd.prototype.Ab=function(d){this.dispatchEvent(new kd(this,d,md))};jd.prototype.wa=function(d){this.dispatchEvent(new kd(this,d,nd))};var ld="molecule_mouseover",md="molecule_mouseout",nd="molecule_mousedown";function kd(d,e,h){Sa.call(this,h,d);this.G=e}jd.prototype.r=N("kemia.controller.MoleculeController");function od(d){this.Lc(d)}H(od,wc);od.prototype.r=N("kemia.controller.ArrowController");od.prototype.Bb=function(d,e){this.dispatchEvent(new pd(this,d,e.currentTarget,qd))};od.prototype.Ab=function(d,e){this.dispatchEvent(new pd(this,d,e.currentTarget,rd))};od.prototype.wa=function(d,e){this.dispatchEvent(new pd(this,d,e,sd))};var qd="arrow_mouseover",rd="arrow_mouseout",sd="arrow_mousedown";function pd(d,e,h,l){Sa.call(this,l,d);this.a=e;this.Xa=h}H(pd,Sa);function td(d){this.Lc(d)}H(td,wc);td.prototype.r=N("kemia.controller.PlusController");td.prototype.Bb=function(d){this.dispatchEvent(new ud(this,d,vd))};td.prototype.Ab=function(d){this.dispatchEvent(new ud(this,d,wd))};td.prototype.wa=function(d,e){this.r.info("handleMouseDown");e.stopPropagation();this.dispatchEvent(new ud(this,d,xd))};var vd="plus_mouseover",wd="plus_mouseout",xd="plus_mousedown";function ud(d,e,h){Sa.call(this,h,d);this.a=e}H(ud,Sa);function yd(d){this.Lc(d)}H(yd,wc);yd.prototype.r=N("kemia.controller.BondController");yd.prototype.Bb=function(d){this.dispatchEvent(new zd(this,d,Ad))};yd.prototype.Ab=function(d){this.dispatchEvent(new zd(this,d,Bd))};yd.prototype.wa=function(d){this.dispatchEvent(new zd(this,d,Cd))};var Ad="bond_mouseover",Bd="bond_mouseout",Cd="bond_mousedown";function zd(d,e,h){Sa.call(this,h,d);this.wh=e}H(zd,Sa);function O(d,e){this.x=d!==undefined?d:0;this.y=e!==undefined?e:0}O.prototype.aa=function(){return new O(this.x,this.y)};O.prototype.toString=function(){return"("+this.x+", "+this.y+")"};function Dd(d,e){var h=d.x-e.x;d=d.y-e.y;return Math.sqrt(h*h+d*d)}function Ed(d,e){return new O(d.x-e.x,d.y-e.y)}function Fd(d,e){return new O(d.x+e.x,d.y+e.y)};function Gd(d,e,h,l){this.top=d;this.right=e;this.bottom=h;this.left=l}function Hd(){for(var d=new Gd(arguments[0].y,arguments[0].x,arguments[0].y,arguments[0].x),e=1;e<arguments.length;e++){var h=arguments[e];d.top=Math.min(d.top,h.y);d.right=Math.max(d.right,h.x);d.bottom=Math.max(d.bottom,h.y);d.left=Math.min(d.left,h.x)}return d}Gd.prototype.aa=function(){return new Gd(this.top,this.right,this.bottom,this.left)};
Gd.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};Gd.prototype.contains=function(d){return!this||!d?false:d instanceof Gd?d.left>=this.left&&d.right<=this.right&&d.top>=this.top&&d.bottom<=this.bottom:d.x>=this.left&&d.x<=this.right&&d.y>=this.top&&d.y<=this.bottom};
Gd.prototype.expand=function(d,e,h,l){if(ma(d)){this.top-=d.top;this.right+=d.right;this.bottom+=d.bottom;this.left-=d.left}else{this.top-=d;this.right+=e;this.bottom+=h;this.left-=l}return this};function Id(d,e){if(d==e)return true;if(!d||!e)return false;return d.top==e.top&&d.right==e.right&&d.bottom==e.bottom&&d.left==e.left};function Jd(d,e){this.width=d;this.height=e}a=Jd.prototype;a.aa=function(){return new Jd(this.width,this.height)};a.toString=function(){return"("+this.width+" x "+this.height+")"};a.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};a.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};a.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
a.scale=function(d){this.width*=d;this.height*=d;return this};function Kd(d,e,h,l){this.left=d;this.top=e;this.width=h;this.height=l}Kd.prototype.aa=function(){return new Kd(this.left,this.top,this.width,this.height)};function hd(d){return new Kd(d.left,d.top,d.right-d.left,d.bottom-d.top)}Kd.prototype.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};
Kd.prototype.Yh=function(d){var e=Math.max(this.left,d.left),h=Math.min(this.left+this.width,d.left+d.width);if(e<=h){var l=Math.max(this.top,d.top);d=Math.min(this.top+this.height,d.top+d.height);if(l<=d){this.left=e;this.top=l;this.width=h-e;this.height=d-l;return true}}return false};
Kd.prototype.contains=function(d){return d instanceof Kd?this.left<=d.left&&this.left+this.width>=d.left+d.width&&this.top<=d.top&&this.top+this.height>=d.top+d.height:d.x>=this.left&&d.x<=this.left+this.width&&d.y>=this.top&&d.y<=this.top+this.height};Kd.prototype.sd=function(){return new Jd(this.width,this.height)};function Ld(d){d=d%360;return d*360<0?d+360:d}function Md(d){return d*Math.PI/180};function Nd(d,e,h,l){this.gd=d;this.hd=e;this.Bd=h;this.Dd=l}Nd.prototype.aa=function(){return new Nd(this.gd,this.hd,this.Bd,this.Dd)};Nd.prototype.Kd=function(d){return this.gd==d.gd&&this.hd==d.hd&&this.Bd==d.Bd&&this.Dd==d.Dd};function Od(d,e,h){e=e;if(e instanceof O){h=e.y;e=e.x}else h=h;var l=d.gd,m=d.hd,n=d.Bd-d.gd,o=d.Dd-d.hd;e=((e-l)*(d.Bd-l)+(h-m)*(d.Dd-m))/(n*n+o*o);return new O(d.gd+Math.min(Math.max(e,0),1)*(d.Bd-d.gd),d.hd+Math.min(Math.max(e,0),1)*(d.Dd-d.hd))};function Pd(d,e){Nd.call(this,d.x,d.y,e.x,e.y)}H(Pd,Nd);function Qd(d){return Math.atan2(d.Dd-d.hd,d.Bd-d.gd)};function Rd(d,e,h){fd.call(this,d,e,h,Sd)}H(Rd,fd);Rd.prototype.J=function(d,e){this.transform=e};
Rd.prototype.hb=function(d,e){var h=this.i.m("bond").stroke.width*2,l=this.i.m("highlight").color;h=new Td(h,l);l=this.i.m("highlight").radius*this.transform.ia;var m=-Ud(d)*180/Math.PI,n=m+90;m=m<=0?d.source.a.y<=d.target.a.y?180:-180:d.source.a.y>d.target.a.y?180:-180;d=P(this.transform,[d.source.a,d.target.a]);var o=new Vd;o.arc(d[0].x,d[0].y,l,l,n,m);o.arc(d[1].x,d[1].y,l,l,n,-m);e||(e=this.Q.od());this.Q.zc(o,h,null,e);return e};function Ud(d){return Qd(new Pd(d.source.a,d.target.a))}
function Wd(d){return d.A!="C"||d.fb()==1}var Sd={bond:{stroke:{width:2,color:"black"},fill:{color:"black"}},highlight:{radius:0.3,color:"blue"}};function Xd(d,e){this.x=Number(d)||0;this.y=Number(e)||0}H(Xd,O);function Yd(d){return new Xd(d.x,d.y)}Xd.prototype.aa=function(){return new Xd(this.x,this.y)};function Zd(d){return Math.sqrt(d.x*d.x+d.y*d.y)}Xd.prototype.scale=function(d){this.x*=d;this.y*=d;return this};function $d(d){d.x=-d.x;d.y=-d.y;return d}Xd.prototype.normalize=function(){return this.scale(1/Zd(this))};Xd.prototype.add=function(d){this.x+=d.x;this.y+=d.y;return this};
Xd.prototype.Kd=function(d){return this==d||!!d&&this.x==d.x&&this.y==d.y};function ae(d,e,h){Rd.call(this,d,e,h,ae.Id)}H(ae,Rd);ae.prototype.J=function(d,e,h){ae.g.J.call(this,d,e);var l=[d.source.a,d.target.a],m=Yd(Ed(l[1],l[0]));m.scale(1/Zd(m)*0.2);if(Wd(d.source))l[0]=Fd(l[0],m);if(Wd(d.target))l[1]=Ed(l[1],m);l=P(e,[l[0],l[1]]);h.moveTo(l[0].x,l[0].y);h.lineTo(l[1].x,l[1].y)};function be(d,e,h){Rd.call(this,d,e,h,be.Id)}H(be,Rd);
be.prototype.J=function(d,e,h){be.g.J.call(this,d,e);var l=ce(d);if(l){var m=Yd(Ed(d.target.a,d.source.a)),n=Zd(m),o=n/6;m.scale(1/n*o);n=new Xd(m.y,-m.x);o=Fd(d.source.a,n);l.fe.x==0&&l.fe.y==0&&de(l);((d.source.a.x-o.x)*(d.target.a.y-o.y)-(d.source.a.y-o.y)*(d.target.a.x-o.x))*((d.source.a.x-l.fe.x)*(d.target.a.y-l.fe.y)-(d.source.a.y-l.fe.y)*(d.target.a.x-l.fe.x))>0||$d(n);l=Fd(d.source.a,n);o=Fd(d.target.a,n);var q=d.source.a;n=d.target.a;if(Wd(d.source)){var s=m.aa();s.normalize();s.scale(0.2);
l=Fd(l,s);q=Fd(q,s)}else l=Fd(l,m);if(Wd(d.target)){s=m.aa();s.normalize();s.scale(0.2);o=Ed(o,s);n=Ed(n,s)}else o=Ed(o,m);d=P(e,[l,o,q,n])}else{m=Yd(Ed(d.target.a,d.source.a));n=Zd(m);o=n/12;m.scale(1/n*o);n=new Xd(m.y,-m.x);l=Fd(d.source.a,n);o=Fd(d.target.a,n);q=Ed(d.source.a,n);n=Ed(d.target.a,n);if(Wd(d.source)){s=m.aa();s.normalize();s.scale(0.2);l=Fd(l,s);q=Fd(q,s)}if(Wd(d.target)){s=m.aa();s.normalize();s.scale(0.2);o=Ed(o,s);n=Ed(n,s)}d=P(e,[l,o,q,n])}h.moveTo(d[0].x,d[0].y);h.lineTo(d[1].x,
d[1].y);h.moveTo(d[2].x,d[2].y);h.lineTo(d[3].x,d[3].y)};function ce(d){return Ca(ee(d.G),function(e){return K(e.h,this)},d)};function fe(d,e,h){Rd.call(this,d,e,h,fe.Id)}H(fe,Rd);
fe.prototype.J=function(d,e){group=fe.g.J.call(this,d,e);var h=this.i.m("bond").stroke.width;h=new Td(h,this.i.m("bond").stroke.color);var l=Ud(d),m=l+Math.PI/2;l=l-Math.PI/2;var n=Dd(d.source.a,d.target.a)/6;m=new id(1,0,0,1,Math.cos(m)*n,Math.sin(m)*n);l=new id(1,0,0,1,Math.cos(l)*n,Math.sin(l)*n);m=P(m,[d.source.a,d.target.a]);l=P(l,[d.source.a,d.target.a]);d=P(e,[d.source.a,d.target.a,m[0],m[1],l[0],l[1]]);e=new Vd;e.moveTo(d[0].x,d[0].y);e.lineTo(d[1].x,d[1].y);e.moveTo(d[2].x,d[2].y);e.lineTo(d[3].x,
d[3].y);e.moveTo(d[4].x,d[4].y);e.lineTo(d[5].x,d[5].y);this.Q.zc(e,h,null)};function ge(d,e,h){Rd.call(this,d,e,h,ge.Id)}H(ge,Rd);
ge.prototype.J=function(d,e){ge.g.J.call(this,d,e);var h=this.i.m("bond").stroke.width;h=new Td(h,this.i.m("bond").stroke.color);var l=Ud(d),m=l+Math.PI/2,n=l-Math.PI/2,o=Dd(d.source.a,d.target.a)/6,q=new id(1,0,0,1,Math.cos(m)*o/3,Math.sin(m)*o/3);l=new id(1,0,0,1,Math.cos(n)*o/3,Math.sin(n)*o/3);m=new id(1,0,0,1,Math.cos(m)*o,Math.sin(m)*o);n=new id(1,0,0,1,Math.cos(n)*o,Math.sin(n)*o);q=P(q,[d.source.a,d.target.a]);l=P(l,[d.source.a,d.target.a]);m=P(m,[d.source.a,d.target.a]);d=P(n,[d.source.a,
d.target.a]);e=P(e,[q[0],q[1],l[0],l[1],m[0],m[1],d[0],d[1]]);d=new Vd;d.moveTo(e[0].x,e[0].y);d.lineTo(e[1].x,e[1].y);d.moveTo(e[2].x,e[2].y);d.lineTo(e[3].x,e[3].y);d.moveTo(e[4].x,e[4].y);d.lineTo(e[5].x,e[5].y);d.moveTo(e[6].x,e[6].y);d.lineTo(e[7].x,e[7].y);this.Q.zc(d,h,null)};function he(d,e,h){Rd.call(this,d,e,h,he.Id)}H(he,Rd);
he.prototype.J=function(d,e,h){he.g.J.call(this,d,e);var l=this.i.m("bond").stroke.width/10,m=Ud(d),n=m+Math.PI/2;m=m-Math.PI/2;n=ie(new id(1,0,0,1,Math.cos(n)*l,Math.sin(n)*l),[d.target.a])[0];l=ie(new id(1,0,0,1,Math.cos(m)*l,Math.sin(m)*l),[d.target.a])[0];if(d.target.A!="C"){n.x=(n.x*2+d.source.a.x)/3;n.y=(n.y*2+d.source.a.y)/3;l.x=(l.x*2+d.source.a.x)/3;l.y=(l.y*2+d.source.a.y)/3}d=P(e,[d.source.a,n,l]);h.moveTo(d[0].x,d[0].y);h.lineTo(d[1].x,d[1].y);h.lineTo(d[2].x,d[2].y)};function je(d,e,h){Rd.call(this,d,e,h,je.Id)}H(je,Rd);
je.prototype.J=function(d,e,h){je.g.J.call(this,d,e);var l=this.i.m("bond").stroke.width/10,m=Ud(d),n=m+Math.PI/2;m=m-Math.PI/2;n=new id(1,0,0,1,Math.cos(n)*l,Math.sin(n)*l);l=new id(1,0,0,1,Math.cos(m)*l,Math.sin(m)*l);n=P(n,[d.source.a,d.target.a]);l=P(l,[d.source.a,d.target.a]);e=P(e,[n[0],n[1],l[0],l[1],d.source.a]);l=0;if(d.target.A!="C")l=1;for(d=0;d<7-l;d++){h.moveTo(((7-d)*e[4].x+d*e[1].x)/7,((7-d)*e[4].y+d*e[1].y)/7);h.lineTo(((7-d)*e[4].x+d*e[3].x)/7,((7-d)*e[4].y+d*e[3].y)/7)}};function ke(d,e,h){Rd.call(this,d,e,h,ke.Id)}H(ke,Rd);
ke.prototype.J=function(d,e){ke.g.J.call(this,d,e);var h=new Vd,l=this.i.m("bond").stroke.width/10,m=Ud(d),n=m+Math.PI/2;m=m-Math.PI/2;n=new id(1,0,0,1,Math.cos(n)*l,Math.sin(n)*l);l=new id(1,0,0,1,Math.cos(m)*l,Math.sin(m)*l);n=P(n,[d.source.a,d.target.a]);d=P(l,[d.source.a,d.target.a]);e=P(e,[n[0],n[1],d[0],d[1]]);d=new Td(this.i.m("bond").stroke.width,this.i.m("bond").stroke.color);h.moveTo(e[0].x,e[0].y);for(l=1;l<10;l++)l%2?h.lineTo(e[0].x+(e[1].x-e[0].x)*l/10,e[0].y+(e[1].y-e[0].y)*l/10):h.lineTo(e[2].x+
(e[3].x-e[2].x)*l/10,e[2].y+(e[3].y-e[2].y)*l/10);this.Q.zc(h,d,null)};var le={};var me={C:4,Si:4,N:3,P:3,O:2,S:2,H:1};function Q(d,e,h,l,m,n){this.A=d!==undefined?d:"C";this.a=new O(e!==undefined?e:0,h!==undefined?h:0);this.h=new Hc;this.Wa=l!==undefined?l:0;this.Ef=n!==undefined?n:0;this.dc=m!==undefined?m:false;this.Nl=null;this.Ia=new Array(3)}D("kemia.model.Atom",Q,void 0);Q.prototype.zj=w("A");D("kemia.model.Atom.prototype.getSymbol",Q.prototype.zj,void 0);Q.prototype.oj=w("Wa");D("kemia.model.Atom.prototype.getCharge",Q.prototype.oj,void 0);Q.prototype.fb=function(){return this.h.mb()};
Q.prototype.Uh=function(){var d=me[this.A],e=this.h.fa();e=za(e,function(l,m){return l+m.ea},0);var h=0;if(d)h=d-e+this.Wa;return h};D("kemia.model.Atom.prototype.hydrogenCount",Q.prototype.Uh,void 0);Q.prototype.Qd=function(){for(var d=this.h.fa(),e=[],h=0,l=d.length;h<l;h++)e.push(ne(d[h],this));return e};Q.prototype.aa=function(){return new Q(this.A,this.a.x,this.a.y,this.Wa,this.dc,this.Ef)};Q.prototype.Ib=function(d,e){this.Ia[d]=e};function S(d,e,h,l,m,n){this.source=d;this.target=e;this.ea=h!==undefined?h:oe;this.$=l!==undefined?l:pe;this.dc=m!==undefined?m:false;this.G=n!==undefined?n:null}D("kemia.model.Bond",S,void 0);function ne(d,e){if(e===d.source)return d.target;if(e===d.target)return d.source;return null}S.prototype.aa=function(){return new S(this.source,this.target,this.ea,this.$,this.dc,this.G)};var oe=1,pe=10;function qe(d,e,h){this.Qc=d;this.Q=e;this.i=new Dc;h&&this.i.Ed(h)}qe.prototype.r=N("kemia.view.BondRendererFactory");var re=ec({vj:oe,pj:2,Aj:3,sj:4}),se=ec({uj:pe,xj:11,tj:13,wj:12});a=qe.prototype;a.m=function(d){return this[re[d.ea]].apply(this,[d.$])};a.vj=function(d){return this[se[d]].apply(this)};a.uj=function(){if(!this.wi)this.wi=new ae(this.Qc,this.Q,this.i);return this.wi};a.xj=function(){if(!this.xi)this.xi=new he(this.Qc,this.Q,this.i);return this.xi};
a.tj=function(){if(!this.vi)this.vi=new je(this.Qc,this.Q,this.i);return this.vi};a.wj=function(){if(!this.yi)this.yi=new ke(this.Qc,this.Q,this.i);return this.yi};a.pj=function(){if(!this.Mh)this.Mh=new be(this.Qc,this.Q,this.i);return this.Mh};a.Aj=function(){if(!this.Ii)this.Ii=new fe(this.Qc,this.Q,this.i);return this.Ii};a.sj=function(){if(!this.li)this.li=new ge(this.Qc,this.Q,this.i);return this.li};function te(d,e,h){fd.call(this,d,e,h,ue)}H(te,fd);
te.prototype.J=function(d,e,h){this.transform=e;var l=this.i.m("atom"),m=this.i.m(d.A)?this.i.m(d.A).color:l.color,n=e.ia;n=new ve(n/1.8>12?15:n/1.8,l.fontName);l=new Td(l.stroke.width,"black");m=new we(m);e=P(e,[d.a])[0];var o={text:"",Ff:"center",rc:"",yd:""};if(d.A!="C"||d.fb()==1){var q=d.Uh();if(q==0)o.text=d.A;else{var s=d.h.mb(),t=xe(d,0);if(s>1){for(var u=1;u<s;++u)t+=xe(d,u);t=t/s%360}bond_direction=t>350||t<=10?"E":t>10&&t<=80?"SE":t>80&&t<=100?"S":t>100&&t<=170?"SW":t>170&&t<=190?"W":t>
190&&t<=260?"NW":t>260&&t<=280?"N":"NE";s="center";if(bond_direction=="SW"||bond_direction=="W"||bond_direction=="NW"){s="right";if(q==1)o.text="H";o.text+=d.A}else{s="left";o.text=d.A+"H"}if(q>1)o.yd=String(q)}if(d.Wa)if(d.Wa>1)o.rc+="+"+d.Wa;else if(d.Wa<-1)o.rc+=d.Wa;else if(d.Wa==-1)o.rc="-";else if(d.Wa==1)o.rc="+"}else o.text="";o.Ff=s;d=this.Q;s=o.text.length*0.55*n.size;q=n.size;if(o.text){ye(d,o.text,e.x-s/2,e.y-q/2,s,q,o.Ff,null,n,l,m,h);if(o.Ff=="left"){if(o.yd||o.rc){t=this.i.m("subscriptSize");
o.yd&&ye(d,o.yd,e.x+s*0.9,e.y,t,t,"center",null,n,l,m,h);o.rc&&ye(d,o.rc,e.x+s,e.y-q*0.8,t,t,"center",null,n,l,m,h)}}else if(o.Ff=="right")if(o.yd||o.rc){t=this.i.m("subscriptSize");if(o.yd){ye(d,"H",e.x-s*3,e.y-q/2,s,q,"center",null,n,l,m,h);ye(d,o.yd,e.x-s*1.8,e.y,t,t,"center",null,n,l,m,h)}o.rc&&ye(d,o.rc,e.x+s,e.y-q*0.8,t,t,"center",null,n,l,m,h)}}};
te.prototype.hb=function(d,e){var h=this.i.m("atom"),l=this.i.m(d.A)?this.i.m(d.A).color:h.color;l=new we(l,0.3);h=h.highlight.radius*this.transform.ia;d=P(this.transform,[d.a])[0];e||(e=this.Q.od());this.Q.ef(d.x,d.y,h,h,null,l,e);return e};function xe(d,e){if(d.h.fa().length==0)return 0;e=d.h.fa()[e];var h=e.target.a,l=e.source.a,m=h.y-l.y;h=h.x-l.x;if(d==e.source){h=-h;m=-m}d=Math.atan2(m,h)*180/Math.PI;if(d<0)d=360+d;return d}te.prototype.r=N("kemia.view.AtomRenderer");
var ue={atom:{color:"#FF9999",diameter:0.05,highlight:{radius:0.3},stroke:{width:0.15},fontName:"Arial"},margin:20,subscriptSize:5,N:{color:"blue"},O:{color:"red"},S:{color:"yellow"},P:{color:"orange"},Cl:{color:"green"},F:{color:"green"},Br:{color:"DarkRed"},I:{color:"purple"},C:{color:"black"},H:{color:"white"}};function ze(d){this.Lc(d)}H(ze,wc);ze.prototype.r=N("kemia.controller.AtomController");ze.prototype.Bb=function(d){this.dispatchEvent(new Ae(this,d,Be))};ze.prototype.Ab=function(d){this.dispatchEvent(new Ae(this,d,Ce))};ze.prototype.wa=function(d,e){this.r.info("handleMouseDown");e.stopPropagation();this.dispatchEvent(new Ae(this,d,De))};var Be="atom_mouseover",Ce="atom_mouseout",De="atom_mousedown";function Ae(d,e,h){Sa.call(this,h,d);this.gg=e}H(Ae,Sa);function Ee(d,e,h){fd.call(this,d,e,h,Fe);this.Uf=1;this.cj=new yd(d);this.hg=new qe(this.cj,e,this.i);this.aj=new ze(d);this.Oc=new te(this.aj,e,this.i)}H(Ee,fd);Ee.prototype.r=N("kemia.view.MoleculeRenderer");
Ee.prototype.J=function(d,e){d.Xa=this.Q.od();var h=J(d.b,function(n){return n.a});h=Hd.apply(null,h);if(!e){var l=this.i.m("margin");e=gd(this,h.expand(l,l,l,l))}this.transform=e;P(this.transform,[new O((h.left+h.right)/2,(h.top+h.bottom)/2)]);h=new Td(this.i.m("bond").stroke.width,this.i.m("bond").stroke.color);l=new we(this.i.m("bond").fill.color);var m=new Vd;I(d.h,function(n){this.hg.m(n).J(n,e,m)},this);this.Q.zc(m,h,l,d.Xa);I(d.b,function(n){this.Oc.J(n,e,d.Xa)},this)};
Ee.prototype.hb=function(d,e){e||(e=this.Q.od());I(d.b,function(h){this.Oc.hb(h,e)},this);return e};var Fe={bond:{stroke:{width:2,color:"black"},fill:{color:"black"}},margin:4};var Ge;function He(d){return(d=d.className)&&typeof d.split=="function"?d.split(/\s+/):[]}function Ie(d){var e=He(d),h;h=La(arguments,1);for(var l=0,m=0;m<h.length;m++)if(!K(e,h[m])){e.push(h[m]);l++}h=l==h.length;d.className=e.join(" ");return h}function Je(d){var e=He(d),h;h=La(arguments,1);for(var l=0,m=0;m<e.length;m++)if(K(h,e[m])){Fa(e,m--,1);l++}h=l==h.length;d.className=e.join(" ");return h}function Ke(d,e,h){h?Ie(d,e):Je(d,e)};function Le(d){return d?new Me(Ne(d)):Ge||(Ge=new Me)}
function Oe(d,e,h,l){l=l||d;e=e&&e!="*"?e.toUpperCase():"";if(l.querySelectorAll&&(e||h)&&(!qb||Pe(d)||Ab("528")))return l.querySelectorAll(e+(h?"."+h:""));if(h&&l.getElementsByClassName){d=l.getElementsByClassName(h);if(e){l={};for(var m=0,n=0,o;o=d[n];n++)if(e==o.nodeName)l[m++]=o;l.length=m;return l}else return d}d=l.getElementsByTagName(e||"*");if(h){l={};for(n=m=0;o=d[n];n++){e=o.className;if(typeof e.split=="function"&&K(e.split(/\s+/),h))l[m++]=o}l.length=m;return l}else return d}
function Qe(d,e){Yb(e,function(h,l){if(l=="style")d.style.cssText=h;else if(l=="class")d.className=h;else if(l=="for")d.htmlFor=h;else if(l in Re)d.setAttribute(Re[l],h);else d[l]=h})}var Re={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",type:"type"};function Se(){return Te(document,arguments)}
function Te(d,e){var h=e[0],l=e[1];if(L&&l&&(l.name||l.type)){h=["<",h];l.name&&h.push(' name="',Wa(l.name),'"');if(l.type){h.push(' type="',Wa(l.type),'"');l=qa(l);delete l.type}h.push(">");h=h.join("")}var m=d.createElement(h);if(l)if(F(l))m.className=l;else Qe(m,l);if(e.length>2){l=function(o){if(o)m.appendChild(F(o)?d.createTextNode(o):o)};for(h=2;h<e.length;h++){var n=e[h];ja(n)&&!(ma(n)&&n.nodeType>0)?I(Ue(n)?Ja(n):n,l):l(n)}}return m}function Pe(d){return d.compatMode=="CSS1Compat"}
function Ve(d,e){d.appendChild(e)}function We(d){for(var e;e=d.firstChild;)d.removeChild(e)}function Xe(d){return d&&d.parentNode?d.parentNode.removeChild(d):null}function Ye(d,e){var h=e.parentNode;h&&h.replaceChild(d,e)}function Ze(d,e){if(d.contains&&e.nodeType==1)return d==e||d.contains(e);if(typeof d.compareDocumentPosition!="undefined")return d==e||Boolean(d.compareDocumentPosition(e)&16);for(;e&&d!=e;)e=e.parentNode;return e==d}
function Ne(d){return d.nodeType==9?d:d.ownerDocument||d.document}function $e(d,e){if("textContent"in d)d.textContent=e;else if(d.firstChild&&d.firstChild.nodeType==3){for(;d.lastChild!=d.firstChild;)d.removeChild(d.lastChild);d.firstChild.data=e}else{We(d);d.appendChild(Ne(d).createTextNode(e))}}var af={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},bf={IMG:" ",BR:"\n"};function cf(d){var e=d.getAttributeNode("tabindex");if(e&&e.specified){d=d.tabIndex;return ka(d)&&d>=0}return false}
function df(d,e){if(e)d.tabIndex=0;else d.removeAttribute("tabIndex")}function ef(d){if(L&&"innerText"in d)d=d.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var e=[];ff(d,e,true);d=e.join("")}d=d.replace(/\xAD/g,"");d=d.replace(/ +/g," ");if(d!=" ")d=d.replace(/^\s*/,"");return d}
function ff(d,e,h){if(!(d.nodeName in af))if(d.nodeType==3)h?e.push(String(d.nodeValue).replace(/(\r\n|\r|\n)/g,"")):e.push(d.nodeValue);else if(d.nodeName in bf)e.push(bf[d.nodeName]);else for(d=d.firstChild;d;){ff(d,e,h);d=d.nextSibling}}function Ue(d){if(d&&typeof d.length=="number")if(ma(d))return typeof d.item=="function"||typeof d.item=="string";else if(la(d))return typeof d.item=="function";return false}function Me(d){this.L=d||C.document||document}Me.prototype.qa=Le;
function gf(d){return d.L}a=Me.prototype;a.e=function(d){return F(d)?this.L.getElementById(d):d};a.j=function(){return Te(this.L,arguments)};a.createElement=function(d){return this.L.createElement(d)};a.createTextNode=function(d){return this.L.createTextNode(d)};
a.Gh=function(d,e,h){var l=this.L,m=!!h;h=["<tr>"];for(var n=0;n<e;n++)h.push(m?"<td>&nbsp;</td>":"<td></td>");h.push("</tr>");h=h.join("");e=["<table>"];for(n=0;n<d;n++)e.push(h);e.push("</table>");d=l.createElement("DIV");d.innerHTML=e.join("");return d.removeChild(d.firstChild)};function hf(d){return Pe(d.L)}function jf(d){d=!qb&&Pe(d.L)?d.L.documentElement:d.L.body;return new O(d.scrollLeft,d.scrollTop)}Me.prototype.appendChild=Ve;Me.prototype.contains=Ze;function Vd(){this.Qa=[];this.M=[];this.wb=[]}Vd.prototype.gc=null;Vd.prototype.ua=null;Vd.prototype.xd=true;var kf=[];kf[0]=2;kf[1]=2;kf[2]=6;kf[3]=6;kf[4]=0;a=Vd.prototype;a.clear=function(){this.Qa.length=0;this.M.length=0;this.wb.length=0;delete this.gc;delete this.ua;delete this.xd;return this};a.moveTo=function(d,e){if(this.Qa[this.Qa.length-1]==0)this.wb.length-=2;else{this.Qa.push(0);this.M.push(1)}this.wb.push(d,e);this.ua=this.gc=[d,e];return this};
a.lineTo=function(){var d=this.Qa[this.Qa.length-1];if(d==null)throw Error("Path cannot start with lineTo");if(d!=1){this.Qa.push(1);this.M.push(0)}for(d=0;d<arguments.length;d+=2){var e=arguments[d],h=arguments[d+1];this.wb.push(e,h)}this.M[this.M.length-1]+=d/2;this.ua=[e,h];return this};
a.Hh=function(){var d=this.Qa[this.Qa.length-1];if(d==null)throw Error("Path cannot start with curve");if(d!=2){this.Qa.push(2);this.M.push(0)}for(d=0;d<arguments.length;d+=6){var e=arguments[d+4],h=arguments[d+5];this.wb.push(arguments[d],arguments[d+1],arguments[d+2],arguments[d+3],e,h)}this.M[this.M.length-1]+=d/6;this.ua=[e,h];return this};a.close=function(){var d=this.Qa[this.Qa.length-1];if(d==null)throw Error("Path cannot start with close");if(d!=4){this.Qa.push(4);this.M.push(1);this.ua=this.gc}return this};
a.arc=function(d,e,h,l,m,n,o){d=d+h*Math.cos(Md(m));e=e+l*Math.sin(Md(m));if(o){if(!this.ua||d!=this.ua[0]||e!=this.ua[1])this.lineTo(d,e)}else this.moveTo(d,e);return this.arcTo(h,l,m,n)};a.arcTo=function(d,e,h,l){var m=this.ua[0]-d*Math.cos(Md(h)),n=this.ua[1]-e*Math.sin(Md(h));m=m+d*Math.cos(Md(h+l));n=n+e*Math.sin(Md(h+l));this.Qa.push(3);this.M.push(1);this.wb.push(d,e,h,l,m,n);this.xd=false;this.ua=[m,n];return this};
a.Yi=function(d,e,h,l){var m=this.ua[0]-d*Math.cos(Md(h)),n=this.ua[1]-e*Math.sin(Md(h)),o=Md(l);l=Math.ceil(Math.abs(o)/Math.PI*2);o=o/l;h=Md(h);for(var q=0;q<l;q++){var s=Math.cos(h),t=Math.sin(h),u=4/3*Math.sin(o/2)/(1+Math.cos(o/2)),v=m+(s-u*t)*d,A=n+(t+u*s)*e;h+=o;s=Math.cos(h);t=Math.sin(h);this.Hh(v,A,m+(s+u*t)*d,n+(t-u*s)*e,m+s*d,n+t*e)}return this};function lf(d,e){for(var h=d.wb,l=0,m=0,n=d.Qa.length;m<n;m++){var o=d.Qa[m],q=kf[o]*d.M[m];e(o,h.slice(l,l+q));l+=q}}
Vd.prototype.aa=function(){var d=new this.constructor;d.Qa=this.Qa.concat();d.M=this.M.concat();d.wb=this.wb.concat();d.gc=this.gc&&this.gc.concat();d.ua=this.ua&&this.ua.concat();d.xd=this.xd;return d};var mf={};mf[0]=Vd.prototype.moveTo;mf[1]=Vd.prototype.lineTo;mf[4]=Vd.prototype.close;mf[2]=Vd.prototype.Hh;mf[3]=Vd.prototype.Yi;function nf(d){if(d.xd)return d.aa();var e=new Vd;lf(d,function(h,l){mf[h].apply(e,l)});return e}
Vd.prototype.transform=function(d){if(!this.xd)throw Error("Non-simple path");d.transform(this.wb,0,this.wb,0,this.wb.length/2);this.gc&&d.transform(this.gc,0,this.gc,0,1);this.ua&&this.gc!=this.ua&&d.transform(this.ua,0,this.ua,0,1);return this};function of(d,e){var h=Ne(d);if(h.defaultView&&h.defaultView.getComputedStyle)if(d=h.defaultView.getComputedStyle(d,""))return d[e];return null}function pf(d,e){return of(d,e)||(d.currentStyle?d.currentStyle[e]:null)||d.style[e]}function qf(d){var e=d.getBoundingClientRect();if(L){d=d.ownerDocument;e.left-=d.documentElement.clientLeft+d.body.clientLeft;e.top-=d.documentElement.clientTop+d.body.clientTop}return e}
function rf(d){if(L)return d.offsetParent;var e=Ne(d),h=pf(d,"position"),l=h=="fixed"||h=="absolute";for(d=d.parentNode;d&&d!=e;d=d.parentNode){h=pf(d,"position");l=l&&h=="static"&&d!=e.documentElement&&d!=e.body;if(!l&&(d.scrollWidth>d.clientWidth||d.scrollHeight>d.clientHeight||h=="fixed"||h=="absolute"))return d}return null}
function sf(d){var e=new Gd(0,Infinity,Infinity,0),h=Le(d),l=h.L.body,m=!qb&&Pe(h.L)?h.L.documentElement:h.L.body,n;for(d=d;d=rf(d);)if((!L||d.clientWidth!=0)&&(!qb||d.clientHeight!=0||d!=l)&&(d.scrollWidth!=d.clientWidth||d.scrollHeight!=d.clientHeight)&&pf(d,"overflow")!="visible"){var o=tf(d),q;q=d;if(M&&!Ab("1.9")){var s=parseFloat(of(q,"borderLeftWidth"));if(uf(q)){var t=q.offsetWidth-q.clientWidth-s-parseFloat(of(q,"borderRightWidth"));s+=t}q=new O(s,parseFloat(of(q,"borderTopWidth")))}else q=
new O(q.clientLeft,q.clientTop);o.x+=q.x;o.y+=q.y;e.top=Math.max(e.top,o.y);e.right=Math.min(e.right,o.x+d.clientWidth);e.bottom=Math.min(e.bottom,o.y+d.clientHeight);e.left=Math.max(e.left,o.x);n=n||d!=m}l=m.scrollLeft;m=m.scrollTop;if(qb){e.left+=l;e.top+=m}else{e.left=Math.max(e.left,l);e.top=Math.max(e.top,m)}if(!n||qb){e.right+=l;e.bottom+=m}h=h.L.parentWindow||h.L.defaultView||window;n=h.document;if(qb&&!Ab("500")&&!rb){if(typeof h.innerHeight=="undefined")h=window;n=h.innerHeight;d=h.document.documentElement.scrollHeight;
if(h==h.top)if(d<n)n-=15;h=new Jd(h.innerWidth,n)}else{h=Pe(n)&&(!pb||pb&&Ab("9.50"))?n.documentElement:n.body;h=new Jd(h.clientWidth,h.clientHeight)}e.right=Math.min(e.right,l+h.width);e.bottom=Math.min(e.bottom,m+h.height);return e.top>=0&&e.left>=0&&e.bottom>e.top&&e.right>e.left?e:null}
function tf(d){var e,h=Ne(d),l=pf(d,"position"),m=M&&h.getBoxObjectFor&&!d.getBoundingClientRect&&l=="absolute"&&(e=h.getBoxObjectFor(d))&&(e.screenX<0||e.screenY<0),n=new O(0,0),o;e=h?h.nodeType==9?h:Ne(h):document;o=L&&!hf(Le(e))?e.body:e.documentElement;if(d==o)return n;if(d.getBoundingClientRect){e=qf(d);d=jf(Le(h));n.x=e.left+d.x;n.y=e.top+d.y}else if(h.getBoxObjectFor&&!m){e=h.getBoxObjectFor(d);d=h.getBoxObjectFor(o);n.x=e.screenX-d.screenX;n.y=e.screenY-d.screenY}else{e=d;do{n.x+=e.offsetLeft;
n.y+=e.offsetTop;if(e!=d){n.x+=e.clientLeft||0;n.y+=e.clientTop||0}if(qb&&pf(e,"position")=="fixed"){n.x+=h.body.scrollLeft;n.y+=h.body.scrollTop;break}e=e.offsetParent}while(e&&e!=d);if(pb||qb&&l=="absolute")n.y-=h.body.offsetTop;for(e=d;(e=rf(e))&&e!=h.body&&e!=o;){n.x-=e.scrollLeft;if(!pb||e.tagName!="TR")n.y-=e.scrollTop}}return n}
function vf(d){var e=new O;if(d.nodeType==1)if(d.getBoundingClientRect){var h=qf(d);e.x=h.left;e.y=h.top}else{h=jf(Le(d));d=tf(d);e.x=d.x-h.x;e.y=d.y-h.y}else{e.x=d.clientX;e.y=d.clientY}return e}function wf(d,e,h){if(e instanceof Jd){h=e.height;e=e.width}else{if(h==undefined)throw Error("missing height argument");h=h}d.style.width=typeof e=="number"?Math.round(e)+"px":e;d.style.height=typeof h=="number"?Math.round(h)+"px":h}
function xf(d){var e=pb&&!Ab("10");if(pf(d,"display")!="none")return e?new Jd(d.offsetWidth||d.clientWidth,d.offsetHeight||d.clientHeight):new Jd(d.offsetWidth,d.offsetHeight);var h=d.style,l=h.display,m=h.visibility,n=h.position;h.visibility="hidden";h.position="absolute";h.display="inline";if(e){e=d.offsetWidth||d.clientWidth;d=d.offsetHeight||d.clientHeight}else{e=d.offsetWidth;d=d.offsetHeight}h.display=l;h.position=n;h.visibility=m;return new Jd(e,d)}
function yf(d){var e=tf(d);d=xf(d);return new Kd(e.x,e.y,d.width,d.height)}var zf={};function Af(d){return zf[d]||(zf[d]=String(d).replace(/\-([a-z])/g,function(e,h){return h.toUpperCase()}))}function Bf(d,e){d.style.display=e?"":"none"}function Cf(d,e){e=Le(e);var h=null;if(L){h=e.L.createStyleSheet();Df(h,d)}else{var l=Oe(e.L,"head",void 0,void 0)[0];if(!l){h=Oe(e.L,"body",void 0,void 0)[0];l=e.j("head");h.parentNode.insertBefore(l,h)}h=e.j("style");Df(h,d);e.appendChild(l,h)}return h}
function Df(d,e){if(L)d.cssText=e;else d[qb?"innerText":"innerHTML"]=e}function uf(d){return"rtl"==pf(d,"direction")}var Ef=M?"MozUserSelect":qb?"WebkitUserSelect":null;function Ff(d,e,h){h=!h?d.getElementsByTagName("*"):null;if(Ef){e=e?"none":"";d.style[Ef]=e;if(h){d=0;for(var l;l=h[d];d++)l.style[Ef]=e}}else if(L||pb){e=e?"on":"";d.setAttribute("unselectable",e);if(h)for(d=0;l=h[d];d++)l.setAttribute("unselectable",e)}};function Gf(d){this.ob=d}H(Gf,va);var Hf=new Hb(0,100);a=Gf.prototype;a.v=function(d,e,h,l,m){if(ia(e))for(var n=0;n<e.length;n++)this.v(d,e[n],h,l,m);else{d=mc(d,e,h||this,l||false,m||this.ob||this);if(this.T)this.T[d]=true;else if(this.$c){this.T=Ib(Hf);this.T[this.$c]=true;this.$c=null;this.T[d]=true}else this.$c=d}return this};
a.Mb=function(d,e,h,l,m){if(this.$c||this.T)if(ia(e))for(var n=0;n<e.length;n++)this.Mb(d,e[n],h,l,m);else{a:{h=h||this;m=m||this.ob||this;l=!!(l||false);if(d=qc(d,e,l))for(e=0;e<d.length;e++)if(d[e].Xd==h&&d[e].capture==l&&d[e].tf==m){d=d[e];break a}d=null}if(d){d=d.key;rc(d);if(this.T)ac(this.T,d);else if(this.$c==d)this.$c=null}}return this};a.Ke=function(){if(this.T){for(var d in this.T){rc(d);delete this.T[d]}Jb(Hf,this.T);this.T=null}else this.$c&&rc(this.$c)};
a.k=function(){Gf.g.k.call(this);this.Ke()};a.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function If(){}fa(If);If.prototype.ek=0;If.ra();function Jf(d){this.gb=d||Le();this.Me=Kf}H(Jf,wc);Jf.prototype.Sj=If.ra();var Kf=null;function Lf(d,e){switch(d){case 1:return e?"disable":"enable";case 2:return e?"highlight":"unhighlight";case 4:return e?"activate":"deactivate";case 8:return e?"select":"unselect";case 16:return e?"check":"uncheck";case 32:return e?"focus":"blur";case 64:return e?"open":"close";default:}throw Error("Invalid component state");}a=Jf.prototype;a.pb=null;a.gb=null;a.X=false;a.l=null;a.Me=null;a.Ng=null;a.ma=null;
a.ha=null;a.Qb=null;a.Ek=false;function Mf(d){return d.pb||(d.pb=":"+(d.Sj.ek++).toString(36))}function Nf(d,e){if(d.ma&&d.ma.Qb){ac(d.ma.Qb,d.pb);cc(d.ma.Qb,e,d)}d.pb=e}Jf.prototype.e=w("l");Jf.prototype.zb=function(){return this.Td||(this.Td=new Gf(this))};function Of(d,e){if(d==e)throw Error("Unable to set parent component");if(e&&d.ma&&d.pb&&Pf(d.ma,d.pb)&&d.ma!=e)throw Error("Unable to set parent component");d.ma=e;Jf.g.Lc.call(d,e)}
Jf.prototype.Lc=function(d){if(this.ma&&this.ma!=d)throw Error("Method not supported");Jf.g.Lc.call(this,d)};Jf.prototype.qa=w("gb");Jf.prototype.j=function(){this.l=this.gb.createElement("div")};Jf.prototype.J=function(d){Qf(this,d)};function Qf(d,e,h){if(d.X)throw Error("Component already rendered");d.l||d.j();e?e.insertBefore(d.l,h||null):d.gb.L.body.appendChild(d.l);if(!d.ma||d.ma.X)d.pa()}a=Jf.prototype;a.pa=function(){this.X=true;Rf(this,function(d){!d.X&&d.e()&&d.pa()})};
a.xb=function(){Rf(this,function(d){d.X&&d.xb()});this.Td&&this.Td.Ke();this.X=false};a.k=function(){Jf.g.k.call(this);this.X&&this.xb();if(this.Td){this.Td.ca();delete this.Td}Rf(this,function(d){d.ca()});!this.Ek&&this.l&&Xe(this.l);this.ma=this.Ng=this.l=this.Qb=this.ha=null};a.kd=function(d,e){this.ne(d,Sf(this),e)};
a.ne=function(d,e,h){if(d.X&&(h||!this.X))throw Error("Component already rendered");if(e<0||e>Sf(this))throw Error("Child component index out of bounds");if(!this.Qb||!this.ha){this.Qb={};this.ha=[]}if(d.ma==this){this.Qb[Mf(d)]=d;Ga(this.ha,d)}else cc(this.Qb,Mf(d),d);Of(d,this);Da(this.ha,d,e);if(d.X&&this.X&&d.ma==this){h=this.va();h.insertBefore(d.e(),h.childNodes[e]||null)}else if(h){this.l||this.j();e=Tf(this,e+1);Qf(d,this.va(),e?e.l:null)}else this.X&&!d.X&&d.l&&d.pa()};a.va=w("l");
function Uf(d){if(d.Me==null)d.Me=uf(d.X?d.l:d.gb.L.body);return d.Me}Jf.prototype.ed=function(d){if(this.X)throw Error("Component already rendered");this.Me=d};function Sf(d){return d.ha?d.ha.length:0}function Pf(d,e){return d.Qb&&e?dc(d.Qb,e)||null:null}function Tf(d,e){return d.ha?d.ha[e]||null:null}function Rf(d,e,h){d.ha&&I(d.ha,e,h)}function Vf(d,e){return d.ha&&e?xa(d.ha,e):-1}
Jf.prototype.removeChild=function(d,e){if(d){var h=F(d)?d:Mf(d);d=Pf(this,h);if(h&&d){ac(this.Qb,h);Ga(this.ha,d);if(e){d.xb();d.l&&Xe(d.l)}Of(d,null)}}if(!d)throw Error("Child is not in parent component");return d};function Wf(d,e,h,l,m){Jf.call(this,m);this.width=d;this.height=e;this.Ub=h||null;this.qe=l||null}H(Wf,Jf);Wf.prototype.la=null;Wf.prototype.Rc=0;Wf.prototype.nd=0;function Xf(d){return d.Ub?new Jd(d.Ub,d.qe):d.nb()}Wf.prototype.sd=function(){return this.nb()};Wf.prototype.nb=function(){if(this.X)return xf(this.e());if(ka(this.width)&&ka(this.height))return new Jd(this.width,this.height);return null};function Yf(d){var e=d.nb();return e?e.width/Xf(d).width:0}
function ye(d,e,h,l,m,n,o,q,s,t,u,v){var A=s.size/2;l=q=="bottom"?l+n-A:q=="center"?l+n/2:l+A;return d.rg(e,h,l,h+m,l,o,s,t,u,v)};function Zf(d,e,h,l,m,n){if(arguments.length==6)this.setTransform(d,e,h,l,m,n);else if(arguments.length!=0)throw Error("Insufficient matrix parameters");else{this.ia=this.Da=1;this.Aa=this.Ma=this.$a=this.ab=0}}a=Zf.prototype;a.aa=function(){return new Zf(this.ia,this.Aa,this.Ma,this.Da,this.$a,this.ab)};a.setTransform=function(d,e,h,l,m,n){if(!ka(d)||!ka(e)||!ka(h)||!ka(l)||!ka(m)||!ka(n))throw Error("Invalid transform parameters");this.ia=d;this.Aa=e;this.Ma=h;this.Da=l;this.$a=m;this.ab=n;return this};
a.scale=function(d,e){this.ia*=d;this.Aa*=d;this.Ma*=e;this.Da*=e;return this};a.translate=function(d,e){this.$a+=d*this.ia+e*this.Ma;this.ab+=d*this.Aa+e*this.Da;return this};a.rotate=function(d,e,h){d=$f(new Zf,d,e,h);e=this.ia;h=this.Ma;this.ia=d.ia*e+d.Aa*h;this.Ma=d.Ma*e+d.Da*h;this.$a+=d.$a*e+d.ab*h;e=this.Aa;h=this.Da;this.Aa=d.ia*e+d.Aa*h;this.Da=d.Ma*e+d.Da*h;this.ab+=d.$a*e+d.ab*h;return this};
a.toString=function(){return"matrix("+[this.ia,this.Aa,this.Ma,this.Da,this.$a,this.ab].join(",")+")"};a.transform=function(d,e,h,l,m){var n=e;l=l;for(e=e+2*m;n<e;){m=d[n++];var o=d[n++];h[l++]=m*this.ia+o*this.Ma+this.$a;h[l++]=m*this.Aa+o*this.Da+this.ab}};a.Vb=function(){var d=this.ia*this.Da-this.Ma*this.Aa;return new Zf(this.Da/d,-this.Aa/d,-this.Ma/d,this.ia/d,(this.Ma*this.ab-this.Da*this.$a)/d,(this.Aa*this.$a-this.ia*this.ab)/d)};
function ag(d,e){return(new Zf).setTransform(1,0,0,1,d,e)}function $f(d,e,h,l){var m=Math.cos(e);e=Math.sin(e);return d.setTransform(m,e,-e,m,h-h*m+l*e,l-h*e-l*m)}Zf.prototype.Kd=function(d){if(this==d)return true;if(!d)return false;return this.ia==d.ia&&this.Ma==d.Ma&&this.$a==d.$a&&this.Aa==d.Aa&&this.Da==d.Da&&this.ab==d.ab};function bg(d,e){this.l=d;this.Ka=e;this.mg=false}H(bg,wc);bg.prototype.Ka=null;bg.prototype.l=null;bg.prototype.Ye=null;bg.prototype.e=w("l");function cg(d,e,h,l,m,n){d.Ye=$f(new Zf,Md(l),m,n).translate(e,h);d.Ka.Yg(d,e,h,l,m,n)}bg.prototype.addEventListener=function(d,e,h,l){mc(this.l,d,e,h,l)};bg.prototype.removeEventListener=function(d,e,h,l){pc(this.l,d,e,h,l)};bg.prototype.k=function(){bg.g.k.call(this);tc(this.l)};function dg(d,e,h,l){bg.call(this,d,e);this.ri(h);this.pi(l)}H(dg,bg);a=dg.prototype;a.ue=null;a.eh=null;a.pi=function(d){this.ue=d;this.Ka.Wg(this,d)};a.qj=w("ue");a.ri=function(d){this.eh=d;this.Ka.Xg(this,d)};a.yj=w("eh");function eg(d,e,h,l){dg.call(this,d,e,h,l)}H(eg,dg);function fg(d,e){bg.call(this,d,e)}H(fg,bg);function gg(d,e){bg.call(this,d,e)}H(gg,bg);function hg(d,e,h,l){dg.call(this,d,e,h,l)}H(hg,dg);function ig(d,e,h,l){dg.call(this,d,e,h,l)}H(ig,dg);function jg(d,e,h,l){dg.call(this,d,e,h,l)}H(jg,dg);function kg(d){bg.call(this,null,d);this.ha=[]}H(kg,fg);kg.prototype.clear=function(){if(this.ha.length){this.ha.length=0;lg(this.Ka)}};kg.prototype.tb=aa();kg.prototype.appendChild=function(d){this.ha.push(d)};kg.prototype.Zb=function(){for(var d=0,e=this.ha.length;d<e;d++)mg(this.Ka,this.ha[d])};
function ng(d,e,h,l,m,n,o,q){dg.call(this,d,e,o,q);this.ij=h;this.jj=l;this.uk=m;this.vk=n;this.Gb=new Vd;this.Gb.clear();this.Gb.arc(this.ij,this.jj,this.uk,this.vk,0,360,false);this.Gb.close();this.ik=new og(null,e,this.Gb,o,q)}H(ng,eg);ng.prototype.Zb=function(d){this.ik.Zb(d)};function pg(d,e,h,l,m,n,o,q){dg.call(this,d,e,o,q);this.ke=h;this.me=l;this.Ad=m;this.td=n}H(pg,ig);pg.prototype.Vc=false;pg.prototype.tb=function(d,e){this.Ad=d;this.td=e;this.Vc&&lg(this.Ka)};
pg.prototype.Zb=function(d){this.Vc=true;d.beginPath();d.moveTo(this.ke,this.me);d.lineTo(this.ke,this.me+this.td);d.lineTo(this.ke+this.Ad,this.me+this.td);d.lineTo(this.ke+this.Ad,this.me);d.closePath()};function og(d,e,h,l,m){dg.call(this,d,e,l,m);this.Zg(h)}H(og,hg);og.prototype.Vc=false;og.prototype.Zg=function(d){this.Gb=d.xd?d:nf(d);this.Vc&&lg(this.Ka)};
og.prototype.Zb=function(d){this.Vc=true;d.beginPath();lf(this.Gb,function(e,h){switch(e){case 0:d.moveTo(h[0],h[1]);break;case 1:for(e=0;e<h.length;e+=2)d.lineTo(h[e],h[e+1]);break;case 2:for(e=0;e<h.length;e+=6)d.bezierCurveTo(h[e],h[e+1],h[e+2],h[e+3],h[e+4],h[e+5]);break;case 3:throw Error("Canvas paths cannot contain arcs");case 4:d.closePath();break}})};
function qg(d,e,h,l,m,n,o,q,s,t){dg.call(this,null,d,s,t);this.Gi=e;this.Oi=h;this.Gk=l;this.Pi=m;this.Hk=n;this.Vi=o||"left";this.nj=q;this.l=Se("DIV",{style:"display:table;position:absolute;padding:0;margin:0;border:0"});this.yf=Se("DIV",{style:"display:table-cell;padding: 0;margin: 0;border: 0"});h=this.Oi;q=this.Pi;l=this.Gk;m=this.Hk;s=this.Vi;n=this.nj;e=this.l.style;o=Yf(this.Ka);t=this.Ka;var u=t.nb();t=u?u.height/Xf(t).height:0;if(h==q){e.lineHeight="90%";this.yf.style.verticalAlign=s=="center"?
"middle":s=="left"?l<m?"top":"bottom":l<m?"bottom":"top";e.textAlign="center";q=n.size*o;e.top=Math.round(Math.min(l,m)*t)+"px";e.left=Math.round((h-q/2)*o)+"px";e.width=Math.round(q)+"px";e.height=Math.abs(l-m)*t+"px";e.fontSize=n.size*0.6*t+"pt"}else{e.lineHeight="100%";this.yf.style.verticalAlign="top";e.textAlign=s;e.top=Math.round(((l+m)/2-n.size*2/3)*t)+"px";e.left=Math.round(h*o)+"px";e.width=Math.round(Math.abs(q-h)*o)+"px";e.height="auto";e.fontSize=n.size*t+"pt"}e.fontWeight=n.bold?"bold":
"normal";e.fontStyle=n.Ig?"italic":"normal";e.fontFamily=n.tg;h=this.ue;e.color=h.jb||h.Nh();this.yf.innerHTML=this.Oi==this.Pi?J(this.Gi.split(""),Wa).join("<br>"):Wa(this.Gi);d.e().appendChild(this.l);this.l.appendChild(this.yf)}H(qg,jg);qg.prototype.pi=function(d){this.ue=d;if(this.l)this.l.style.color=d.jb||d.Nh()};qg.prototype.ri=aa();qg.prototype.Zb=aa();function rg(d,e,h,l,m,n,o){bg.call(this,d,e);this.ke=h;this.me=l;this.Ad=m;this.td=n;this.yk=o}H(rg,gg);rg.prototype.Vc=false;
rg.prototype.tb=function(d,e){this.Ad=d;this.td=e;this.Vc&&lg(this.Ka)};rg.prototype.Zb=function(d){if(this.Wh){this.Ad&&this.td&&d.drawImage(this.Wh,this.ke,this.me,this.Ad,this.td);this.Vc=true}else{d=new Image;d.onload=ra(this.Ij,this,d);d.src=this.yk}};rg.prototype.Ij=function(d){this.Wh=d;lg(this.Ka)};function ve(d,e){this.size=d;this.tg=e}ve.prototype.bold=false;ve.prototype.Ig=false;function sg(){};function we(d,e){this.jb=d;this.Ee=e||1}H(we,sg);function Td(d,e){this.mh=d;this.jb=e};function tg(d,e,h,l,m){Wf.call(this,d,e,h,l,m)}H(tg,Wf);tg.prototype.Wg=function(){lg(this)};tg.prototype.Xg=function(){lg(this)};tg.prototype.Yg=function(){lg(this)};function ug(d,e){d=d.getContext();d.save();e=e.Ye?e.Ye.aa():new Zf;var h=e.$a,l=e.ab;if(h||l)d.translate(h,l);(e=e.Aa)&&d.rotate(Math.asin(e))}
tg.prototype.j=function(){var d=this.gb.j("div",{style:"position:relative;overflow:hidden"});this.l=d;this.pe=this.gb.j("canvas");d.appendChild(this.pe);this.Kg=this.la=new kg(this);this.qk=0;vg(this)};tg.prototype.getContext=function(){this.e()||this.j();if(!this.hc){this.hc=this.pe.getContext("2d");this.hc.save()}return this.hc};tg.prototype.tb=function(d,e){this.width=d;this.height=e;vg(this);lg(this)};
tg.prototype.nb=function(){var d=this.width,e=this.height,h=F(d)&&d.indexOf("%")!=-1,l=F(e)&&e.indexOf("%")!=-1;if(!this.X&&(h||l))return null;var m,n;if(h){m=this.e().parentNode;n=xf(m);d=parseFloat(d)*n.width/100}if(l){m=m||this.e().parentNode;n=n||xf(m);e=parseFloat(e)*n.height/100}return new Jd(d,e)};function vg(d){wf(d.e(),d.width,d.height);var e=d.nb();if(e){wf(d.pe,e.width,e.height);d.pe.width=e.width;d.pe.height=e.height;d.hc=null}}
tg.prototype.reset=function(){var d=this.getContext();d.restore();var e=this.nb();e.width&&e.height&&d.clearRect(0,0,e.width,e.height);d.save()};tg.prototype.clear=function(){this.reset();this.la.clear();for(var d=this.e();d.childNodes.length>1;)d.removeChild(d.lastChild)};
function lg(d){if(d.$l)d.Xl=true;else if(d.X){d.reset();if(d.Ub){var e=d.nb();d.getContext().scale(e.width/d.Ub,e.height/d.qe)}if(d.Rc||d.nd)d.getContext().translate(-d.Rc,-d.nd);ug(d,d.la);d.la.Zb(d.hc);d.getContext().restore()}}
function mg(d,e){if(!(e instanceof qg)){var h=d.getContext();ug(d,e);if(!e.qj||!e.yj)e.Zb(h);else{var l=e.ue;if(l)if(l instanceof we){if(l.Ee!=0){h.globalAlpha=l.Ee;h.fillStyle=l.jb;e.Zb(h);h.fill();h.globalAlpha=1}}else{var m=h.createLinearGradient(l.pl(),l.rl(),l.ql(),l.sl());m.addColorStop(0,l.Nh());m.addColorStop(1,l.kl());h.fillStyle=m;e.Zb(h);h.fill()}if(l=e.eh){e.Zb(h);h.strokeStyle=l.jb;e=l.mh;if(F(e)&&e.indexOf("px")!=-1)e=parseFloat(e)/Yf(d);h.lineWidth=e;h.stroke()}}d.getContext().restore()}}
a=tg.prototype;a.Ha=function(d,e){e=e||this.la;e.appendChild(d);this.X&&!this.qk&&!(e!=this.la&&e!=this.Kg)&&mg(this,d)};a.ef=function(d,e,h,l,m,n,o){d=new ng(null,this,d,e,h,l,m,n);this.Ha(d,o);return d};a.qg=function(d,e,h,l,m,n,o){d=new pg(null,this,d,e,h,l,m,n);this.Ha(d,o);return d};a.drawImage=function(d,e,h,l,m,n){d=new rg(null,this,d,e,h,l,m);this.Ha(d,n);return d};a.rg=function(d,e,h,l,m,n,o,q,s,t){d=new qg(this,d,e,h,l,m,n,o,q,s);this.Ha(d,t);return d};
a.zc=function(d,e,h,l){d=new og(null,this,d,e,h);this.Ha(d,l);return d};a.od=function(d){var e=new kg(this);d=d||this.la;if(d==this.la||d==this.Kg)this.Kg=e;this.Ha(e,d);return e};a.k=function(){this.hc=null;tg.g.k.call(this)};a.pa=function(){var d=this.nb();tg.g.pa.call(this);if(!d){vg(this);this.dispatchEvent("resize")}lg(this)};function wg(d,e){this.zf=d||1;this.Ve=e||xg;this.ig=ra(this.Ak,this);this.Lg=ta()}H(wg,wc);wg.prototype.enabled=false;var xg=C.window;a=wg.prototype;a.Lb=null;a.Ak=function(){if(this.enabled){var d=ta()-this.Lg;if(d>0&&d<this.zf*0.8)this.Lb=this.Ve.setTimeout(this.ig,this.zf-d);else{this.dispatchEvent(yg);if(this.enabled){this.Lb=this.Ve.setTimeout(this.ig,this.zf);this.Lg=ta()}}}};a.start=function(){this.enabled=true;if(!this.Lb){this.Lb=this.Ve.setTimeout(this.ig,this.zf);this.Lg=ta()}};
a.stop=function(){this.enabled=false;if(this.Lb){this.Ve.clearTimeout(this.Lb);this.Lb=null}};a.k=function(){wg.g.k.call(this);this.stop();delete this.Ve};var yg="tick";function zg(d,e){bg.call(this,d,e)}H(zg,fg);zg.prototype.clear=function(){We(this.e())};zg.prototype.tb=function(d,e){Ag(this.Ka,this.e(),{width:d,height:e})};function Bg(d,e,h,l){dg.call(this,d,e,h,l)}H(Bg,eg);function Cg(d,e,h,l){dg.call(this,d,e,h,l)}H(Cg,ig);Cg.prototype.tb=function(d,e){Ag(this.Ka,this.e(),{width:d,height:e})};function Dg(d,e,h,l){dg.call(this,d,e,h,l)}H(Dg,hg);Dg.prototype.Zg=function(d){Ag(this.Ka,this.e(),{d:Eg(d)})};function Fg(d,e,h,l){dg.call(this,d,e,h,l)}H(Fg,jg);
function Gg(d,e){bg.call(this,d,e)}H(Gg,gg);Gg.prototype.tb=function(d,e){Ag(this.Ka,this.e(),{width:d,height:e})};function Hg(d,e,h,l,m){Wf.call(this,d,e,h,l,m);this.Kh={};this.kh=qb&&!Ab(526);this.ob=new Gf(this)}var Ig;H(Hg,Wf);function Jg(d,e,h){e=d.gb.L.createElementNS("http://www.w3.org/2000/svg",e);h&&Ag(d,e,h);return e}function Ag(d,e,h){for(var l in h)e.setAttribute(l,h[l])}a=Hg.prototype;a.Ha=function(d,e){(e||this.la).e().appendChild(d.e())};a.Wg=function(d,e){d=d.e();if(e instanceof we){d.setAttribute("fill",e.jb);d.setAttribute("fill-opacity",e.Ee)}else d.setAttribute("fill","none")};
a.Xg=function(d,e){d=d.e();if(e){d.setAttribute("stroke",e.jb);e=e.mh;F(e)&&e.indexOf("px")!=-1?d.setAttribute("stroke-width",parseFloat(e)/Yf(this)):d.setAttribute("stroke-width",e)}else d.setAttribute("stroke","none")};a.Yg=function(d,e,h,l,m,n){d.e().setAttribute("transform","translate("+e+","+h+") rotate("+l+" "+m+" "+n+")")};
a.j=function(){var d=Jg(this,"svg",{width:this.width,height:this.height,overflow:"hidden"}),e=Jg(this,"g");this.ng=Jg(this,"defs");this.la=new zg(e,this);d.appendChild(this.ng);d.appendChild(e);this.l=d;if(this.Ub||this.Rc||this.nd){this.e().setAttribute("preserveAspectRatio","none");this.kh?this.ag():this.e().setAttribute("viewBox",this.Rc+" "+this.nd+" "+(this.Ub?this.Ub+" "+this.qe:""))}};
a.ag=function(){if(this.X&&(this.Ub||this.Rc||!this.nd)){var d=this.nb();if(d.width==0)this.e().style.visibility="hidden";else{this.e().style.visibility="";var e=-this.Rc,h=-this.nd,l=d.width/this.Ub;d=d.height/this.qe;this.la.e().setAttribute("transform","scale("+l+" "+d+") translate("+e+" "+h+")")}}};a.tb=aa();
a.nb=function(){if(!M)return xf(this.e());var d=this.width,e=this.height,h=F(d)&&d.indexOf("%")!=-1,l=F(e)&&e.indexOf("%")!=-1;if(!this.X&&(h||l))return null;var m,n;if(h){m=this.e().parentNode;n=xf(m);d=parseFloat(d)*n.width/100}if(l){m=m||this.e().parentNode;n=n||xf(m);e=parseFloat(e)*n.height/100}return new Jd(d,e)};a.clear=function(){this.la.clear();We(this.ng);this.Kh={}};a.ef=function(d,e,h,l,m,n,o){d=Jg(this,"ellipse",{cx:d,cy:e,rx:h,ry:l});m=new Bg(d,this,m,n);this.Ha(m,o);return m};
a.qg=function(d,e,h,l,m,n,o){d=Jg(this,"rect",{x:d,y:e,width:h,height:l});m=new Cg(d,this,m,n);this.Ha(m,o);return m};a.drawImage=function(d,e,h,l,m,n){d=Jg(this,"image",{x:d,y:e,width:h,height:l,"image-rendering":"optimizeQuality",preserveAspectRatio:"none"});d.setAttributeNS("http://www.w3.org/1999/xlink","href",m);m=new Gg(d,this);this.Ha(m,n);return m};
a.rg=function(d,e,h,l,m,n,o,q,s,t){var u=Math.round(Ld(Math.atan2(m-h,l-e)*180/Math.PI));l=l-e;m=m-h;m=Math.round(Math.sqrt(l*l+m*m));var v=o.size;l={"font-family":o.tg,"font-size":v};var A=Math.round(v*0.85);v=Math.round(h-v/2+A);A=e;if(n=="center"){A+=Math.round(m/2);l["text-anchor"]="middle"}else if(n=="right"){A+=m;l["text-anchor"]="end"}l.x=A;l.y=v;if(o.bold)l["font-weight"]="bold";if(o.Ig)l["font-style"]="italic";if(u!=0)l.transform="rotate("+u+" "+e+" "+h+")";e=Jg(this,"text",l);e.appendChild(this.gb.L.createTextNode(d));
if(q==null&&M&&kb){d="black";if(s instanceof we)d=s.jb;q=new Td(1,d)}s=new Fg(e,this,q,s);this.Ha(s,t);return s};a.zc=function(d,e,h,l){d=Jg(this,"path",{d:Eg(d)});e=new Dg(d,this,e,h);this.Ha(e,l);return e};
function Eg(d){var e=[];lf(d,function(h,l){switch(h){case 0:e.push("M");Array.prototype.push.apply(e,l);break;case 1:e.push("L");Array.prototype.push.apply(e,l);break;case 2:e.push("C");Array.prototype.push.apply(e,l);break;case 3:h=l[3];e.push("A",l[0],l[1],0,Math.abs(h)>180?1:0,h>0?1:0,l[4],l[5]);break;case 4:e.push("Z");break}});return e.join(" ")}Hg.prototype.od=function(d){var e=Jg(this,"g");(d||this.la).e().appendChild(e);return new zg(e,this)};
Hg.prototype.pa=function(){var d=this.nb();Hg.g.pa.call(this);d||this.dispatchEvent("resize");if(this.kh){d=this.width;var e=this.height;typeof d=="string"&&d.indexOf("%")!=-1&&typeof e=="string"&&e.indexOf("%")!=-1&&this.ob.v(Kg(),yg,this.ag);this.ag()}};Hg.prototype.xb=function(){Hg.g.xb.call(this);this.kh&&this.ob.Mb(Kg(),yg,this.ag)};Hg.prototype.k=function(){delete this.Kh;delete this.ng;delete this.la;Hg.g.k.call(this)};function Kg(){if(!Ig){Ig=new wg(400);Ig.start()}return Ig};function Lg(){return this.l=this.Ka.gb.e(this.pb)||this.l}function Mg(d,e){this.pb=d.id;bg.call(this,d,e)}H(Mg,fg);Mg.prototype.e=Lg;Mg.prototype.clear=function(){We(this.e())};Mg.prototype.tb=function(d,e){var h=this.e(),l=h.style;l.width=T(d)+"px";l.height=T(e)+"px";h.coordsize=T(d)+" "+T(e);if(this.Ka.la!=this)h.coordorigin="0 0"};function Ng(d,e,h,l,m,n,o,q){this.pb=d.id;dg.call(this,d,e,o,q);this.dl=h;this.el=l;this.bm=m;this.cm=n}H(Ng,eg);Ng.prototype.e=Lg;
function Og(d,e,h,l){this.pb=d.id;dg.call(this,d,e,h,l)}H(Og,ig);Og.prototype.e=Lg;Og.prototype.tb=function(d,e){var h=this.e().style;h.width=T(d)+"px";h.height=T(e)+"px"};function Pg(d,e,h,l){this.pb=d.id;dg.call(this,d,e,h,l)}H(Pg,hg);Pg.prototype.e=Lg;Pg.prototype.Zg=function(d){Qg(this.e(),"path",Rg(d))};function Sg(d,e,h,l){this.pb=d.id;dg.call(this,d,e,h,l)}H(Sg,jg);Sg.prototype.e=Lg;function Tg(d,e){this.pb=d.id;bg.call(this,d,e)}H(Tg,gg);Tg.prototype.e=Lg;
Tg.prototype.tb=function(d,e){var h=this.e().style;h.width=Ug(d)+"px";h.height=Ug(e)+"px"};function Vg(d,e,h,l,m){Wf.call(this,d,e,h,l,m);this.ob=new Gf(this)}H(Vg,Wf);var Wg=document.documentMode&&document.documentMode>=8;function Xg(d){return F(d)&&Ua(d,"%")?d:parseFloat(d.toString())+"px"}function Ug(d){return Math.round((parseFloat(d.toString())-0.5)*100)}function T(d){return Math.round(parseFloat(d.toString())*100)}function Qg(d,e,h){if(Wg)d[e]=h;else d.setAttribute(e,h)}function Yg(d,e){d=d.gb.createElement("g_vml_:"+e);d.id="goog_"+eb++;return d}
function Zg(d){if(Wg&&d.X)d.e().innerHTML=d.e().innerHTML}Vg.prototype.Ha=function(d,e){(e||this.la).e().appendChild(d.e());Zg(this)};
Vg.prototype.Wg=function(d,e){d=d.e();d.fillcolor="";for(var h=0;h<d.childNodes.length;h++){var l=d.childNodes[h];l.tagName=="fill"&&d.removeChild(l)}if(e instanceof we)if(e.jb=="transparent")d.filled=false;else if(e.Ee!=1){d.filled=true;h=Yg(this,"fill");h.opacity=Math.round(e.Ee*100)+"%";h.color=e.jb;d.appendChild(h)}else{d.filled=true;d.fillcolor=e.jb}else d.filled=false;Zg(this)};
Vg.prototype.Xg=function(d,e){d=d.e();if(e){d.stroked=true;var h=e.mh;if(F(h)&&h.indexOf("px")==-1)h=parseFloat(h);else h*=Yf(this);var l=d.getElementsByTagName("stroke")[0];if(h<1){l=l||Yg(this,"stroke");l.opacity=h;l.km="1px";l.color=e.jb;d.appendChild(l)}else{l&&d.removeChild(l);d.strokecolor=e.jb;d.strokeweight=h+"px"}}else d.stroked=false;Zg(this)};
Vg.prototype.Yg=function(d,e,h,l,m,n){d=d.e();d.style.left=Ug(e)+"px";d.style.top=Ug(h)+"px";if(l||d.rotation){d.rotation=l;d.coordsize=T(m*2)+" "+T(n*2)}};function $g(d,e,h,l,m){var n=d.style;n.position="absolute";n.left=Ug(e)+"px";n.top=Ug(h)+"px";n.width=T(l)+"px";n.height=T(m)+"px";if(d.tagName=="shape")d.coordsize=T(l)+" "+T(m)}function ah(d,e){e=Yg(d,e);d=Xf(d);$g(e,0,0,d.width,d.height);return e}try{eval("document.namespaces")}catch(bh){}a=Vg.prototype;
a.j=function(){var d=this.gb.L;if(!d.namespaces.g_vml_){Wg?d.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML"):d.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml");d.createStyleSheet().cssText="g_vml_\\:*{behavior:url(#default#VML)}"}d=this.width;var e=this.height,h=this.gb.j("div",{style:"overflow:hidden;position:relative;width:"+Xg(d)+";height:"+Xg(e)});this.l=h;var l=Yg(this,"group"),m=l.style;m.position="absolute";m.left=m.top=0;m.width=this.width;m.height=this.height;
l.coordsize=this.Ub?T(this.Ub)+" "+T(this.qe):T(d)+" "+T(e);l.coordorigin=this.Rc!==undefined?T(this.Rc)+" "+T(this.nd):"0 0";h.appendChild(l);this.la=new Mg(l,this);mc(h,"resize",ra(this.zg,this))};a.zg=function(){var d=xf(this.e()),e=this.la.e().style;if(d.width){e.width=d.width+"px";e.height=d.height+"px"}else{for(d=this.e();d&&d.currentStyle&&d.currentStyle.display!="none";)d=d.parentNode;d&&d.currentStyle&&this.ob.v(d,"propertychange",this.zg)}this.dispatchEvent("resize")};a.tb=aa();
a.nb=function(){var d=this.e();return new Jd(d.style.pixelWidth||d.offsetWidth||1,d.style.pixelHeight||d.offsetHeight||1)};a.clear=function(){this.la.clear()};a.ef=function(d,e,h,l,m,n,o){var q=Yg(this,"oval");$g(q,d-h,e-l,h*2,l*2);d=new Ng(q,this,d,e,h,l,m,n);this.Ha(d,o);return d};a.qg=function(d,e,h,l,m,n,o){var q=Yg(this,"rect");$g(q,d,e,h,l);d=new Og(q,this,m,n);this.Ha(d,o);return d};
a.drawImage=function(d,e,h,l,m,n){var o=Yg(this,"image");$g(o,d,e,h,l);Qg(o,"src",m);d=new Tg(o,this);this.Ha(d,n);return d};
a.rg=function(d,e,h,l,m,n,o,q,s,t){var u=ah(this,"shape"),v=Yg(this,"path");e="M"+Ug(e)+","+Ug(h)+"L"+Ug(l)+","+Ug(m)+"E";Qg(v,"v",e);Qg(v,"textpathok","true");e=Yg(this,"textpath");e.setAttribute("on","true");h=e.style;h.fontSize=o.size*Yf(this);h.fontFamily=o.tg;if(n!=null)h["v-text-align"]=n;if(o.bold)h.fontWeight="bold";if(o.Ig)h.fontStyle="italic";Qg(e,"string",d);u.appendChild(v);u.appendChild(e);d=new Sg(u,this,q,s);this.Ha(d,t);return d};
a.zc=function(d,e,h,l){var m=ah(this,"shape");Qg(m,"path",Rg(d));d=new Pg(m,this,e,h);this.Ha(d,l);return d};
function Rg(d){var e=[];lf(d,function(h,l){switch(h){case 0:e.push("m");Array.prototype.push.apply(e,J(l,T));break;case 1:e.push("l");Array.prototype.push.apply(e,J(l,T));break;case 2:e.push("c");Array.prototype.push.apply(e,J(l,T));break;case 4:e.push("x");break;case 3:var m=l[2]+l[3];h=T(l[4]-l[0]*Math.cos(Md(m)));m=T(l[5]-l[1]*Math.sin(Md(m)));var n=T(l[0]),o=T(l[1]),q=Math.round(l[2]*-65536);l=Math.round(l[3]*-65536);e.push("ae",h,m,n,o,q,l);break}});return e.join(" ")}
Vg.prototype.od=function(d){var e=ah(this,"group");(d||this.la).e().appendChild(e);return new Mg(e,this)};Vg.prototype.pa=function(){Vg.g.pa.call(this);this.zg();Zg(this)};Vg.prototype.k=function(){this.la=null;Vg.g.k.call(this)};function ch(d,e,h){fd.call(this,d,e,h,dh)}H(ch,fd);
ch.prototype.J=function(d,e,h,l){this.transform=l;var m=this.i.m("arrow").width,n=this.i.m("arrow").height,o=new O(d.x-m/2,d.y),q=new O(o.x+m,o.y),s=new O(q.x-n,q.y+n/2),t=new O(q.x-n,q.y-n/2),u=new O(d.x,d.y+n),v=new O(d.x,d.y-n);d=new Vd;var A=new Td(this.i.m("arrow").stroke.width,this.i.m("arrow").stroke.color),E=new Td(this.i.m("arrow").font.stroke.width,this.i.m("arrow").font.stroke.color),R=new we(this.i.m("arrow").font.stroke.color),ba=l.ia;ba=new ve(ba/1.8>12?15:ba/1.8,this.i.m("arrow").font.name);
l=P(l,[o,q,s,t,u,v]);d.moveTo(l[0].x,l[0].y);d.lineTo(l[1].x,l[1].y);d.lineTo(l[2].x,l[2].y);d.moveTo(l[1].x,l[1].y);d.lineTo(l[3].x,l[3].y);ye(this.Q,e,l[4].x,l[4].y,m,n,"center","bottom",ba,E,R);ye(this.Q,h,l[5].x,l[5].y,m,n,"center","top",ba,E,R);this.Q.zc(d,A)};ch.prototype.hb=function(d,e){e||(e=this.Q.od());var h=this.i.m("arrow").highlight.color;h=new we(h,0.3);var l=this.i.m("arrow").highlight.radius*this.transform.ia;d=P(this.transform,[d])[0];this.Q.ef(d.x,d.y,l,l,null,h,e);return e};
var dh={arrow:{width:2,height:0.5,stroke:{width:2,color:"black"},fill:{color:"black"},font:{name:"Arial",stroke:{width:0.1,color:"grey"}},highlight:{radius:0.5,color:"grey"}}};function eh(d,e,h){fd.call(this,d,e,h,fh)}H(eh,fd);eh.prototype.J=function(d,e){var h=this.i.m("plus").size;h0=new O(d.x,d.y-h);h1=new O(d.x,d.y+h);v0=new O(d.x-h,d.y);v1=new O(d.x+h,d.y);d=new Vd;h=new Td(this.i.m("plus").stroke.width,this.i.m("plus").stroke.color);e=P(e,[h0,h1,v0,v1]);d.moveTo(e[0].x,e[0].y);d.lineTo(e[1].x,e[1].y);d.moveTo(e[2].x,e[2].y);d.lineTo(e[3].x,e[3].y);this.Q.zc(d,h,null)};var fh={plus:{size:0.25,stroke:{width:2,color:"black"}}};function id(d,e,h,l,m,n){Zf.call(this);arguments.length==6&&this.setTransform(d,e,h,l,m,n)}H(id,Zf);function P(d,e){e=J(e,function(l){return[l.x,l.y]});var h=Ra(e);e=[];d.transform(h,0,e,0,h.length/2);d=[];for(h=0;h<e.length;h+=2)d.push(new O(e[h],e[h+1]));return d}function ie(d,e){return P(d,e)}id.prototype.Vb=function(){var d=this.ia*this.Da-this.Ma*this.Aa;return new id(this.Da/d,-this.Aa/d,-this.Ma/d,this.ia/d,(this.Ma*this.ab-this.Da*this.$a)/d,(this.Aa*this.$a-this.ia*this.ab)/d)};function gh(d,e,h){fd.call(this,d,e,h,hh);this.Uf=1;this.bk=new jd(d);this.Oa=new Ee(this.bk,e,this.i);this.$i=new od(d);this.fg=new ch(this.$i,e,this.i);this.kk=new td(d);this.lk=new eh(this.kk,e,this.i)}H(gh,fd);
gh.prototype.J=function(d){var e=Ia(d.sb,d.rb);if(e.length>0){if(!this.transform){var h=this.ld(e),l=this.i.m("margin");h.expand(l.top,l.right,l.bottom,l.left);this.transform=gd(this,h)}I(e,function(m){this.Oa.J(m,this.transform)},this);I(d.$d,function(m){this.lk.J(m,this.transform)},this);I(d.wc,function(m){this.fg.J(m,d.pk,d.gj,this.transform)},this)}};gh.prototype.ld=function(d){d=Ra(J(d,function(e){return e.b}));d=J(d,function(e){return e.a});if(d.length>0)return Hd.apply(null,d)};
gh.prototype.r=N("kemia.view.ReactionRenderer");var hh={margin:2};function ih(d,e,h){this.target=d;this.handle=e||d;this.di=h||new Kd(NaN,NaN,NaN,NaN);this.L=Ne(d);this.ic=new Gf(this);mc(this.handle,"mousedown",this.fd,false,this)}H(ih,wc);var jh=L||M&&Ab("1.9.3");a=ih.prototype;a.screenX=0;a.screenY=0;a.Ai=0;a.Ci=0;a.Wb=0;a.Xb=0;a.bb=true;a.Uc=false;a.Vh=0;a.ck=0;a.Tj=false;a.zb=w("ic");a.Kc=ca("bb");a.k=function(){ih.g.k.call(this);pc(this.handle,"mousedown",this.fd,false,this);this.ic.ca();delete this.target;delete this.handle;delete this.ic};
a.fd=function(d){if(this.bb&&!this.Uc&&(d.type!="mousedown"||Db(d,0))){if(this.Vh==0){kh(this,d);if(this.Uc)d.preventDefault();else return}else d.preventDefault();var e=this.L,h=e.documentElement,l=!jh;this.ic.v(e,"mousemove",this.dk,l);this.ic.v(e,"mouseup",this.hf,l);if(jh){h.setCapture(false);this.ic.v(h,"losecapture",this.hf)}else this.ic.v(e?e.parentWindow||e.defaultView:window,"blur",this.hf);L&&this.Tj&&this.ic.v(e,"dragstart",Ta);this.wk&&this.ic.v(this.wk,"scroll",this.gk,l);this.screenX=
this.Ai=d.screenX;this.screenY=this.Ci=d.screenY;this.Wb=this.target.offsetLeft;this.Xb=this.target.offsetTop;this.Ie=jf(Le(this.L));this.ck=ta()}};function kh(d,e){if(d.dispatchEvent(new lh("start",d,e.clientX,e.clientY,e))!==false)d.Uc=true}ih.prototype.hf=function(d,e){this.ic.Ke();jh&&this.L.releaseCapture();if(this.Uc){this.Uc=false;this.dispatchEvent(new lh("end",this,d.clientX,d.clientY,d,mh(this,this.Wb),nh(this,this.Xb),e))}};
ih.prototype.dk=function(d){if(this.bb){var e=d.screenX-this.screenX,h=d.screenY-this.screenY;this.screenX=d.screenX;this.screenY=d.screenY;if(!this.Uc){var l=this.Ai-this.screenX,m=this.Ci-this.screenY;if(l*l+m*m>this.Vh){kh(this,d);if(!this.Uc){this.hf(d);return}}}h=oh(this,e,h);e=h.x;h=h.y;if(this.Uc)if(this.dispatchEvent(new lh("beforedrag",this,d.clientX,d.clientY,d,e,h))!==false){ph(this,d,e,h,false);d.preventDefault()}}};
function oh(d,e,h){var l=jf(Le(d.L));e+=l.x-d.Ie.x;h+=l.y-d.Ie.y;d.Ie=l;d.Wb+=e;d.Xb+=h;return new O(mh(d,d.Wb),nh(d,d.Xb))}ih.prototype.gk=function(d){var e=oh(this,0,0);d.clientX=this.Ie.x-this.screenX;d.clientY=this.Ie.x-this.screenY;ph(this,d,e.x,e.y,true)};function ph(d,e,h,l){d.target.style.left=h+"px";d.target.style.top=l+"px";d.dispatchEvent(new lh("drag",d,e.clientX,e.clientY,e,h,l))}
function mh(d,e){var h=d.di;d=!isNaN(h.left)?h.left:null;h=!isNaN(h.width)?h.width:0;return Math.min(d!=null?d+h:Infinity,Math.max(d!=null?d:-Infinity,e))}function nh(d,e){var h=d.di;d=!isNaN(h.top)?h.top:null;h=!isNaN(h.height)?h.height:0;return Math.min(d!=null?d+h:Infinity,Math.max(d!=null?d:-Infinity,e))}function lh(d,e,h,l,m,n,o,q){Sa.call(this,d);this.clientX=h;this.clientY=l;this.Yk=m;this.left=n!==undefined?n:e.Wb;this.top=o!==undefined?o:e.Xb;this.gl=e;this.fl=!!q}H(lh,Sa);var qh,rh,sh,th,uh,vh,wh;wh=vh=uh=th=sh=rh=qh=false;var xh=lb();if(xh)if(xh.indexOf("Firefox")!=-1)qh=true;else if(xh.indexOf("Camino")!=-1)rh=true;else if(xh.indexOf("iPhone")!=-1||xh.indexOf("iPod")!=-1)sh=true;else if(xh.indexOf("iPad")!=-1)th=true;else if(xh.indexOf("Android")!=-1)uh=true;else if(xh.indexOf("Chrome")!=-1)vh=true;else if(xh.indexOf("Safari")!=-1)wh=true;var yh=rh,zh=sh,Ah=th,Bh=uh,Ch=vh,Dh=wh;var Eh;a:{var Fh="",Gh,Hh;if(qh)Gh=/Firefox\/([0-9.]+)/;else if(L||pb){Eh=ub;break a}else if(Ch)Gh=/Chrome\/([0-9.]+)/;else if(Dh)Gh=/Safari\/([0-9.]+)/;else if(zh||Ah){Gh=/Version\/(\S+).*Mobile\/(\S+)/;Hh=true}else if(Bh)Gh=/Android\s+([0-9.]+)(?:.*Version\/([0-9.]+))?/;else if(yh)Gh=/Camino\/([0-9.]+)/;if(Gh){var Ih=Gh.exec(lb());Fh=Ih?Hh?Ih[1]+"."+Ih[2]:Ih[2]||Ih[1]:""}Eh=Fh};L&&Ab("7.0");M&&Ab("1.8");L||pb||M&&Ab("1.9");L||qb&&Ab("525");qb&&Ab("531");qb&&Ab("528");M&&Ab("1.9")||L||pb||qb&&Ab("531");M||qb&&Ab("526");Ch&&bb(Eh,"4");function Jh(d){return function(){return d}}var Kh=Jh(false);function U(){this.bb=this.Ri()}H(U,wc);U.prototype.Ri=Kh;function Lh(d,e){d.f=e;I(d.pf(),aa())}a=U.prototype;a.pf=function(){return[]};a.gf=function(d){if(this.f==d)this.bb=true;else Yc(this.r,"Trying to enable an unregistered field with this plugin.")};a.og=function(d){if(this.f==d)this.bb=false;else Yc(this.r,"Trying to disable an unregistered field with this plugin.")};a.r=N("kemia.controller.Plugin");a.da=function(d){return this.f==d?this.bb:false};a.k=function(){this.f&&Mh(this,this.f);U.g.k.call(this)};
function Mh(d){if(d.f){d.og(d.f);d.f=null}}U.prototype.bj=true;U.prototype.sh=Kh;var Nh=ec({Fl:1,Gl:2,Hl:3,sf:4,Dg:5,execCommand:6,queryCommandValue:7,wa:8,ud:9,Bb:10,Ab:11,Nj:12,yl:13,xl:14,wl:15,Dl:16,Bl:17,zl:18,vl:19,ul:20,Cj:21,Ll:22,Kl:23,Jl:24,Il:25,El:26});U.prototype.execCommand=function(d){var e=this.Wj(d);e||Oh(this.f);try{Ph(this.f);var h=this.pd.apply(this,arguments)}finally{if(!e){Qh(this.f);this.f.dispatchEvent(Rh)}}return h};U.prototype.Wj=Kh;U.prototype.Cb=B(false);function Sh(d,e,h){this.cells=[];this.fc=e?e:2;this.We=h?h:0.3;this.tc=this.sc=1E5;this.le=this.je=-100000;e=0;for(h=d.length;e<h;e++){var l=d[e];if(l instanceof V)for(var m=0,n=l.b.length;m<n;m++){var o=l.b[m];if(o.a.x<this.sc)this.sc=o.a.x;if(o.a.x>this.je)this.je=o.a.x;if(o.a.y<this.tc)this.tc=o.a.y;if(o.a.y>this.le)this.le=o.a.y}else if(l instanceof O){if(l.x<this.sc)this.sc=l.x;if(l.x>this.je)this.je=l.x;if(l.y<this.tc)this.tc=l.y;if(l.y>this.le)this.le=l.y}}this.sc-=1;this.tc-=1;this.je+=1;
this.le+=1;this.width=this.je-this.sc;this.height=this.le-this.tc;this.ie=Math.ceil(this.width/this.fc);this.Qi=Math.ceil(this.height/this.fc);e=0;for(h=this.ie*this.Qi;e<h;e++)this.cells.push([]);I(d,function(q){if(q instanceof V){I(q.b,function(t){var u=Math.floor((t.a.x-this.sc)/this.fc);this.cells[Math.floor((t.a.y-this.tc)/this.fc)*this.ie+u].push(t)},this);I(q.h,function(t){var u=Yd(Fd(t.source.a,t.target.a));u.scale(0.5);t.Vl=u;var v=Math.floor((u.x-this.sc)/this.fc);this.cells[Math.floor((u.y-
this.tc)/this.fc)*this.ie+v].push(t)},this)}else if(q instanceof O){var s=Math.floor((q.x-this.sc)/this.fc);this.cells[Math.floor((q.y-this.tc)/this.fc)*this.ie+s].push(q)}},this)}function Th(d,e){var h=[],l=Math.floor((e.x-d.sc)/d.fc);e=Math.floor((e.y-d.tc)/d.fc);var m=l-1;for(l=l+2;m<l;m++)if(!(m<0||m>=d.ie))for(var n=e-1,o=e+2;n<o;n++)n<0||n>=d.Qi||h.push(n*d.ie+m);return h}
function Uh(d,e){var h=[],l=Th(d,e);i=0;for(li=l.length;i<li;i++){var m=d.cells[l[i]];j=0;for(lj=m.length;j<lj;j++){var n=m[j];if(n instanceof Q){var o=Dd(n.a,e);if(o<d.We)h.push({Of:n,re:o});else o<3*d.We&&h.push({Of:n.G,re:o*2})}else if(n instanceof S){o=Dd(Od(new Nd(n.source.a.x,n.source.a.y,n.target.a.x,n.target.a.y),e.x,e.y),e);o<d.We&&h.push({Of:n,re:o+d.We})}else if(n instanceof O){o=Dd(n,e);o<d.We&&h.push({Of:n,re:o})}}}h.sort(function(q,s){return q.re-s.re});return J(h,function(q){return q.Of})}
;function Vh(d,e){if(M){d.setAttribute("role",e);d.am=e}}function Wh(d,e,h){M&&d.setAttribute("aria-"+e,h)};function Xh(d,e,h,l,m){if(!L&&!(qb&&Ab("525")))return true;if(kb&&m)return Yh(d);if(m&&!l)return false;if(L&&!h&&(e==17||e==18))return false;if(L&&l&&e==d)return false;switch(d){case 13:return true;case 27:return!qb}return Yh(d)}
function Yh(d){if(d>=48&&d<=57)return true;if(d>=96&&d<=106)return true;if(d>=65&&d<=90)return true;switch(d){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return true;default:return false}};function Zh(d){this.gb=d||Le();Dc.call(this)}H(Zh,Dc);a=Zh.prototype;a.ej="goog-buttonset";a.Jh=null;a.l=null;a.dj=null;a.ya=function(d,e,h,l){Dc.prototype.ya.call(this,d,e);if(h)this.Jh=d;if(l)this.dj=d;return this};a.J=function(){if(this.l){this.l.innerHTML="";var d=Le(this.l);Bc(this,function(e,h){e=d.j("button",{name:h},e);if(h==this.Jh)e.className=this.ej+"-default";this.l.appendChild(e)},this)}};var $h=G("OK"),ai=G("Cancel"),bi=G("Yes"),ci=G("No"),di=G("Save"),ei=G("Continue");
(new Zh).ya("ok",$h,true,true);(new Zh).ya("ok",$h,true).ya("cancel",ai,false,true);(new Zh).ya("yes",bi,true).ya("no",ci,false,true);(new Zh).ya("yes",bi).ya("no",ci,true).ya("cancel",ai,false,true);(new Zh).ya("continue",ei).ya("save",di).ya("cancel",ai,true,true);/*
 Copyright 2010 Paul Novak (paul@wingu.com)

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function fi(d,e){this.Fb=d;this.id=d.id;this.hl=Le(d);this.Z=[];this.Ic={};this.Vd={};for(var h in Nh)this.Vd[h]=[];this.i=new Dc(gi);e&&this.i.Ed(e);e=d.clientWidth;d=d.clientHeight;d=L?new Vg(e,d,void 0,void 0,void 0):qb&&(!Ab("420")||rb)?new tg(e,d,void 0,void 0,void 0):new Hg(e,d,void 0,void 0,void 0);d.j();this.Q=d;this.Q.J(this.Fb);this.ok=new cd(this);this.R=new gh(this.ok,this.Q,this.i);this.Zh=this.bi=false;this.Cc=new Gf(this);this.Fk=[];this.Cc.v(this.Fb,"mousedown",this.Mj,void 0,void 0);
this.Cc.v(this.Fb,"mousemove",this.Oj,void 0,void 0);this.Cc.v(this.Fb,"mouseup",this.Qh,void 0,void 0);this.Cc.v(this.Fb,"paste",this.Qj,void 0,void 0);this.hj&&this.em()&&Cf(this.hj,this.e());this.dispatchEvent("load");for(var l in this.Ic)this.Ic[l].gf(this);this.Jf=hi;this.Zh=this.bi=false;this.selected=[];this.Mf=[]}var ii;H(fi,wc);D("kemia.controller.ReactionEditor",fi,void 0);function ji(d){ii=d}
fi.prototype.clear=function(){this.Q.clear();this.Z=[];var d=new we(this.i.m("background").color);this.Q.qg(0,0,this.Q.sd().width,this.Q.sd().height,null,d)};function ki(d,e){d.R.transform=undefined;d.R.Uf=e}fi.prototype.na=function(d){this.clear();this.Z=d;d=Ra(J(d,function(e){if(e instanceof mi){if(e.$d.length==0){ni(e,e.sb);ni(e,e.rb)}e.wc.length==0&&e.sb.length>0&&e.rb.length>0&&oi(e,e.sb,e.rb);return Ia(e.sb,e.rb,e.$d,e.wc)}else return[e]}));if(d.length>0)this.Mf=new Sh(d,1,0.5);this.J()};
D("kemia.controller.ReactionEditor.prototype.setModels",fi.prototype.na,void 0);fi.prototype.J=function(){I(this.Z,function(d){d instanceof mi&&this.R.J(d);d instanceof V&&this.R.Oa.J(d)},this)};D("kemia.controller.ReactionEditor.prototype.render",fi.prototype.J,void 0);function Oh(d){d.dispatchEvent(pi)}fi.prototype.xe=function(d){for(var e=this.Vd[d],h=La(arguments,1),l=0;l<e.length;++l){var m=e[l];if((m.da(this)||U.Mk[d])&&m[Nh[d]].apply(m,h))return true}return false};
function Qh(d){d.bi=true;d.Zh=true}function qi(d,e){e=ie(d.R.Oa.transform.Vb(),[ri(e)])[0];var h;d=Uh(d.Mf,{x:e.x,y:e.y});if(d.length>0)h=d[0];return h}function si(d,e){return P(d.R.Oa.transform,[e])[0]}function ri(d){return ti(d.currentTarget,d.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,d.clientY+document.body.scrollTop+document.documentElement.scrollTop)}
function ti(d,e,h){e-=d.offsetLeft;for(h-=d.offsetTop;d=d.offsetParent;){e-=d.offsetLeft;h-=d.offsetTop}return new O(e,h)}function ui(d,e){e=ie(d.R.Oa.transform.Vb(),[ri(e)])[0];return Uh(d.Mf,{x:e.x,y:e.y})}a=fi.prototype;a.Oj=function(d){this.xe(12,d)};a.Qh=function(d){this.xe(9,d)};a.Mj=function(d){this.xe(8,d)};a.Qh=function(d){this.xe(9,d)};a.Qj=function(d){this.xe(25,d)};
function vi(d,e,h){for(var l=d.Vd[7],m=0;m<l.length;++m){var n=l[m];if(n.da(d)&&n.Cb(e)&&(h||n.sh()))return n.queryCommandValue(e)}return h?null:false}function Ph(d){I(d.Vd[7],function(e){e.de&&e.de()})}fi.prototype.queryCommandValue=function(d){var e=this.Bf();if(F(d))return vi(this,d,e);else{for(var h={},l=0;l<d.length;l++)h[d[l]]=vi(this,d[l],e);return h}};
fi.prototype.execCommand=function(d){for(var e=arguments,h,l=this.Vd[6],m=0;m<l.length;++m){var n=l[m];if(n.da(this)&&n.Cb(d)){h=n.execCommand.apply(n,e);break}}return h};fi.prototype.sk=function(d){var e=d.kc();this.Ic[e]&&Yc(this.r,"Cannot register the same class of plugin twice ["+e+"]");this.Ic[e]=d;for(var h in Nh)d[Nh[h]]&&this.Vd[h].push(d);Lh(d,this);this.Bf()&&d.gf(this)};D("kemia.controller.ReactionEditor.prototype.registerPlugin",fi.prototype.sk,void 0);
fi.prototype.Bf=function(){return this.Jf==hi};var hi=2;fi.prototype.r=N("kemia.controller.ReactionEditor");var Rh="cvc",pi="beforechange";
fi.prototype.k=function(){if(this.Jf==1||this.Bf())this.r.log(Tc,"Disposing an editor that is in use.",void 0);this.Fb&&this.execCommand(wi.Ik);for(var d in this.Ic){var e=this.Ic[d];e.sh()||e.og(this)}this.Jf=0;this.Cc&&this.Cc.Ke();this.Yl=null;if(this.Cc){this.Cc.ca();this.Cc=null}for(;d=this.Fk.pop();)d.ca();ii==this.id&&ji(null);for(var h in this.Ic){d=this.Ic[h];d.bj&&d.ca()}delete this.Ic;fi.g.k.call(this)};fi.prototype.Bf=function(){return this.Jf==hi};
var gi={background:{color:"#F0FFF0"},margin:{left:1,right:1,top:1,bottom:1}};function xi(d){d&&yi(this,d)}H(xi,wc);a=xi.prototype;a.l=null;a.Gf=null;a.Jg=null;a.If=null;a.ze=-1;a.Wd=-1;
var zi={"3":13,"12":144,"63232":38,"63233":40,"63234":37,"63235":39,"63236":112,"63237":113,"63238":114,"63239":115,"63240":116,"63241":117,"63242":118,"63243":119,"63244":120,"63245":121,"63246":122,"63247":123,"63248":44,"63272":46,"63273":36,"63275":35,"63276":33,"63277":34,"63289":144,"63302":45},Ai={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Bi={61:187,
59:186},Ci=L||qb&&Ab("525");xi.prototype.Jj=function(d){if(Ci&&!Xh(d.keyCode,this.ze,d.shiftKey,d.ctrlKey,d.altKey))this.handleEvent(d);else this.Wd=M&&d.keyCode in Bi?Bi[d.keyCode]:d.keyCode};xi.prototype.Kj=function(){this.Wd=this.ze=-1};
xi.prototype.handleEvent=function(d){var e=d.Dc,h,l;if(L&&d.type=="keypress"){h=this.Wd;l=h!=13&&h!=27?e.keyCode:0}else if(qb&&d.type=="keypress"){h=this.Wd;l=e.charCode>=0&&e.charCode<63232&&Yh(h)?e.charCode:0}else if(pb){h=this.Wd;l=Yh(h)?e.keyCode:0}else{h=e.keyCode||this.Wd;l=e.charCode||0;if(kb&&l==63&&!h)h=191}var m=h,n=e.keyIdentifier;if(h)if(h>=63232&&h in zi)m=zi[h];else{if(h==25&&d.shiftKey)m=9}else if(n&&n in Ai)m=Ai[n];d=m==this.ze;this.ze=m;e=new Di(m,l,d,e);try{this.dispatchEvent(e)}finally{e.ca()}};
xi.prototype.e=w("l");function yi(d,e){d.If&&d.detach();d.l=e;d.Gf=mc(d.l,"keypress",d);d.Jg=mc(d.l,"keydown",d.Jj,false,d);d.If=mc(d.l,"keyup",d.Kj,false,d)}xi.prototype.detach=function(){if(this.Gf){rc(this.Gf);rc(this.Jg);rc(this.If);this.If=this.Jg=this.Gf=null}this.l=null;this.ze=-1};xi.prototype.k=function(){xi.g.k.call(this);this.detach()};function Di(d,e,h,l){l&&this.we(l,void 0);this.type="key";this.keyCode=d;this.charCode=e;this.repeat=h}H(Di,Bb);function Ei(){}var Fi;fa(Ei);a=Ei.prototype;a.Ec=aa();a.j=function(d){return d.qa().j("div",this.Fc(d).join(" "),d.eb)};a.va=function(d){return d};a.te=function(d,e,h){if(d=d.e?d.e():d)if(L&&!Ab("7")){var l=Gi(this,He(d),e);l.push(e);sa(h?Ie:Je,d).apply(null,l)}else Ke(d,e,h)};a.mc=function(d){Uf(d)&&this.ed(d.e(),true);d.da()&&this.oc(d,d.Za())};a.Vf=function(d,e){Ff(d,!e,!L&&!pb)};a.ed=function(d,e){this.te(d,this.p()+"-rtl",e)};a.Yc=function(d){var e;if(d.Ya&32&&(e=d.za()))return cf(e);return false};
a.oc=function(d,e){var h;if(d.Ya&32&&(h=d.za())){if(!e&&d.Fa&32){try{h.blur()}catch(l){}d.Fa&32&&d.Wc(null)}cf(h)!=e&&df(h,e)}};a.ub=function(d,e){Bf(d,e)};a.Jb=function(d,e,h){var l=d.e();if(l){var m=this.mf(e);m&&this.te(d,m,h);this.Ze(l,e,h)}};a.Ze=function(d,e,h){if(M){Fi||(Fi=hc(1,"disabled",4,"pressed",8,"selected",16,"checked",64,"expanded"));(e=Fi[e])&&Wh(d,e,h)}};
a.Jc=function(d,e){var h=this.va(d);if(h){We(h);if(e)if(F(e))$e(h,e);else{d=function(l){if(l){var m=Ne(h);h.appendChild(F(l)?m.createTextNode(l):l)}};if(ia(e))I(e,d);else ja(e)&&!("nodeType"in e)?I(Ja(e),d):d(e)}}};a.za=function(d){return d.e()};a.p=B("goog-control");a.Fc=function(d){var e=this.p(),h=[e],l=this.p();l!=e&&h.push(l);e=d.Fa;for(l=[];e;){var m=e&-e;l.push(this.mf(m));e&=~m}h.push.apply(h,l);(d=d.jc)&&h.push.apply(h,d);L&&!Ab("7")&&h.push.apply(h,Gi(this,h));return h};
function Gi(d,e,h){var l=[];if(h)e=e.concat([h]);I([],function(m){if(Ba(m,sa(K,e))&&(!h||K(m,h)))l.push(m.join("_"))});return l}Ei.prototype.mf=function(d){this.Ch||Hi(this);return this.Ch[d]};function Hi(d){var e=d.p();d.Ch=hc(1,e+"-disabled",2,e+"-hover",4,e+"-active",8,e+"-selected",16,e+"-checked",32,e+"-focused",64,e+"-open")};function Ii(d){for(var e;d;){e=na(d);if(e=Ji[e])break;d=d.g?d.g.constructor:null}if(e)return la(e.ra)?e.ra():new e;return null}function Ki(d,e){if(!d)throw Error("Invalid class name "+d);if(!la(e))throw Error("Invalid decorator function "+e);Li[d]=e}var Ji={},Li={};function W(d,e,h){Jf.call(this,h);this.t=e||Ii(this.constructor);this.Wf(d)}H(W,Jf);a=W.prototype;a.eb=null;a.Fa=0;a.Ya=39;a.uh=255;a.dh=0;a.Ob=true;a.jc=null;a.Eg=true;a.eg=false;function Mi(d,e){d.X&&e!=d.Eg&&Ni(d,e);d.Eg=e}W.prototype.za=function(){return this.t.za(this)};W.prototype.of=function(){return this.Eb||(this.Eb=new xi)};W.prototype.bg=function(d){if(d){if(this.jc)K(this.jc,d)||this.jc.push(d);else this.jc=[d];this.t.te(this,d,true)}};
function Oi(d,e){if(e&&d.jc){Ga(d.jc,e);if(d.jc.length==0)d.jc=null;d.t.te(d,e,false)}}W.prototype.te=function(d,e){e?this.bg(d):Oi(this,d)};W.prototype.j=function(){var d=this.t.j(this);this.l=d;if(M){var e=this.t.Ec();e&&Vh(d,e)}this.eg||this.t.Vf(d,false);this.Za()||this.t.ub(d,false)};W.prototype.va=function(){return this.t.va(this.e())};
W.prototype.pa=function(){W.g.pa.call(this);this.t.mc(this);if(this.Ya&-2){this.Eg&&Ni(this,true);if(this.Ya&32){var d=this.za();if(d){var e=this.of();yi(e,d);this.zb().v(e,"key",this.lc).v(d,"focus",this.rf).v(d,"blur",this.Wc)}}}};
function Ni(d,e){var h=d.zb(),l=d.e();if(e){h.v(l,"mouseover",d.Bb).v(l,"mousedown",d.wa).v(l,"mouseup",d.ud).v(l,"mouseout",d.Ab);L&&h.v(l,"dblclick",d.Ph)}else{h.Mb(l,"mouseover",d.Bb).Mb(l,"mousedown",d.wa).Mb(l,"mouseup",d.ud).Mb(l,"mouseout",d.Ab);L&&h.Mb(l,"dblclick",d.Ph)}}a=W.prototype;a.xb=function(){W.g.xb.call(this);this.Eb&&this.Eb.detach();this.Za()&&this.da()&&this.t.oc(this,false)};
a.k=function(){W.g.k.call(this);if(this.Eb){this.Eb.ca();delete this.Eb}delete this.t;this.jc=this.eb=null};a.Jc=function(d){this.t.Jc(this.e(),d);this.Wf(d)};a.Wf=ca("eb");a.lf=function(){var d=this.eb;if(!d||F(d))return d;return(d=ia(d)?J(d,ef).join(""):ef(d))&&Va(d)};a.ed=function(d){W.g.ed.call(this,d);var e=this.e();e&&this.t.ed(e,d)};a.Vf=function(d){this.eg=d;var e=this.e();e&&this.t.Vf(e,d)};a.Za=w("Ob");
a.ub=function(d,e){if(e||this.Ob!=d&&this.dispatchEvent(d?"show":"hide")){(e=this.e())&&this.t.ub(e,d);this.da()&&this.t.oc(this,d);this.Ob=d;return true}return false};a.da=function(){return!!!(this.Fa&1)};a.Kc=function(d){var e=this.ma;if(!(e&&typeof e.da=="function"&&!e.da())&&Pi(this,1,!d)){if(!d){this.setActive(false);this.pc(false)}this.Za()&&this.t.oc(this,d);this.Jb(1,!d)}};a.pc=function(d){Pi(this,2,d)&&this.Jb(2,d)};a.Gc=function(){return!!(this.Fa&4)};
a.setActive=function(d){Pi(this,4,d)&&this.Jb(4,d)};a.ah=function(d){Pi(this,8,d)&&this.Jb(8,d)};a.Af=function(){return!!(this.Fa&16)};function Qi(d,e){Pi(d,16,e)&&d.Jb(16,e)}function Ri(d,e){Pi(d,32,e)&&d.Jb(32,e)}W.prototype.ka=function(d){Pi(this,64,d)&&this.Jb(64,d)};W.prototype.Jb=function(d,e){if(this.Ya&d&&e!=!!(this.Fa&d)){this.t.Jb(this,d,e);this.Fa=e?this.Fa|d:this.Fa&~d}};
function Si(d,e,h){if(d.X&&d.Fa&e&&!h)throw Error("Component already rendered");!h&&d.Fa&e&&d.Jb(e,false);d.Ya=h?d.Ya|e:d.Ya&~e}function Ti(d,e){return!!(d.uh&e)&&!!(d.Ya&e)}function Pi(d,e,h){return!!(d.Ya&e)&&!!(d.Fa&e)!=h&&(!(d.dh&e)||d.dispatchEvent(Lf(e,h)))&&!d.pg}a=W.prototype;a.Bb=function(d){d.relatedTarget&&!Ze(this.e(),d.relatedTarget)&&this.dispatchEvent("enter")&&this.da()&&Ti(this,2)&&this.pc(true)};
a.Ab=function(d){if(d.relatedTarget&&!Ze(this.e(),d.relatedTarget)&&this.dispatchEvent("leave")){Ti(this,4)&&this.setActive(false);Ti(this,2)&&this.pc(false)}};a.wa=function(d){if(this.da()){Ti(this,2)&&this.pc(true);if(Db(d,0)){Ti(this,4)&&this.setActive(true);this.t.Yc(this)&&this.za().focus()}}!this.eg&&Db(d,0)&&d.preventDefault()};a.ud=function(d){if(this.da()){Ti(this,2)&&this.pc(true);this.Gc()&&this.Hc(d)&&Ti(this,4)&&this.setActive(false)}};a.Ph=function(d){this.da()&&this.Hc(d)};
a.Hc=function(d){Ti(this,16)&&Qi(this,!this.Af());Ti(this,8)&&this.ah(true);Ti(this,64)&&this.ka(!!!(this.Fa&64));var e=new Sa("action",this);if(d)for(var h=["altKey","ctrlKey","metaKey","shiftKey","platformModifierKey"],l,m=0;l=h[m];m++)e[l]=d[l];return this.dispatchEvent(e)};a.rf=function(){Ti(this,32)&&Ri(this,true)};a.Wc=function(){Ti(this,4)&&this.setActive(false);Ti(this,32)&&Ri(this,false)};a.lc=function(d){if(this.Za()&&this.da()&&this.Ud(d)){d.preventDefault();d.stopPropagation();return true}return false};
a.Ud=function(d){return d.keyCode==13&&this.Hc(d)};if(!la(W))throw Error("Invalid component class "+W);if(!la(Ei))throw Error("Invalid renderer class "+Ei);var Ui=na(W);Ji[Ui]=Ei;Ki("goog-control",function(){return new W(null)});function Vi(){}H(Vi,Ei);fa(Vi);Vi.prototype.j=function(d){return d.qa().j("div",this.p())};Vi.prototype.Jc=aa();Vi.prototype.p=B("goog-menuseparator");function Wi(d,e){W.call(this,null,d||Vi.ra(),e);Si(this,1,false);Si(this,2,false);Si(this,4,false);Si(this,32,false);this.Fa=1}H(Wi,W);Wi.prototype.pa=function(){Wi.g.pa.call(this);Vh(this.e(),"separator")};Ki("goog-menuseparator",function(){return new Wi});function Xi(){}fa(Xi);Xi.prototype.Ec=aa();function Yi(d,e,h){if(e)e.tabIndex=h?0:-1}a=Xi.prototype;a.j=function(d){return d.qa().j("div",this.Fc(d).join(" "))};a.va=function(d){return d};a.mc=function(d){d=d.e();Ff(d,true,M);if(L)d.hideFocus=true;var e=this.Ec();e&&Vh(d,e)};a.za=function(d){return d.e()};a.p=B("goog-container");a.Fc=function(d){var e=this.p(),h=[e,d.Zd==Zi?e+"-horizontal":e+"-vertical"];d.da()||h.push(e+"-disabled");return h};a.Oh=function(){return $i};function aj(d,e,h){Jf.call(this,h);this.t=e||Xi.ra();this.Zd=d||this.t.Oh()}H(aj,Jf);var Zi="horizontal",$i="vertical";a=aj.prototype;a.Xj=null;a.Eb=null;a.t=null;a.Zd=null;a.Ob=true;a.bb=true;a.ug=true;a.ga=-1;a.Ea=null;a.wd=false;a.Wi=false;a.Pc=null;a.za=function(){return this.Xj||this.t.za(this)};a.of=function(){return this.Eb||(this.Eb=new xi(this.za()))};a.j=function(){this.l=this.t.j(this)};a.va=function(){return this.t.va(this.e())};
a.pa=function(){aj.g.pa.call(this);Rf(this,function(e){e.X&&bj(this,e)},this);var d=this.e();this.t.mc(this);this.ub(this.Ob,true);this.zb().v(this,"enter",this.Bg).v(this,"highlight",this.Cg).v(this,"unhighlight",this.Fg).v(this,"open",this.Pj).v(this,"close",this.Fj).v(d,"mousedown",this.wa).v(Ne(d),"mouseup",this.Hj).v(d,["mousedown","mouseup","mouseover","mouseout"],this.Ej);this.Yc()&&cj(this,true)};
function cj(d,e){var h=d.zb(),l=d.za();e?h.v(l,"focus",d.rf).v(l,"blur",d.Wc).v(d.of(),"key",d.lc):h.Mb(l,"focus",d.rf).Mb(l,"blur",d.Wc).Mb(d.of(),"key",d.lc)}a=aj.prototype;a.xb=function(){this.ib(-1);this.Ea&&this.Ea.ka(false);this.wd=false;aj.g.xb.call(this)};a.k=function(){aj.g.k.call(this);if(this.Eb){this.Eb.ca();this.Eb=null}this.t=this.Ea=this.Pc=null};a.Bg=B(true);
a.Cg=function(d){var e=Vf(this,d.target);if(e>-1&&e!=this.ga){var h=Tf(this,this.ga);h&&h.pc(false);this.ga=e;h=Tf(this,this.ga);this.wd&&h.setActive(true);if(this.Ea&&h!=this.Ea)h.Ya&64?h.ka(true):this.Ea.ka(false)}Wh(this.e(),"activedescendant",d.target.e().id)};a.Fg=function(d){if(d.target==Tf(this,this.ga))this.ga=-1;Wh(this.e(),"activedescendant","")};a.Pj=function(d){if((d=d.target)&&d!=this.Ea&&d.ma==this){this.Ea&&this.Ea.ka(false);this.Ea=d}};
a.Fj=function(d){if(d.target==this.Ea)this.Ea=null};a.wa=function(d){this.bb&&dj(this,true);var e=this.za(),h;a:{if(e)if((h=e.getAttributeNode("tabindex"))&&h.specified){h=e.tabIndex;h=ka(h)&&h>=0;break a}h=false}h?e.focus():d.preventDefault()};a.Hj=function(){this.wd=false};
a.Ej=function(d){var e;a:{e=d.target;if(this.Pc)for(var h=this.e();e&&e.parentNode&&e!=h;){var l=e.id;if(l in this.Pc){e=this.Pc[l];break a}e=e.parentNode}e=null}if(e)switch(d.type){case "mousedown":e.wa(d);break;case "mouseup":e.ud(d);break;case "mouseover":e.Bb(d);break;case "mouseout":e.Ab(d);break}};a.rf=aa();a.Wc=function(){this.ib(-1);this.wd=false;this.Ea&&this.Ea.ka(false)};a.lc=function(d){if(this.da()&&this.Za()&&Sf(this)!=0&&this.Ud(d)){d.preventDefault();d.stopPropagation();return true}return false};
a.Ud=function(d){var e=Tf(this,this.ga);if(e&&typeof e.lc=="function"&&e.lc(d))return true;if(this.Ea&&this.Ea!=e&&typeof this.Ea.lc=="function"&&this.Ea.lc(d))return true;switch(d.keyCode){case 27:if(this.Yc())this.za().blur();else return false;break;case 36:ej(this);break;case 35:fj(this);break;case 38:if(this.Zd==$i)gj(this);else return false;break;case 37:if(this.Zd==Zi)Uf(this)?hj(this):gj(this);else return false;break;case 40:if(this.Zd==$i)hj(this);else return false;break;case 39:if(this.Zd==
Zi)Uf(this)?gj(this):hj(this);else return false;break;default:return false}return true};function bj(d,e){var h=e.e();h=h.id||(h.id=Mf(e));if(!d.Pc)d.Pc={};d.Pc[h]=e}a=aj.prototype;a.kd=function(d,e){aj.g.kd.call(this,d,e)};a.ne=function(d,e,h){d.dh|=2;d.dh|=64;if(this.Yc()||!this.Wi)Si(d,32,false);Mi(d,false);aj.g.ne.call(this,d,e,h);h&&this.X&&bj(this,d);e<=this.ga&&this.ga++};
a.removeChild=function(d,e){var h=Vf(this,d);if(h!=-1)if(h==this.ga)d.pc(false);else h<this.ga&&this.ga--;(h=d.e())&&h.id&&ac(this.Pc,h.id);d=aj.g.removeChild.call(this,d,e);Mi(d,true);return d};a.Za=w("Ob");a.ub=function(d,e){if(e||this.Ob!=d&&this.dispatchEvent(d?"show":"hide")){this.Ob=d;var h=this.e();if(h){Bf(h,d);this.Yc()&&Yi(this.t,this.za(),this.bb&&this.Ob);this.Ob&&!e&&this.dispatchEvent("aftershow")}return true}return false};a.da=w("bb");
a.Kc=function(d){if(this.bb!=d&&this.dispatchEvent(d?"enable":"disable")){if(d){this.bb=true;Rf(this,function(e){if(e.Mi)delete e.Mi;else e.Kc(true)})}else{Rf(this,function(e){if(e.da())e.Kc(false);else e.Mi=true});this.wd=this.bb=false}this.Yc()&&Yi(this.t,this.za(),d&&this.Ob)}};a.Yc=w("ug");a.oc=function(d){d!=this.ug&&this.X&&cj(this,d);this.ug=d;this.bb&&this.Ob&&Yi(this.t,this.za(),d)};a.ib=function(d){if(d=Tf(this,d))d.pc(true);else this.ga>-1&&Tf(this,this.ga).pc(false)};
a.pc=function(d){this.ib(Vf(this,d))};function ej(d){ij(d,function(e,h){return(e+1)%h},Sf(d)-1)}function fj(d){ij(d,function(e,h){e--;return e<0?h-1:e},0)}function hj(d){ij(d,function(e,h){return(e+1)%h},d.ga)}function gj(d){ij(d,function(e,h){e--;return e<0?h-1:e},d.ga)}function ij(d,e,h){h=h<0?Vf(d,d.Ea):h;var l=Sf(d);h=e.call(d,h,l);for(var m=0;m<=l;){var n=Tf(d,h);if(n&&d.zh(n)){d.ib(h);return true}m++;h=e.call(d,h,l)}return false}aj.prototype.zh=function(d){return d.Za()&&d.da()&&!!(d.Ya&2)};
function dj(d,e){d.wd=e};function jj(){this.Dh=[]}H(jj,Ei);fa(jj);function kj(d,e){var h=d.Dh[e];if(!h){switch(e){case 0:h=d.p()+"-highlight";break;case 1:h=d.p()+"-checkbox";break;case 2:h=d.p()+"-content";break}d.Dh[e]=h}return h}jj.prototype.Ec=B("menuitem");jj.prototype.j=function(d){var e=d.qa().j("div",this.Fc(d).join(" "),mj(this,d.eb,d.qa()));nj(this,d,e,!!(d.Ya&8)||!!(d.Ya&16));return e};jj.prototype.va=function(d){return d&&d.firstChild};
jj.prototype.Jc=function(d,e){var h=this.va(d),l=oj(this,d)?h.firstChild:null;jj.g.Jc.call(this,d,e);if(l&&!oj(this,d))h.insertBefore(l,h.firstChild||null)};function mj(d,e,h){d=kj(d,2);return h.j("div",d,e)}jj.prototype.$g=function(d,e,h){if(e){Vh(e,h?"menuitemradio":this.Ec());nj(this,d,e,h)}};function oj(d,e){if(e=d.va(e)){e=e.firstChild;d=kj(d,1);return!!e&&!!e.className&&e.className.indexOf(d)!=-1}return false}
function nj(d,e,h,l){if(l!=oj(d,h)){Ke(h,"goog-option",l);h=d.va(h);if(l){d=kj(d,1);h.insertBefore(e.qa().j("div",d),h.firstChild||null)}else h.removeChild(h.firstChild)}}jj.prototype.mf=function(d){switch(d){case 2:return kj(this,0);case 16:case 8:return"goog-option-selected";default:return jj.g.mf.call(this,d)}};jj.prototype.p=B("goog-menuitem");function pj(d,e,h,l){W.call(this,d,l||jj.ra(),h);this.ta(e)}H(pj,W);pj.prototype.Ja=function(){var d=this.Ng;return d!=null?d:this.lf()};pj.prototype.ta=ca("Ng");pj.prototype.$g=function(d){Si(this,8,d);this.Af()&&!d&&Qi(this,false);var e=this.e();e&&this.t.$g(this,e,d)};Ki("goog-menuitem",function(){return new pj(null)});function qj(d,e,h){pj.call(this,d,e,h);this.$g(true)}H(qj,pj);qj.prototype.Hc=function(){return this.dispatchEvent("action")};Ki("goog-option",function(){return new qj(null)});function rj(){}H(rj,Vi);fa(rj);rj.prototype.j=function(d){return d.qa().j("div",this.p()+" goog-inline-block","\u00a0")};rj.prototype.p=B("goog-toolbar-separator");function sj(){}H(sj,Xi);fa(sj);sj.prototype.Ec=B("toolbar");sj.prototype.p=B("goog-toolbar");sj.prototype.Oh=function(){return Zi};function tj(d,e,h){aj.call(this,e,d||sj.ra(),h)}H(tj,aj);function uj(){}H(uj,Ei);fa(uj);a=uj.prototype;a.Ec=B("button");a.Ze=function(d,e,h){if(M)e==16?Wh(d,"pressed",h):uj.g.Ze.call(this,d,e,h)};a.j=function(d){var e=uj.g.j.call(this,d),h=d.Sd();h&&this.Pe(e,h);(h=d.Ja())&&this.ta(e,h);d.Ya&16&&this.Ze(e,16,false);return e};a.Ja=ea;a.ta=ea;a.Sd=function(d){return d.title};a.Pe=function(d,e){if(d)d.title=e||""};a.p=B("goog-button");function vj(){}H(vj,uj);fa(vj);a=vj.prototype;a.Ec=aa();a.j=function(d){Mi(d,false);d.uh&=-256;Si(d,32,false);return d.qa().j("button",{"class":this.Fc(d).join(" "),disabled:!d.da(),title:d.Sd()||"",value:d.Ja()||""},d.lf()||"")};a.mc=function(d){d.zb().v(d.e(),"click",d.Hc)};a.Vf=ea;a.ed=ea;a.Yc=function(d){return d.da()};a.oc=ea;a.Jb=function(d,e,h){vj.g.Jb.call(this,d,e,h);if((d=d.e())&&e==1)d.disabled=h};a.Ja=function(d){return d.value};a.ta=function(d,e){if(d)d.value=e};a.Ze=ea;function wj(d,e,h){W.call(this,d,e||vj.ra(),h)}H(wj,W);a=wj.prototype;a.Ja=w("Ji");a.ta=function(d){this.Ji=d;this.t.ta(this.e(),d)};a.Sd=w("Hi");a.Pe=function(d){this.Hi=d;this.t.Pe(this.e(),d)};a.k=function(){wj.g.k.call(this);delete this.Ji;delete this.Hi};a.pa=function(){wj.g.pa.call(this);if(this.Ya&32){var d=this.za();d&&this.zb().v(d,"keyup",this.Ud)}};a.Ud=function(d){if(d.keyCode==13&&d.type=="key"||d.keyCode==32&&d.type=="keyup")return this.Hc(d);return d.keyCode==32};Ki("goog-button",function(){return new wj(null)});function xj(){}H(xj,uj);fa(xj);xj.prototype.j=function(d){var e={"class":"goog-inline-block "+this.Fc(d).join(" "),title:d.Sd()||""};return d.qa().j("div",e,this.jg(d.eb,d.qa()))};xj.prototype.va=function(d){return d&&d.firstChild.firstChild};xj.prototype.jg=function(d,e){return e.j("div","goog-inline-block "+(this.p()+"-outer-box"),e.j("div","goog-inline-block "+(this.p()+"-inner-box"),d))};xj.prototype.p=B("goog-custom-button");function yj(){}H(yj,xj);fa(yj);yj.prototype.p=B("goog-toolbar-button");function zj(d,e,h){wj.call(this,d,e||yj.ra(),h)}H(zj,wj);Ki("goog-toolbar-button",function(){return new zj(null)});var Aj={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Bj(d){var e={};d=String(d);var h=d.charAt(0)=="#"?d:"#"+d;if(Cj.test(h)){e.vf=Dj(h);e.type="hex";return e}else{a:{var l=d.match(Ej);if(l){h=Number(l[1]);var m=Number(l[2]);l=Number(l[3]);if(h>=0&&h<=255&&m>=0&&m<=255&&l>=0&&l<=255){h=[h,m,l];break a}}h=[]}if(h.length){e.vf=Fj(h[0],h[1],h[2]);e.type="rgb";return e}else if(Aj)if(h=Aj[d.toLowerCase()]){e.vf=h;e.type="named";return e}}throw Error(d+" is not a valid color string");}var Gj=/#(.)(.)(.)/;
function Dj(d){if(!Cj.test(d))throw Error("'"+d+"' is not a valid hex color");if(d.length==4)d=d.replace(Gj,"#$1$1$2$2$3$3");return d.toLowerCase()}function Hj(d){d=Dj(d);return[parseInt(d.substr(1,2),16),parseInt(d.substr(3,2),16),parseInt(d.substr(5,2),16)]}
function Fj(d,e,h){d=Number(d);e=Number(e);h=Number(h);if(isNaN(d)||d<0||d>255||isNaN(e)||e<0||e>255||isNaN(h)||h<0||h>255)throw Error('"('+d+","+e+","+h+'") is not a valid RGB color');d=Ij(d.toString(16));e=Ij(e.toString(16));h=Ij(h.toString(16));return"#"+d+e+h}var Cj=/^#(?:[0-9a-f]{3}){1,2}$/i,Ej=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;function Ij(d){return d.length==1?"0"+d:d};function Jj(){}H(Jj,Xi);fa(Jj);Jj.prototype.Ec=B("menu");Jj.prototype.md=function(d,e){return Ze(d.e(),e)};Jj.prototype.p=B("goog-menu");Jj.prototype.mc=function(d){Jj.g.mc.call(this,d);d=d.e();Wh(d,"haspopup","true")};Ki("goog-menuseparator",function(){return new Wi});function Kj(d,e){aj.call(this,$i,e||Jj.ra(),d);this.oc(false)}H(Kj,aj);a=Kj.prototype;a.dg=true;a.Xi=false;a.p=function(){return this.t.p()};a.md=function(d){if(this.t.md(this,d))return true;for(var e=0,h=Sf(this);e<h;e++){var l=Tf(this,e);if(typeof l.md=="function"&&l.md(d))return true}return false};a.Va=function(d){this.kd(d,true)};a.Fd=function(d,e){this.ne(d,e,true)};a.Od=function(d){return Tf(this,d)};a.nf=function(){return Sf(this)};
a.ub=function(d,e){(e=Kj.g.ub.call(this,d,e))&&d&&this.X&&this.dg&&this.za().focus();return e};a.Bg=function(d){this.dg&&this.za().focus();return Kj.g.Bg.call(this,d)};a.zh=function(d){return(this.Xi||d.da())&&d.Za()&&!!(d.Ya&2)};function Lj(){}H(Lj,xj);fa(Lj);if(M)Lj.prototype.Jc=function(d,e){var h=Lj.g.va.call(this,d&&d.firstChild);h&&Ye(this.createCaption(e,Le(d)),h)};Lj.prototype.va=function(d){d=Lj.g.va.call(this,d&&d.firstChild);if(M&&d&&d.__goog_wrapper_div)d=d.firstChild;return d};Lj.prototype.jg=function(d,e){return Lj.g.jg.call(this,[this.createCaption(d,e),this.kg(e)],e)};Lj.prototype.createCaption=function(d,e){return Mj(d,this.p(),e)};
function Mj(d,e,h){return h.j("div","goog-inline-block "+(e+"-caption"),d)}Lj.prototype.kg=function(d){return d.j("div","goog-inline-block "+(this.p()+"-dropdown"),"\u00a0")};Lj.prototype.p=B("goog-menu-button");function Nj(){}H(Nj,Lj);fa(Nj);Nj.prototype.createCaption=function(d,e){return Nj.g.createCaption.call(this,Oj(d,e),e)};function Oj(d,e){return e.j("div","goog-color-menu-button-indicator",d)}Nj.prototype.ta=function(d,e){d&&Pj(this.va(d),e)};function Pj(d,e){if(d&&d.firstChild){var h;try{h=Bj(e).vf}catch(l){h=null}d.firstChild.style.borderBottomColor=h||(L?"":"transparent")}}Nj.prototype.mc=function(d){this.ta(d.e(),d.Ja());Ie(d.e(),"goog-color-menu-button");Nj.g.mc.call(this,d)};function Qj(){}H(Qj,Ei);fa(Qj);var Rj=0;Qj.prototype.j=function(d){var e=this.Fc(d);return d.qa().j("div",e?e.join(" "):null,Sj(this,d.eb,d.sd(),d.qa()))};function Sj(d,e,h,l){for(var m=[],n=0,o=0;n<h.height;n++){for(var q=[],s=0;s<h.width;s++){var t=e&&e[o++];q.push(Tj(d,t,l))}m.push(l.j("tr",d.p()+"-row",q))}return d.Gh(m,l)}Qj.prototype.Gh=function(d,e){d=e.j("table",this.p()+"-table",e.j("tbody",this.p()+"-body",d));d.cellSpacing=0;d.cellPadding=0;Vh(d,"grid");return d};
function Tj(d,e,h){d=h.j("td",{"class":d.p()+"-cell",id:d.p()+"-cell-"+Rj++},e);Vh(d,"gridcell");return d}
Qj.prototype.Jc=function(d,e){if(d){var h=Oe(document,"tbody",this.p()+"-body",d)[0];if(h){var l=0;I(h.rows,function(s){I(s.cells,function(t){We(t);if(e){var u=e[l++];u&&Ve(t,u)}})});if(l<e.length){for(var m=[],n=Le(d),o=h.rows[0].cells.length;l<e.length;){var q=e[l++];m.push(Tj(this,q,n));if(m.length==o){q=n.j("tr",this.p()+"-row",m);h.appendChild(q);m.length=0}}if(m.length>0){for(;m.length<o;)m.push(Tj(this,"",n));q=n.j("tr",this.p()+"-row",m);h.appendChild(q)}}}Ff(d,true,M)}};
function Uj(d,e,h){for(e=e.e();h&&h.nodeType==1&&h!=e;){if(h.tagName=="TD"&&K(He(h),d.p()+"-cell"))return h.firstChild;h=h.parentNode}return null}function Vj(d,e,h,l){if(h){h=h.parentNode;Ke(h,d.p()+"-cell-hover",l);d=e.e().firstChild;Wh(d,"activedescendent",h.id)}}function Wj(d,e,h,l){h&&Ke(h.parentNode,d.p()+"-cell-selected",l)}Qj.prototype.p=B("goog-palette");function Xj(d){this.vd=[];Yj(this,d)}H(Xj,wc);Xj.prototype.cd=null;Xj.prototype.Vg=null;Xj.prototype.nf=function(){return this.vd.length};Xj.prototype.Od=function(d){return this.vd[d]||null};function Yj(d,e){if(e){I(e,function(h){this.he(h,false)},d);Ka(d.vd,e)}}a=Xj.prototype;a.Va=function(d){this.Fd(d,this.nf())};a.Fd=function(d,e){if(d){this.he(d,false);Da(this.vd,d,e)}};a.rd=w("cd");a.qc=function(d){if(d!=this.cd){this.he(this.cd,false);this.cd=d;this.he(d,true)}this.dispatchEvent("select")};
a.Rd=function(){return this.cd?xa(this.vd,this.cd):-1};a.Xf=function(d){this.qc(this.Od(d))};a.clear=function(){var d=this.vd;if(!ia(d))for(var e=d.length-1;e>=0;e--)delete d[e];d.length=0;this.cd=null};a.k=function(){Xj.g.k.call(this);delete this.vd;this.cd=null};a.he=function(d,e){if(d)if(typeof this.Vg=="function")this.Vg(d,e);else typeof d.ah=="function"&&d.ah(e)};function Zj(d,e,h){W.call(this,d,e||Qj.ra(),h)}H(Zj,W);a=Zj.prototype;a.Kb=null;a.ga=-1;a.u=null;a.k=function(){Zj.g.k.call(this);if(this.u){this.u.ca();this.u=null}this.Kb=null};a.Wf=function(d){Zj.g.Wf.call(this,d);$j(this);if(this.u){this.u.clear();Yj(this.u,d)}else{this.u=new Xj(d);this.u.Vg=ra(this.he,this);this.zb().v(this.u,"select",this.sf)}this.ga=-1};a.lf=B(null);
a.Bb=function(d){Zj.g.Bb.call(this,d);var e=Uj(this.t,this,d.target);e&&d.relatedTarget&&Ze(e,d.relatedTarget)||e!=ak(this)&&bk(this,e)};a.Ab=function(d){Zj.g.Ab.call(this,d);var e=Uj(this.t,this,d.target);e&&d.relatedTarget&&Ze(e,d.relatedTarget)||e==ak(this)&&Vj(this.t,this,e,false)};a.wa=function(d){Zj.g.wa.call(this,d);if(this.Gc()){d=Uj(this.t,this,d.target);d!=ak(this)&&bk(this,d)}};a.Hc=function(){var d=ak(this);if(d){this.qc(d);return this.dispatchEvent("action")}return false};
a.lc=function(d){var e=this.eb;e=e?e.length:0;var h=this.Kb.width;if(e==0||!this.da())return false;if(d.keyCode==13||d.keyCode==32)return this.Hc(d);if(d.keyCode==36){this.ib(0);return true}else if(d.keyCode==35){this.ib(e-1);return true}var l=this.ga<0?this.Rd():this.ga;switch(d.keyCode){case 37:if(l==-1)l=e;if(l>0){this.ib(l-1);d.preventDefault();return true}break;case 39:if(l<e-1){this.ib(l+1);d.preventDefault();return true}break;case 38:if(l==-1)l=e+h-1;if(l>=h){this.ib(l-h);d.preventDefault();
return true}break;case 40:if(l==-1)l=-h;if(l<e-h){this.ib(l+h);d.preventDefault();return true}break}return false};a.sf=aa();a.sd=w("Kb");a.tb=function(d,e){if(this.e())throw Error("Component already rendered");this.Kb=ka(d)?new Jd(d,e):d;$j(this)};function ak(d){var e=d.eb;return e&&e[d.ga]}Zj.prototype.ib=function(d){if(d!=this.ga){ck(this,this.ga,false);this.ga=d;ck(this,d,true)}};function bk(d,e){var h=d.eb;d.ib(h?xa(h,e):-1)}Zj.prototype.Rd=function(){return this.u?this.u.Rd():-1};
Zj.prototype.rd=function(){return this.u?this.u.rd():null};Zj.prototype.Xf=function(d){this.u&&this.u.Xf(d)};Zj.prototype.qc=function(d){this.u&&this.u.qc(d)};function ck(d,e,h){if(d.e()){var l=d.eb;l&&e>=0&&e<l.length&&Vj(d.t,d,l[e],h)}}Zj.prototype.he=function(d,e){this.e()&&Wj(this.t,this,d,e)};
function $j(d){var e=d.eb;if(e)if(d.Kb&&d.Kb.width){e=Math.ceil(e.length/d.Kb.width);if(!ka(d.Kb.height)||d.Kb.height<e)d.Kb.height=e}else{e=Math.ceil(Math.sqrt(e.length));d.Kb=new Jd(e,e)}else d.Kb=new Jd(0,0)};function dk(d,e,h){this.af=d||[];Zj.call(this,null,e||Qj.ra(),h);this.af=this.af;this.Nf=null;this.Jc(ek(this))}H(dk,Zj);dk.prototype.Nf=null;dk.prototype.yg=function(){var d=this.rd();if(d){d=d.style[Af("background-color")];return fk(d)}else return null};dk.prototype.bh=function(d){d=fk(d);if(!this.Nf)this.Nf=J(this.af,function(e){return fk(e)});this.Xf(d?xa(this.Nf,d):-1)};
function ek(d){return J(d.af,function(e){var h=this.qa().j("div",{"class":this.t.p()+"-colorswatch",style:"background-color:"+e});h.title=e.charAt(0)=="#"?"RGB ("+Hj(e).join(", ")+")":e;return h},d)}function fk(d){if(d)try{return Bj(d).vf}catch(e){}return null};function gk(d,e,h,l,m,n,o,q){var s,t=h.offsetParent;if(t){var u=t.tagName=="HTML"||t.tagName=="BODY";if(!u||pf(t,"position")!="static"){s=tf(t);u||(s=Ed(s,new O(t.scrollLeft,t.scrollTop)))}}t=yf(d);(u=sf(d))&&t.Yh(hd(u));u=Le(d);var v=Le(h);if(u.L!=v.L){var A=u.L.body;v=v.L.parentWindow||v.L.defaultView;var E=new O(0,0),R=Ne(A)?Ne(A).parentWindow||Ne(A).defaultView:window,ba=A;do{var oc=R==v?tf(ba):vf(ba);E.x+=oc.x;E.y+=oc.y}while(R&&R!=v&&(ba=R.frameElement)&&(R=R.parent));v=E;v=Ed(v,tf(A));if(L&&
!hf(u))v=Ed(v,jf(u));t.left+=v.x;t.top+=v.y}d=(e&4&&uf(d)?e^2:e)&-5;e=new O(d&2?t.left+t.width:t.left,d&1?t.top+t.height:t.top);if(s)e=Ed(e,s);if(m){e.x+=(d&2?-1:1)*m.x;e.y+=(d&1?-1:1)*m.y}var Ea;if(o)if((Ea=sf(h))&&s){Ea.top=Math.max(0,Ea.top-s.y);Ea.right-=s.x;Ea.bottom-=s.y;Ea.left=Math.max(0,Ea.left-s.x)}a:{m=e;s=Ea;m=m.aa();Ea=0;d=(l&4&&uf(h)?l^2:l)&-5;l=xf(h);q=q?q.aa():l;if(n||d!=0){if(d&2)m.x-=q.width+(n?n.right:0);else if(n)m.x+=n.left;if(d&1)m.y-=q.height+(n?n.bottom:0);else if(n)m.y+=n.top}if(o){Ea=
s?hk(m,q,s,o):256;if(Ea&496){h=Ea;break a}}m=m;o=M&&(kb||tb)&&Ab("1.9");if(m instanceof O){n=m.x;m=m.y}else{n=m;m=void 0}h.style.left=typeof n=="number"?(o?Math.round(n):n)+"px":n;h.style.top=typeof m=="number"?(o?Math.round(m):m)+"px":m;(l==q?true:!l||!q?false:l.width==q.width&&l.height==q.height)||wf(h,q);h=Ea}return h}
function hk(d,e,h,l){var m=0;if(d.x<h.left&&l&1){d.x=h.left;m|=1}if(d.x<h.left&&d.x+e.width>h.right&&l&16){e.width-=d.x+e.width-h.right;m|=4}if(d.x+e.width>h.right&&l&1){d.x=Math.max(h.right-e.width,h.left);m|=1}if(l&2)m|=(d.x<h.left?16:0)|(d.x+e.width>h.right?32:0);if(d.y<h.top&&l&4){d.y=h.top;m|=2}if(d.y>=h.top&&d.y+e.height>h.bottom&&l&32){e.height-=d.y+e.height-h.bottom;m|=8}if(d.y+e.height>h.bottom&&l&4){d.y=Math.max(h.bottom-e.height,h.top);m|=2}if(l&8)m|=(d.y<h.top?64:0)|(d.y+e.height>h.bottom?
128:0);return m};function ik(){}ik.prototype.Le=aa();function jk(d,e){this.element=d;this.Hd=e}H(jk,ik);jk.prototype.Le=function(d,e,h){gk(this.element,this.Hd,d,e,undefined,h)};function kk(d,e,h){jk.call(this,d,e);this.Ui=h}H(kk,jk);kk.prototype.Le=function(d,e,h,l){var m=gk(this.element,this.Hd,d,e,null,h,10,l);if(m&496){var n=this.Hd,o=e;if(m&48){n^=2;o^=2}if(m&192){n^=1;o^=1}m=gk(this.element,n,d,o,null,h,10,l);if(m&496)this.Ui?gk(this.element,this.Hd,d,e,null,h,5,l):gk(this.element,this.Hd,d,e,null,h,0,l)}};function lk(d,e,h,l){kk.call(this,d,e,h);this.tk=l}H(lk,kk);lk.prototype.Le=function(d,e,h,l){this.tk?gk(this.element,this.Hd,d,e,null,h,33,l):lk.g.Le.call(this,d,e,h,l)};function mk(d,e,h,l){wj.call(this,d,h||Lj.ra(),l);Si(this,64,true);e&&this.dd(e);this.Lb=new wg(500)}H(mk,wj);a=mk.prototype;a.th=true;a.Ug=false;a.Gg=false;a.pa=function(){mk.g.pa.call(this);this.w&&nk(this,this.w,true);Wh(this.e(),"haspopup","true")};a.xb=function(){mk.g.xb.call(this);if(this.w){this.ka(false);this.w.xb();nk(this,this.w,false);var d=this.w.e();d&&Xe(d)}};a.k=function(){mk.g.k.call(this);if(this.w){this.w.ca();delete this.w}this.Lb.ca()};
a.wa=function(d){mk.g.wa.call(this,d);if(this.Gc()){this.ka(!!!(this.Fa&64));this.w&&dj(this.w,!!(this.Fa&64))}};a.ud=function(d){mk.g.ud.call(this,d);this.w&&!this.Gc()&&dj(this.w,false)};a.Hc=function(){this.setActive(false);return true};a.Gj=function(d){this.w&&this.w.Za()&&!this.md(d.target)&&this.ka(false)};a.md=function(d){return d&&Ze(this.e(),d)||this.w&&this.w.md(d)||false};
a.Ud=function(d){if(d.type!=(d.keyCode==32?"keyup":"key"))return false;if(this.w&&this.w.Za()){var e=this.w.lc(d);if(d.keyCode==27){this.ka(false);return true}return e}if(d.keyCode==40||d.keyCode==38||d.keyCode==32){this.ka(true);return true}return false};a.ve=function(){this.ka(false)};a.Lj=function(){this.Gc()||this.ka(false)};a.Wc=function(d){this.Gg||this.ka(false);mk.g.Wc.call(this,d)};function ok(d){d.w||d.dd(new Kj(d.qa()));return d.w||null}a=mk.prototype;
a.dd=function(d){var e=this.w;if(d!=e){if(e){this.ka(false);this.X&&nk(this,e,false);delete this.w}if(d){this.w=d;Of(d,this);d.ub(false);var h=this.Gg;(d.dg=h)&&d.oc(true);this.X&&nk(this,d,true)}}return e};a.Va=function(d){ok(this).kd(d,true)};a.Fd=function(d,e){ok(this).ne(d,e,true)};a.Od=function(d){return this.w?Tf(this.w,d):null};a.nf=function(){return this.w?Sf(this.w):0};a.ub=function(d,e){(d=mk.g.ub.call(this,d,e))&&!this.Za()&&this.ka(false);return d};
a.Kc=function(d){mk.g.Kc.call(this,d);this.da()||this.ka(false)};
a.ka=function(d){mk.g.ka.call(this,d);if(this.w&&!!(this.Fa&64)==d){if(d){this.w.X||this.w.J();this.Ki=sf(this.e());this.xh=yf(this.e());pk(this);this.w.ib(-1)}else{this.setActive(false);this.w.wd=false;if(this.Qf!=null){this.Qf=undefined;var e=this.w.e();e&&wf(e,"","")}}this.w.ub(d);e=this.zb();var h=d?e.v:e.Mb;h.call(e,gf(this.qa()),"mousedown",this.Gj,true);this.Gg&&h.call(e,this.w,"blur",this.Lj);h.call(e,this.Lb,yg,this.hk);d?this.Lb.start():this.Lb.stop()}};
function pk(d){var e=d.th?5:7;e=new lk(d.e(),e,!d.Ug,d.Ug);var h=d.w.e();if(!d.w.Za()){h.style.visibility="hidden";Bf(h,true)}if(!d.Qf&&d.Ug)d.Qf=xf(h);e.Le(h,d.th?4:6,null,d.Qf);if(!d.w.Za()){Bf(h,false);h.style.visibility="visible"}}mk.prototype.hk=function(){var d=yf(this.e()),e=sf(this.e()),h;h=this.xh;h=h==d?true:!h||!d?false:h.left==d.left&&h.width==d.width&&h.top==d.top&&h.height==d.height;if(!h||!Id(this.Ki,e)){this.xh=d;this.Ki=e;pk(this)}};
function nk(d,e,h){var l=d.zb();h=h?l.v:l.Mb;h.call(l,e,"action",d.ve);h.call(l,e,"highlight",d.Cg);h.call(l,e,"unhighlight",d.Fg)}mk.prototype.Cg=function(d){Wh(this.e(),"activedescendant",d.target.e().id)};mk.prototype.Fg=function(){Tf(this.w,this.w.ga)||Wh(this.e(),"activedescendant","")};Ki("goog-menu-button",function(){return new mk(null)});function qk(d,e,h,l){mk.call(this,d,e,h||Nj.ra(),l)}H(qk,mk);
var rk={Lk:["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],Qk:["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],Ok:["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc","#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd","#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0","#cc0000","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79","#990000","#b45f06","#bf9000","#38761d","#134f5c",
"#0b5394","#351c75","#741b47","#660000","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]};function sk(d,e){var h=new Kj(e);d&&I(d,function(l){h.kd(l,true)});Yb(rk,function(l){l=new dk(l,null,e);l.tb(8);h.kd(l,true)});return h}a=qk.prototype;a.yg=function(){return this.Ja()};a.bh=function(d){this.ta(d)};a.ta=function(d){for(var e=0,h;h=this.Od(e);e++)typeof h.bh=="function"&&h.bh(d);qk.g.ta.call(this,d)};
a.ve=function(d){if(typeof d.target.yg=="function")this.ta(d.target.yg());else d.target.Ja()=="none"&&this.ta(null);qk.g.ve.call(this,d);d.stopPropagation();this.dispatchEvent("action")};a.ka=function(d){if(d&&this.nf()==0){this.dd(sk(null,this.qa()));this.ta(this.Ja())}qk.g.ka.call(this,d)};Ki("goog-color-menu-button",function(){return new qk(null)});function tk(){}H(tk,Lj);fa(tk);tk.prototype.p=B("goog-toolbar-menu-button");function uk(){}H(uk,tk);fa(uk);uk.prototype.createCaption=function(d,e){return Mj(Oj(d,e),this.p(),e)};uk.prototype.ta=function(d,e){d&&Pj(this.va(d),e)};uk.prototype.mc=function(d){this.ta(d.e(),d.Ja());Ie(d.e(),"goog-toolbar-color-menu-button");uk.g.mc.call(this,d)};function vk(d,e,h,l){qk.call(this,d,e,h||uk.ra(),l)}H(vk,qk);Ki("goog-toolbar-color-menu-button",function(){return new vk(null)});function wk(d,e,h,l){mk.call(this,d,e,h||tk.ra(),l)}H(wk,mk);Ki("goog-toolbar-menu-button",function(){return new wk(null)});function xk(d,e,h,l){mk.call(this,d,e,h,l);this.cf=d;yk(this)}H(xk,mk);a=xk.prototype;a.u=null;a.cf=null;a.pa=function(){xk.g.pa.call(this);yk(this)};a.k=function(){xk.g.k.call(this);if(this.u){this.u.ca();this.u=null}this.cf=null};a.ve=function(d){this.qc(d.target);xk.g.ve.call(this,d);d.stopPropagation();this.dispatchEvent("action")};a.sf=function(){var d=this.rd();xk.g.ta.call(this,d&&d.Ja());yk(this)};
a.dd=function(d){var e=xk.g.dd.call(this,d);if(d!=e){this.u&&this.u.clear();if(d)this.u?Rf(d,function(h){this.u.Va(h)},this):zk(this,d)}return e};a.Va=function(d){xk.g.Va.call(this,d);this.u?this.u.Va(d):zk(this,ok(this))};a.Fd=function(d,e){xk.g.Fd.call(this,d,e);this.u?this.u.Fd(d,e):zk(this,ok(this))};a.qc=function(d){this.u&&this.u.qc(d)};a.Xf=function(d){this.u&&this.qc(this.u.Od(d))};
a.ta=function(d){if(d!=null&&this.u)for(var e=0,h;h=this.u.Od(e);e++)if(h&&typeof h.Ja=="function"&&h.Ja()==d){this.qc(h);return}this.qc(null)};a.rd=function(){return this.u?this.u.rd():null};a.Rd=function(){return this.u?this.u.Rd():-1};function zk(d,e){d.u=new Xj;e&&Rf(e,function(h){this.u.Va(h)},d);d.zb().v(d.u,"select",d.sf)}function yk(d){var e=d.rd();d.Jc(e?e.lf():d.cf)}xk.prototype.ka=function(d){xk.g.ka.call(this,d);this.Fa&64&&ok(this).ib(this.Rd())};Ki("goog-select",function(){return new xk(null)});function Ak(d,e,h,l){xk.call(this,d,e,h||tk.ra(),l)}H(Ak,xk);Ki("goog-toolbar-select",function(){return new Ak(null)});D("kemia.controller.ToolbarFactory.makeButton",Bk,void 0);function Bk(d,e,h,l,m,n){h=new zj(Ck(h,l,n),m,n);Nf(h,d);h.Pe(e);return h}function Dk(d,e,h,l,m,n){d=Bk(d,e,h,l,m,n);Si(d,16,true);return d}function Ek(d,e,h,l,m,n){m=new Ak(null,null,m,n);l&&I(l.split(/\s+/),m.bg,m);m.bg("goog-toolbar-select");m.cf=h;yk(m);Nf(m,d);m.Pe(e);return m}function Ck(d,e,h){if((!d||d=="")&&M&&!Ab("1.9a"))d="\u00a0";return(h||Le()).j("DIV",e?{"class":e}:null,d)};var wi={};function Fk(){U.call(this)}H(Fk,U);D("kemia.controller.plugins.Erase",Fk,void 0);a=Fk.prototype;a.Cb=function(d){return d=="erase"};a.kc=Jh("erase");a.r=N("kemia.controller.plugins.Erase");a.pd=function(d,e,h){this.r.info("active: "+h);this.Gc=h};a.wa=function(d){if(this.Gc){Oh(this.f);d=qi(this.f,d);d instanceof Q&&Gk(this,d);d instanceof S&&Hk(this,d);d instanceof V&&Ik(this,d);d instanceof O&&Jk(this,d);Qh(this.f)}};
function Gk(d,e){var h=e.G;I(e.h.fa(),function(l){Kk(h,l)});Lk(h,e);d.f.na(d.f.Z)}function Hk(d,e){var h=e.G;Kk(h,e);e=Mk(h);var l=h.cb;if(K(l.sb,h))I(e,function(m){Nk(l,m)});else K(l.rb,h)&&I(e,function(m){Ok(l,m)});Pk(l,h);d.f.na(d.f.Z)}function Ik(d,e){Pk(e.cb,e);d.f.na(d.f.Z)}function Jk(d,e){var h=e.cb;if(K(h.wc,e)){Ga(h.wc,e);e.cb=undefined}else K(h.$d,e)&&Qk(h,e);d.f.na(d.f.Z)}Fk.prototype.de=function(){this.Gc=false};
Fk.prototype.queryCommandValue=function(d){var e=null;if(d=="erase")e=this.Gc;return e};function Rk(){U.call(this)}H(Rk,U);D("kemia.controller.plugins.ClearEditor",Rk,void 0);Rk.prototype.kc=Jh("clearEditor");Rk.prototype.Cb=function(d){return d=="clearEditor"};Rk.prototype.pd=function(){this.f.clear()};function Sk(){U.call(this)}H(Sk,U);D("kemia.controller.plugins.Zoom",Sk,void 0);var Tk={Sk:"zoomIn",Tk:"zoomOut"},Uk=ec(Tk);Sk.prototype.kc=Jh(Tk);Sk.prototype.Cb=function(d){return d in Uk};Sk.prototype.execCommand=function(d){var e=this.f.R.Uf;if(d=="zoomIn")ki(this.f,e*1.1);else d=="zoomOut"&&ki(this.f,e*0.9);this.f.na(this.f.Z)};Sk.prototype.r=N("kemia.controller.plugins.Zoom");function Vk(){U.call(this)}H(Vk,U);D("kemia.controller.plugins.BondEdit",Vk,void 0);Vk.prototype.Cb=function(d){return d=="selectBond"};Vk.prototype.kc=Jh("selectBond");Vk.prototype.pd=function(d,e){this.db=e};var Wk=[{id:"1",key:"1",ea:oe,$:pe},{id:"2",key:"2",ea:2,$:pe},{id:"3",key:"3",ea:3,$:pe}];Vk.prototype.pf=function(){return Wk};
var Xk=[{caption:"Single",ea:oe,$:pe},{caption:"Double",ea:2,$:pe},{caption:"Triple",ea:3,$:pe},{caption:"Quadruple",ea:4,$:pe},{caption:"Single Up",ea:oe,$:11},{caption:"Single Down",ea:oe,$:13},{caption:"Single Up or Down",ea:oe,$:12}];Vk.prototype.r=N("kemia.controller.plugins.BondEdit");Vk.prototype.Dg=function(d){var e=Ca(Wk,function(h){return h.id==d.identifier});if(e){this.db=e;return true}};
Vk.prototype.wa=function(d){Oh(this.f);var e=qi(this.f,d);if(e instanceof Q){Yk(this,e);this.f.na(this.f.Z);Qh(this.f);return true}if(e instanceof S)if(this.db){d=this.db.$!=pe&&e.$==this.db.$?new S(e.target,e.source,this.db.ea,this.db.$):new S(e.source,e.target,this.db.ea,this.db.$);var h=e.G;Kk(h,e);h.Ua(d);this.f.na(this.f.Z);Qh(this.f);return true}else{if(e.nh)if(ta()-e.nh<1E3){if(e.$==pe){d=oe;if(e.ea==oe)d=2;else if(e.ea==2)d=3;d=new S(e.target,e.source,d,e.$);h=e.G;Kk(h,e);h.Ua(d)}this.f.na(this.f.Z);
Qh(this.f);return true}else this.Jd(d,e);e.nh=ta();this.Jd(d,e)}if(e==undefined&&this.db){e=ri(d);e=ie(this.f.R.transform.Vb(),[e])[0];h=new Q("C",e.x,e.y);d=new V;d.Sa(h);Yk(this,h);if(this.f.Z.length>0){h=this.f.Z[0];if(h.wc.length>0)h.wc[0].x>e.x?Nk(h,d):Ok(h,d);Nk(h,d)}this.f.na(this.f.Z);Qh(this.f);return true}};
function Yk(d,e){if(d.db){var h=J(e.h.fa(),function(m){return Qd(new Pd(e.a,ne(m,e).a))}),l;if(h.length==0)l=0;if(h.length==1)l=h[0]>0?h[0]-Math.PI*2/3:h[0]+Math.PI*2/3;else if(h.length==2){l=za(h,function(m,n){return m+n},0);l=Math.PI+l/h.length}if(l!=undefined){h=new Q("C",e.a.x+Math.cos(l)*1.25,e.a.y+Math.sin(l)*1.25);d=new S(e,h,d.db.ea,d.db.$);l=e.G;l.Sa(h);l.Ua(d)}}}
Vk.prototype.Jd=function(d,e){var h=new ih(this.f.Fb);h.bc=d.clientX;h.cc=d.clientY;h.wh=e;h.ba=this.f;h.addEventListener("drag",function(l){h.wh.G.Xa.clear();new ag(l.clientX-h.bc,l.clientY-h.cc);var m=ie(h.ba.R.transform.Vb(),[new O(l.clientX,l.clientY),new O(h.bc,h.cc)]);m=Ed(m[0],m[1]);e.source.a=Fd(e.source.a,m);e.target.a=Fd(e.target.a,m);h.ba.R.Oa.J(e.G,h.ba.R.transform);h.bc=l.clientX;h.cc=l.clientY});h.addEventListener("end",function(){h.ba.na(h.ba.Z);h.ca()});h.fd(d)};
Vk.prototype.de=function(){this.db=undefined};Vk.prototype.queryCommandValue=function(d){if(d=="selectBond")return this.db};function Zk(){U.call(this)}H(Zk,U);D("kemia.controller.plugins.Highlight",Zk,void 0);Zk.prototype.kc=Jh("kemia.controller.plugins.Highlight");Zk.prototype.r=N("kemia.controller.plugins.Highlight");
Zk.prototype.Nj=function(d){var e=qi(this.f,d);d.currentTarget.Xc&&d.currentTarget.Xc.clear();d.currentTarget.Xc=e instanceof Q?d.currentTarget.Xc?this.f.R.Oa.Oc.hb(e,d.currentTarget.Xc):this.f.R.Oa.Oc.hb(e,void 0):e instanceof S?d.currentTarget.Xc?this.f.R.Oa.hg.m(e).hb(e,d.currentTarget.Xc):this.f.R.Oa.hg.m(e).hb(e,void 0):e instanceof O?d.currentTarget.Xc?this.f.R.fg.hb(e,d.currentTarget.Xc):this.f.R.fg.hb(e,void 0):undefined};function $k(){U.call(this)}H($k,U);D("kemia.controller.plugins.AtomEdit",$k,void 0);$k.prototype.Cb=function(d){return d=="selectSymbol"};$k.prototype.kc=Jh("selectSymbol");var al=[{id:"C",key:"c"},{id:"N",key:"n"},{id:"S",key:"s"},{id:"P",key:"p"},{id:"O",key:"o"}];a=$k.prototype;a.pf=function(){return al};a.de=function(){this.A=undefined};a.pd=function(d,e){this.A=e};a.r=N("kemia.controller.plugins.AtomEdit");
a.Dg=function(d){var e=Ca(al,function(h){return h.id==d.identifier});if(e){this.r.info("handleKeyboardShortcut "+d.identifier);this.A=e.id;return true}};a.wa=function(d){var e=qi(this.f,d);if(e instanceof Q)if(this.A&&this.A!=e.A){Oh(this.f);bl(this,d,e);this.f.na(this.f.Z);Qh(this.f);return true}else{Oh(this.f);this.Jd(d,e);Qh(this.f)}};
a.ud=function(d){d=ya(ui(this.f,d),function(e){return e instanceof Q&&e!==this.df},this);d=d.length>0?d[0]:undefined;if(this.df&&d instanceof Q){Oh(this.f);cl(this.df,d);this.df=undefined;this.f.na(this.f.Z);Qh(this.f);return true}};
function cl(d,e){var h=d.G,l=e.G;I(e.h.fa(),function(m){var n=m.aa();e==n.source?(n.source=d):(n.target=d);l.Ua(n);Kk(l,m)});Lk(l,e);I(h.b,function(m){l.Sa(m)});I(h.h,function(m){m=m.aa();m.G=undefined;l.Ua(m)});I(h.b,function(m){Lk(h,m)});I(h.h,function(m){Kk(h,m)});Pk(h.cb,h);delete h;return l}function bl(d,e,h){var l=new Q(d.A,h.a.x,h.a.y),m=h.G;I(h.h.fa(),function(n){var o=n.aa();o.G=undefined;h==o.source?(o.source=l):(o.target=l);m.Ua(o);Kk(m,n)});Lk(m,h);m.Sa(l)}
$k.prototype.Jd=function(d,e){this.df=e;var h=new ih(this.f.Fb);h.bc=d.clientX;h.cc=d.clientY;h.gg=e;h.ba=this.f;h.addEventListener("drag",function(l){h.gg.G.Xa.clear();new ag(l.clientX-h.bc,l.clientY-h.cc);var m=ie(h.ba.R.transform.Vb(),[new O(l.clientX,l.clientY),new O(h.bc,h.cc)]);e.a=Fd(e.a,Ed(m[0],m[1]));h.ba.R.Oa.J(h.gg.G,h.ba.R.transform);h.bc=l.clientX;h.cc=l.clientY});h.addEventListener("end",function(){h.ba.na(h.ba.Z);h.ca()});h.fd(d)};$k.prototype.queryCommandValue=function(d){if(d=="selectSymbol")return this.A};function dl(d){d=String(d);if(/^\s*$/.test(d)?false:/^[\],:{}\s\u2028\u2029]*$/.test(d.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+d+")")}catch(e){}throw Error("Invalid JSON string: "+d);}function el(){}function fl(d,e){var h=[];gl(d,e,h);return h.join("")}
function gl(d,e,h){switch(typeof e){case "string":hl(d,e,h);break;case "number":h.push(isFinite(e)&&!isNaN(e)?e:"null");break;case "boolean":h.push(e);break;case "undefined":h.push("null");break;case "object":if(e==null){h.push("null");break}if(ia(e)){var l=e.length;h.push("[");for(var m="",n=0;n<l;n++){h.push(m);gl(d,e[n],h);m=","}h.push("]");break}h.push("{");l="";for(m in e)if(e.hasOwnProperty(m)){n=e[m];if(typeof n!="function"){h.push(l);hl(d,m,h);h.push(":");gl(d,n,h);l=","}}h.push("}");break;
case "function":break;default:throw Error("Unknown type: "+typeof e);}}var il={'"':'\\"',"\\":"\\\\","/":"\\/","\u0008":"\\b","\u000c":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\u000b":"\\u000b"},jl=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;function hl(d,e,h){h.push('"',e.replace(jl,function(l){if(l in il)return il[l];var m=l.charCodeAt(0),n="\\u";if(m<16)n+="000";else if(m<256)n+="00";else if(m<4096)n+="0";return il[l]=n+m.toString(16)}),'"')};function kl(){U.call(this);this.ak=100;this.zd=[];this.Je=[];this.lg=null}H(kl,U);D("kemia.controller.plugins.UndoRedo",kl,void 0);var ll=[{id:"undo",key:27}];kl.prototype.pf=function(){return ll};kl.prototype.Dg=function(d){if(Ca(ll,function(e){return e.id==d.identifier}).id=="undo"){ml(this);return true}};var nl=ec({Rk:"undo",Pk:"redo"});kl.prototype.kc=B("UndoRedo");kl.prototype.Cb=function(d){return d in nl};kl.prototype.pd=function(d){if(d=="undo")ml(this);else d=="redo"&&ol(this)};
kl.prototype.Dj=function(d){ql(this,d.target)};function ql(d,e){var h="[]";if(e.Z){h=J(e.Z,rl);h=fl(new el,h)}e=d.lg;e!=h&&sl(d,e);d.lg=h}function sl(d,e){d.zd.push(e);if(d.zd.length>d.ak){d.zd.shift();var h=d.Je.length;d.Je.length=0;d.dispatchEvent({type:tl,hm:e});if(d.zd.length==1||h)d.dispatchEvent(ul)}}function ml(d){d.r.info("undo");vl(d,d.zd,d.Je)}function ol(d){vl(d,d.Je,d.zd)}
function vl(d,e,h){d.r.info("shiftState");d.r.info("    fromStack.length "+e.length);d.r.info("    toStack.length "+h.length);if(e.length){var l=e.pop();h.push(l);d.f.na(J(eval("("+l+")"),wl));d.r.info("    fromStack.length "+e.length);d.r.info("    toStack.length "+h.length);if(e.length==0||h.length==1)d.dispatchEvent(ul)}}kl.prototype.gf=function(d){kl.g.gf.call(this,d);this.jf=new Gf(this);this.jf.v(d,pi,this.Dj);ql(this,d)};kl.prototype.og=function(d){d.$k();this.jf.ca();this.lg=this.jf=null};
kl.prototype.k=function(){kl.g.k.call(this);this.jf.ca();this.f=null};var ul="state_change",tl="state_added";kl.prototype.r=N("kemia.controller.plugins.UndoRedo");kl.prototype.queryCommandValue=function(d){var e=null;if(d=="undo")e=this.zd.length>0;else if(d=="redo")e=this.Je.length>0;return e};function xl(){this.jd={};U.call(this)}H(xl,U);D("kemia.controller.plugins.ArrowPlusEdit",xl,void 0);var yl=ec({Jk:"editArrow",Kk:"editPlus"});a=xl.prototype;a.Cb=function(d){return d in yl};a.kc=Jh("ArrowPlusEdit");a.pd=function(d,e,h){this.r.info(d+" active: "+h);this.jd[d]=h};a.r=N("kemia.controller.plugins.ArrowPlusEdit");a.Cj=function(d){if(this.jd.editArrow){Oh(this.f);zl(this,d);Qh(this.f)}};
a.wa=function(d){if(this.jd.editArrow){Oh(this.f);var e=this.f.R.Oa.transform.Vb();e=P(e,[new O(d.offsetX,d.offsetY)]);d=this.f.Z[0];e=e[0];d.wc.push(e);e.cb=d;this.f.na(this.f.Z);Qh(this.f)}else if(this.jd.editPlus){Oh(this.f);e=this.f.R.Oa.transform.Vb();e=P(e,[new O(d.offsetX,d.offsetY)]);Al(this.f.Z[0],e[0]);this.f.na(this.f.Z);Qh(this.f)}};
function zl(d,e){d.r.info("dragArrow");d=e.a;var h=new ih(e.Xa);h.bc=e.clientX;h.cc=e.clientY;h.Uk=e.clientX;h.Vk=e.clientY;h.a=d;h.Xa=e.Xa;h.addEventListener("drag",function(l){var m=h.Xa.transform;cg(h.Xa,l.clientX-h.bc+m.$a,l.clientY-h.cc+m.ab,0,0,0);h.bc=l.clientX;h.cc=l.clientY});h.addEventListener("end",function(){h.ca()});h.fd(e)}xl.prototype.de=function(){this.jd.editArrow=false;this.jd.editPlus=false};xl.prototype.queryCommandValue=function(d){var e=null;if(this.Cb(d))e=this.jd[d];return e};function Bl(d,e){this.b=d;this.h=e;de(this);this.Ia=new Array(3)}Bl.prototype.Ib=function(d,e){this.Ia[d]=e};function de(d){for(var e=0,h=0,l=0,m=d.b.length;l<m;l++){e+=d.b[l].a.x;h+=d.b[l].a.y}d.fe=new O(e/d.b.length,h/d.b.length)};function Cl(d){this.b=d}function Dl(d){var e=d.b.length-1;return d.b.length>2&&d.b[0]==d.b[e]}
Cl.prototype.splice=function(d){var e;var h=d.b;e=this.b.length-1;var l=h.length-1;if(this.b[e]==h[0]||this.b[e]==h[l])e=this.b[e];else if(this.b[0]==h[0]||this.b[0]==h[l])e=this.b[0];else throw"Couldn't splice - no intersection";h=[];l=0;for(var m=this.b.length;l<m;l++)h.push(this.b[l]);this.b[0]==e&&h.reverse();if(d.b[0]==e){l=1;for(m=d.b.length;l<m;l++)h.push(d.b[l])}else for(l=d.b.length-2;l>=0;l--)h.push(d.b[l]);a:{d=1;for(e=h.length-1;d<e;d++)for(l=1;l<e;l++)if(d!=l)if(h[d]==h[l]){d=false;break a}d=
true}if(!d)return null;return new Cl(h)};function El(d){this.Bc=[];this.b=[];for(var e=0,h=d.fb();e<h;e++){bond=d.h[e];this.Bc.push(new Cl([bond.source,bond.target]))}e=0;for(h=d.b.length;e<h;e++)this.b.push(d.q(e))}
El.prototype.remove=function(d,e){for(var h=[],l=0,m=this.Bc.length;l<m;l++){var n=this.Bc[l];if(Dl(n))K(n.b,d)&&h.push(n);else{var o=n.b.length-1;if(n.b[0]==d||n.b[o]==d)h.push(n)}}l=[];n=0;for(o=h.length;n<o;n++)Dl(h[n])&&l.push(h[n]);n=0;for(o=l.length;n<o;n++){K(h,l[n])&&Ga(h,l[n]);K(this.Bc,l[n])&&Ga(this.Bc,l[n])}m=[];n=0;for(o=h.length;n<o;n++)for(var q=n+1;q<o;q++){var s=h[q].splice(h[n]);s!=null&&m.push(s)}n=0;for(o=h.length;n<o;n++)K(this.Bc,h[n])&&Ga(this.Bc,h[n]);n=0;for(o=m.length;n<
o;n++)!K(this.Bc,m[n])&&m[n].b.length<=e+1&&this.Bc.push(m[n]);Ga(this.b,d);return l};function Fl(d){for(var e=[],h=0,l=d.length;h<l;h++){var m=d[h];m instanceof Array?e.push(Fl(m)):e.push(m)}return e}function Gl(d,e,h){if(d.length)d.push(e[0].concat(h[0]));else d[0]=e[0].concat(h[0])}function Hl(d,e){return d.Cnum-e.Cnum}
function Il(d,e,h,l){for(var m=0,n=e.length;m<n;m++){var o=e[m];if(d.length>=o.length){for(var q=true,s=0,t=o.length;s<t;s++)K(d,o[s])||(q=false);if(q)return true}s=0;for(t=d.length;s<t;s++)K(o,d[s])&&l[s]++}e=false;s=0;for(t=d.length;s<t;s++)if(l[d[s]]<h[d[s]]-1)e=true;if(e){s=0;for(t=d.length;s<t;s++)l[d[s]]++;return false}return true}function Jl(d,e){for(var h=[],l=0,m=d.length;l<m;l++){var n=e.h[d[l]],o=e.xa(n.source);n=e.xa(n.target);K(h,o)||h.push(o);K(h,n)||h.push(n)}return h}
function Kl(d,e){for(var h=[d[0]],l=e.q(d[0]),m=0;d.length!=h.length;){m++;if(m>1E3)break;for(var n=1,o=d.length;n<o;n++){var q=e.q(h[h.length-1]),s=e.q(d[n]);if(!K(h,d[n]))if(e.yb(q,s))h.push(d[n]);else e.yb(l,s)&&Da(h,d[n],0)}}return h}
function Ll(d){var e=d.fb()-d.b.length+1;if(!e)return[];var h;h=d.b.length;for(var l=[],m=0;m<h;m++){for(var n=[],o=0;o<h;o++)if(m==o)n.push(0);else d.yb(d.q(m),d.q(o))?n.push(1):n.push(99999999);l.push(n)}m=[];for(n=0;n<h;n++){o=[];for(var q=0;q<h;q++){var s=d.yb(d.q(n),d.q(q));s?o.push([[xa(d.h,s)]]):o.push([])}m.push(o)}n=[];for(o=0;o<h;o++){q=[];for(s=0;s<h;s++)q.push([]);n.push(q)}for(o=0;o<h;o++)for(q=0;q<h;q++)for(s=0;s<h;s++){var t=l[q][s],u=l[q][o]+l[o][s],v=m[q][o],A=m[o][s];if(u!=1E8)if(t>
u){n[q][s]=t==u+1?Fl(m[q][s]):[];l[q][s]=u;m[q][s]=[v[0].concat(A[0])]}else if(t==u)v.length&&A.length&&Gl(m[q][s],v,A);else if(t==u-1)Gl(n[q][s],v,A);else l[q][s]=l[q][s]}h={D:l,Pe1:m,Pe2:n};l=h.D;m=h.Pe1;n=h.Pe2;o=l.length;h=[];for(q=0;q<o;q++)for(s=0;s<o;s++)l[q][s]==0||m[q][s].length==1&&n[q][s].length==0||h.push({Cnum:n[q][s].length?2*(l[q][s]+0.5):2*l[q][s],Pe1:m[q][s],Pe2:n[q][s]});h.sort(Hl);a:{l=[];m=[];n=0;for(o=d.b.length;n<o;n++)m.push(d.q(n).fb());q=[];for(n=0;n<d.b.length;n++)q[n]=0;
n=0;for(o=h.length;n<o;n++){s=h[n];if(s.Cnum%2){t=0;for(u=s.Pe2.length;t<u;t++){v=v=s.Pe1[0].concat(s.Pe2[t]);A=Jl(v,d);if(v.length===A.length)Il(A,l,m,q)||l.push(A);if(l.length==e){e=l;break a}}}else{t=0;for(u=s.Pe1.length-1;t<u;t++){v=v=s.Pe1[t].concat(s.Pe1[t+1]);A=Jl(v,d);if(v.length===A.length)Il(A,l,m,q)||l.push(A);if(l.length==e){e=l;break a}}}}e=l}h=0;for(l=e.length;h<l;h++)e[h]=Kl(e[h],d);return e}D("kemia.ring.SSSR.findRings",Ll,void 0);function Ml(d,e){for(var h=[],l=0,m=d.length;l<m;l++)h.push(e.q(d[l]));d=[];l=0;for(m=h.length-1;l<m;l++){var n=e.yb(h[l],h[l+1]);n!=null&&d.push(n)}n=e.yb(h[0],h[h.length-1]);n!=null&&d.push(n);return new Bl(h,d)}
function Nl(d){if(!(d.fb()-d.b.length+d.Ld))return[];for(var e=0,h=d.b.length;e<h;e++)d.b[e].index=e;e=0;for(h=d.h.length;e<h;e++)d.h[e].index=e;if(h=d.b.length){e=Qa(false,h);h=Qa(false,h);var l=[],m=d.b[0];m.yc=0;l.push(m);for(e[0]=true;;){if(!l.length)break;m=l[0];Ha(l,0);for(var n=m.h.fa(),o=0,q=n.length;o<q;o++){var s=n[o],t=s.index;if(!h[t]){h[t]=true;var u=ne(s,m);s=u.index;if(e[s]){s=[];if(m.yc==u.yc){s.push(m);s.push(u)}else{u.ye=true;var v=u.Qd();t=0;for(var A=v.length;t<A;t++){var E=v[t];
E.yc==u.yc-1&&s.push(E)}}for(u=m.yc;;){s[0].ye=true;s[1].ye=true;u--;v=s[0].Qd();t=0;for(A=v.length;t<A;t++)if(v[t].yc==u){s[0]=v[t];break}v=s[1].Qd();t=0;for(A=v.length;t<A;t++)if(v[t].yc==u){s[1]=v[t];break}if(s[0]==s[1]){s[0].ye=true;break}}}else{u.yc=m.yc+1;e[s]=true;l.push(u)}}}}}e=[];m=d.b.length;h=Qa(false,m);l=Qa(false,m);m=Qa(-1,m);n=0;for(o=d.b.length;n<o;n++){s=d.b[n];if(!h[s.index])if(s.ye){q=new V;A=[];A.push(s);h[0]=true;E=new Q;E.wf=s.index;m[s.index]=0;for(q.Sa(E);;){if(!A.length)break;
u=A[0];Ha(A,0);v=u.h.fa();s=0;for(t=v.length;s<t;s++){var R=v[s];E=R.index;if(!l[E]){l[E]=true;R=ne(R,u);E=R.index;if(R.ye){if(h[E]){E=d.yb(u,R);var ba=new S(q.b[m[u.index]],q.b[m[R.index]]);ba.wf=E.index}else{h[E]=true;A.push(R);E=new Q;E.wf=R.index;m[R.index]=q.b.length;q.Sa(E);R=d.yb(u,R);ba=new S(q.b[m[u.index]],E);ba.wf=R.index}q.Ua(ba)}}}}s=0;for(t=q.b.length;s<t;s++)q.b[s].index=s;s=0;for(t=q.h.length;s<t;s++)q.h[s].index=s;s=q.h.length-q.b.length+1;t=[];A=new El(q);u=0;for(v=q.b.length;u<
v;u++){E=A.remove(q.q(u),6);for(R=0;R<E.length;R++){ba=E[R].b;Ha(ba,ba.length-1);for(var oc=0,Ea=ba.length;oc<Ea;oc++)ba[oc]=ba[oc];t.push(ba)}}wa.sort.call(t,Pa);if(t.length>=s){a:{A=[];u=[];v=0;for(E=q.b.length;v<E;v++)u.push(q.q(v).fb());R=Qa(0,q.b.length);v=0;for(E=t.length;v<E;v++){ba=t[v];if(!Il(ba,A,u,R)){A.push(ba);if(A.length==s){A=A;break a}}}A=A}if(A.length<s)A=Ll(q)}else A=Ll(q);s=0;for(t=A.length;s<t;s++){u=A[s];v=0;for(E=u.length;v<E;v++)u[v]=q.b[u[v]].wf}s=0;for(q=A.length;s<q;s++)e.push(Ml(A[s],
d))}}return e}D("kemia.ring.RingFinder.findRings",Nl,void 0);function V(d){this.h=[];this.b=[];this.name=d?d:"";this.Yf=[];this.gi=true;this.lb=[];this.Ld=0}D("kemia.model.Molecule",V,void 0);V.prototype.Ua=function(d){var e=this.xa(d.source),h=this.xa(d.target);if(this.lb[e]!=this.lb[h]){var l;if(this.lb[e]<this.lb[h]){e=this.lb[e];l=this.lb[h]}else{l=this.lb[e];e=this.lb[h]}this.Ld--;h=0;for(var m=this.b.length;h<m;h++)if(this.lb[h]==e)this.lb[h]=l}this.h.push(d);d.source.h.add(d);d.target.h.add(d);d.G=this};
D("kemia.model.Molecule.prototype.addBond",V.prototype.Ua,void 0);V.prototype.q=function(d){return this.b[d]};D("kemia.model.Molecule.prototype.getAtom",V.prototype.q,void 0);V.prototype.yb=function(d,e){for(var h=d.h.fa(),l=0,m=h.length;l<m;l++){var n=h[l];if(ne(n,d)==e)return n}return null};V.prototype.xa=function(d){return xa(this.b,d)};
function Lk(d,e){var h;if(e.constructor==Number)h=d.b[e];else if(e.constructor==Q)h=e;e=h.h.fa();var l=d.h;I(e,function(m){Ga(l,m)});h.h.clear();Ga(d.b,h);h.G=undefined}function Kk(d,e){e=e.constructor==Number?d.h[e]:e;e.source.h.remove(e);e.target.h.remove(e);if(e.source.h.fa().length==0){Ga(d.b,e.source);e.source.G=undefined}if(e.target.h.fa().length==0){Ga(d.b,e.target);e.target.G=undefined}Ga(d.h,e);e.G=undefined;e.source=undefined;e.target=undefined}V.prototype.Fh=function(){return this.b.length};
D("kemia.model.Molecule.prototype.countAtoms",V.prototype.Fh,void 0);V.prototype.fb=function(){return this.h.length};D("kemia.model.Molecule.prototype.countBonds",V.prototype.fb,void 0);V.prototype.Sa=function(d){var e=this.b.length;this.Ld++;this.lb[e]=this.Ld;this.b.push(d);d.G=this};D("kemia.model.Molecule.prototype.addAtom",V.prototype.Sa,void 0);function ee(d){if(d.gi){d.gi=false;d.Yf=Nl(d)}return d.Yf}
V.prototype.aa=function(){var d=new V(this.name);I(this.b,function(e){d.Sa(e)});I(this.h,function(e){d.Ua(e)});return d};function Mk(d){var e=d.aa();if(e.Ld==1)return[e];var h=new Dc;I(e.b,function(l){var m=e.lb[e.xa(l)];Fc(h.ja,m)==false&&h.ya(m,new V);h.m(m).Sa(l)});I(e.h,function(l){var m=e.lb[e.xa(l.source)];h.m(m).Ua(l)});return h.fa()}V.prototype.toString=function(){return J(this.b,function(d){return d.A+d.index+d.a.toString()}).toString()};
function Ol(d){d=Pl(d);return new O((d.left+d.right)/2,(d.top+d.bottom)/2)}function Pl(d){return Hd.apply(null,J(d.b,function(e){return e.a}))};function Ql(){U.call(this)}H(Ql,U);D("kemia.controller.plugins.MoleculeEdit",Ql,void 0);Ql.prototype.r=N("kemia.controller.plugins.MoleculeEdit");Ql.prototype.Cb=function(d){return d=="selectMoleculeTemplate"};Ql.prototype.kc=Jh("selectMoleculeTemplate");
Ql.prototype.pd=function(d,e,h,l){this.hh=e;d=Rl(this.hh);e=ie(this.f.R.Oa.transform.Vb(),[new O(0,0)])[0];h=Pl(d);e=Ed(e,new O(h.right,h.top));h=this.f.Z.length>0?this.f.Z[0]:new mi;Nk(h,d);Sl(h,d,e);this.f.na([h]);h=si(this.f,Ol(d));e=ti(this.f.Fb,document.body.scrollLeft+document.documentElement.scrollLeft,document.body.scrollTop+document.documentElement.scrollTop);l.clientX=h.x-e.x;l.clientY=h.y-e.y;Tl(this,l,d)};
function Tl(d,e,h){var l=new ih(d.f.Fb);l.vc=new O(e.clientX,e.clientY);l.oh=l.vc;l.G=h;l.ba=d.f;l.addEventListener("drag",function(m){l.uc&&I(l.uc,function(o){o.clear()});l.uc=[];m=new O(m.clientX,m.clientY);var n=Ed(m,l.vc);cg(l.G.Xa,n.x,n.y,0,0,0);n=ie(l.ba.R.transform.Vb(),[m,l.oh]);n=Ed(n[0],n[1]);Sl(l.G.cb,l.G,n);l.oh=m;m=Ul(this,h);if(m.length>0)m=[m[0]];I(m,function(o){l.uc.push(l.ba.R.Oa.Oc.hb(o[0]));l.uc.push(l.ba.R.Oa.Oc.hb(o[1]))})},undefined,d);l.addEventListener("end",function(){var m=
Ul(this,l.G);if(m.length>0)m=[m[0]];I(m,function(n){cl(n[0],n[1])},this);l.ba.na(l.ba.Z);l.ca()},undefined,d);l.fd(e)}Ql.prototype.r=N("kemia.controller.plugins.MoleculeEdit");Ql.prototype.wa=function(d){Oh(this.f);var e=qi(this.f,d);if(e instanceof V)d.shiftKey?this.rotate(d,e):this.Jd(d,e);Qh(this.f)};
Ql.prototype.Jd=function(d,e){var h=new ih(this.f.Fb);h.ac=si(this.f,Ol(e));h.Mc=null;h.Nc=null;h.ph=0;h.qh=0;h.G=e;h.ba=this.f;h.addEventListener("drag",function(){h.uc&&I(h.uc,function(q){q.clear()});h.uc=[];h.Mc=h.Mc||h.Wb;h.Nc=h.Nc||h.Xb;var l=h.Wb-h.Mc,m=h.Xb-h.Nc,n=l-h.ph,o=m-h.qh;cg(h.G.Xa,l,m,0,0,0);Sl(h.G.cb,h.G,new O(n/h.ba.R.transform.ia,o/h.ba.R.transform.Da));h.ph=h.Wb-h.Mc;h.qh=h.Xb-h.Nc;l=Ul(this,e);if(l.length>0)l=[l[0]];I(l,function(q){h.uc.push(h.ba.R.Oa.Oc.hb(q[0]));h.uc.push(h.ba.R.Oa.Oc.hb(q[1]))})},
undefined,this);h.addEventListener("end",function(){var l=Ul(this,h.G);if(l.length>0)l=[l[0]];I(l,function(m){cl(m[0],m[1])},this);h.ba.na(h.ba.Z);h.ca()},undefined,this);h.fd(d)};function Ul(d,e){return ya(J(e.b,function(h){var l=Uh(this.f.Mf,{x:h.a.x,y:h.a.y},this);l=ya(l,function(m){if(m instanceof Q)if(!K(e.b,m))return true;return false});return l.length>0?[h,l[0]]:false},d),function(h){return h!=false},d)}
Ql.prototype.rotate=function(d,e){var h=new ih(this.f.Fb);h.ac=ie(this.f.R.transform,[Ol(e)])[0];h.vc=ri(d);h.rh=Ld(Math.atan2(h.vc.y-h.ac.y,h.vc.x-h.ac.x)*180/Math.PI);h.Mc=null;h.Nc=null;h.Xa=e.Xa;h.G=e;h.ba=this.f;h.addEventListener("drag",function(){h.Mc=h.Mc||h.Wb;h.Nc=h.Nc||h.Xb;var l=Ld(Math.atan2(h.vc.y+(h.Xb-h.Nc)-h.ac.y,h.vc.x+(h.Wb-h.Mc)-h.ac.x)*180/Math.PI);h.Xa.Ye?h.Xa.Ye.aa():new Zf;cg(h.Xa,0,0,l-h.rh,h.ac.x,h.ac.y)});h.addEventListener("end",function(){var l=ie(h.ba.R.transform.Vb(),
[h.ac])[0];Vl(h.G.cb,h.G,-(Ld(Math.atan2(h.vc.y+h.Xb-h.ac.y,h.vc.x+h.Wb-h.ac.x)*180/Math.PI)-h.rh),l);h.ba.na(h.ba.Z);h.ca()});h.fd(d)};Ql.prototype.de=function(){this.hh=undefined};Ql.prototype.queryCommandValue=function(d){if(d=="selectMoleculeTemplate")return this.hh};
var Wl=[{name:"benzene",atoms:[{symbol:"C",coord:{x:2.5981,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:2.5981,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:1.3,y:3,z:0},charge:0},{symbol:"C",coord:{x:0,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:0,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:1.3,y:0,z:0},charge:0}],bondindex:[{source:0,target:1,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:3,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:3,
target:4,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:4,target:5,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:5,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"}]},{name:"cyclohexane",atoms:[{symbol:"C",coord:{x:2.5981,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:2.5981,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:1.3,y:3,z:0},charge:0},{symbol:"C",coord:{x:0,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:0,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:1.3,y:0,z:0},charge:0}],bondindex:[{source:0,target:1,
type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:3,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:3,target:4,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:4,target:5,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:5,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"}]},{name:"cyclopentane",atoms:[{symbol:"C",coord:{x:-2.3083,y:0.4635,z:0},charge:0},{symbol:"C",coord:{x:-2.3083,y:1.9635,z:0},charge:0},{symbol:"C",coord:{x:-0.8817,y:2.427,
z:0},charge:0},{symbol:"C",coord:{x:0,y:1.2135,z:0},charge:0},{symbol:"C",coord:{x:-0.8817,y:0,z:0},charge:0}],bondindex:[{source:0,target:1,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:3,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:3,target:4,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:4,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"}]},{name:"cyclopentane",atoms:[{symbol:"C",coord:{x:2.5981,y:0.75,z:0},charge:0},{symbol:"C",
coord:{x:2.5981,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:0,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:0,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:1.3,y:0,z:0},charge:0}],bondindex:[{source:0,target:1,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:3,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:3,target:4,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:4,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"}]},{name:"pyrrole",atoms:[{symbol:"C",
coord:{x:2.5981,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:2.5981,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:0,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:0,y:0.75,z:0},charge:0},{symbol:"N",coord:{x:1.3,y:0,z:0},charge:0}],bondindex:[{source:0,target:1,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:3,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:3,target:4,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:4,target:0,type:"SINGLE_BOND",
stereo:"NOT_STEREO"}]},{name:"pyrrole",atoms:[{symbol:"C",coord:{x:-2.3083,y:0.4635,z:0},charge:0},{symbol:"C",coord:{x:-2.3083,y:1.9635,z:0},charge:0},{symbol:"C",coord:{x:-0.8817,y:2.427,z:0},charge:0},{symbol:"C",coord:{x:0,y:1.2135,z:0},charge:0},{symbol:"N",coord:{x:-0.8817,y:0,z:0},charge:0}],bondindex:[{source:0,target:1,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:3,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:3,target:4,
type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:4,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"}]},{name:"naphthalene",atoms:[{symbol:"C",coord:{x:2.5981,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:2.5981,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:1.2991,y:3,z:0},charge:0},{symbol:"C",coord:{x:0,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:0,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:1.2991,y:0,z:0},charge:0},{symbol:"C",coord:{x:3.8971,y:3,z:0},charge:0},{symbol:"C",coord:{x:5.1962,y:2.25,z:0},charge:0},
{symbol:"C",coord:{x:5.1962,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:3.8971,y:0,z:0},charge:0}],bondindex:[{source:0,target:1,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:3,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:3,target:4,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:4,target:5,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:5,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:1,target:6,type:"SINGLE_BOND",
stereo:"NOT_STEREO"},{source:6,target:7,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:7,target:8,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:8,target:9,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:9,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"}]}];function Xl(d,e){if(arguments.length>0){this.x=d;this.y=e}}a=Xl.prototype;a.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};a.add=function(d){return new Xl(this.x+d.x,this.y+d.y)};a.toString=function(){return this.x+","+this.y};a.scale=function(d){this.x*=d;this.y*=d};a.normalize=function(){norm=1/Math.sqrt(this.x*this.x+this.y*this.y);this.x*=norm;this.y*=norm};a.sub=function(d){this.x-=d.x;this.y-=d.y};a.ii=function(d){this.x=-d.x;this.y=-d.y};
a.ii=function(){this.x=-this.x;this.y=-this.y};a.oe=function(d){vDot=(this.x*d.x+this.y*d.y)/(this.length()*d.length());if(vDot<-1)vDot=-1;if(vDot>1)vDot=1;return Math.acos(vDot)};function Yl(d){var e,h;e=d.b.length;var l=new Array(e);for(i=0;i<e;++i){l[i]=new Array(e);for(j=0;j<e;j++)l[i][j]=0}for(var m=d.fb(),n=0;n<m;n++){bond=d.h[n];e=d.xa(bond.source);h=d.xa(bond.target);l[e][h]=1;l[h][e]=1}return l};var Zl;function $l(d,e,h,l,m){this.hc=d;this.qb=e;this.cg=h;this.Zi=l;this.Gb=m}$l.prototype.getName=w("qb");
function am(d){var e=[d.hc?bm(d.hc)+".":"",d.qb?bm(Zl?Zl(d.qb):d.qb):"anonymous",bm(d.Zi),d.cg?" [as "+bm(Zl?Zl(d.cg):d.cg)+"]":""];if(d.Gb){e.push(" at ");if(Boolean(C.CLOSURE_INSPECTOR___&&C.CLOSURE_INSPECTOR___.supportsJSUnit)){var h=d.Gb.match(/\d+$/)[0];e.push('<a href="" onclick="CLOSURE_INSPECTOR___.showLine(\'',bm(d.Gb),"', '",h,"'); return false\">",bm(d.Gb),"</a>")}else e.push(bm(d.Gb))}return e.join("")}
var cm=new RegExp("^    at(?: (?:(.*?)\\.)?((?:new )?(?:[a-zA-Z_$][\\w$]*|<anonymous>))(?: \\[as ([a-zA-Z_$][\\w$]*)\\])?)? (?:\\(unknown source\\)|\\(native\\)|\\((?:eval at )?((?:http|https|file)://[^\\s)]+|javascript:.*)\\)|((?:http|https|file)://[^\\s)]+|javascript:.*))$"),dm=/^([a-zA-Z_$][\w$]*)?(\(.*\))?@(?::0|((?:http|https|file):\/\/[^\s)]+|javascript:.*))$/,em=/^function ([a-zA-Z_$][\w$]*)/;
function fm(){for(var d=[],e=arguments.callee.caller,h=0;e&&h<20;){var l=Function.prototype.toString.call(e).match(em);l=l?l[1]:"";var m=["("];if(e.arguments)for(var n=0;n<e.arguments.length;n++){var o=e.arguments[n];n>0&&m.push(", ");F(o)?m.push('"',o,'"'):m.push(String(o))}else m.push("unknown");m.push(")");d.push(new $l("",l,"",m.join(""),""));try{e=e.caller}catch(q){break}h++}return d}
function gm(d){var e=d.match(cm);if(e)return new $l(e[1]||"",e[2]||"",e[3]||"","",e[4]||e[5]||"");if(e=d.match(dm))return new $l("",e[1]||"","",e[2]||"",e[3]||"");return null}function bm(d){return d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}
function hm(d){for(var e=d.length-1;d[e]&&(!d[e].qb||d[e].hc=="[object Object]");)e--;for(var h=-1,l=0;l<d.length;l++)if(d[l]&&d[l].getName()=="_assert"){h=l;break}var m=[];for(l=h+1;l<=e;l++){m.push("> ");d[l]?m.push(am(d[l])):m.push("(unknown)");m.push("\n")}return m.join("")}function im(d){d=d.replace(/\s*$/,"").split("\n");for(var e=[],h=0;h<d.length;h++)e.push(gm(d[h]));return e}function jm(d){d=im(d);return hm(d)}D("setDeobfuscateFunctionName",function(d){Zl=d},void 0);function km(d,e){return d==e}function lm(d,e){return d.toString()===e.toString()}var mm={String:km,Number:km,Boolean:km,Date:function(d,e){return d===e},RegExp:lm,Function:lm};
function nm(d){var e=typeof d;try{switch(e){case "string":break;case "boolean":break;case "number":break;case "object":case "function":switch(d.constructor){case (new String("")).constructor:e="String";break;case (new Boolean(true)).constructor:e="Boolean";break;case (new Number(0)).constructor:e="Number";break;case [].constructor:e="Array";break;case (new RegExp).constructor:e="RegExp";break;case (new Date).constructor:e="Date";break;case Function:e="Function";break;default:var h=d.constructor.toString().match(/function\s*([^( ]+)\(/);
if(h)e=h[1];else break}break}}finally{return e=e.substr(0,1).toUpperCase()+e.substr(1)}}function om(d){var e="<"+d+">";d===null||d===void 0||(e+=" ("+nm(d)+")");return e}function pm(d){qm("Call to fail()",d)}function X(d,e){if(e.length==d+1)return e[0];return null}function Y(d,e,h){return h.length==e+1?h[d]:h[d-1]}function Z(d,e){$(null,e.length==d||e.length==d+1&&F(e[0]),"Incorrect arguments passed to assert function")}function $(d,e,h){e||qm(d,h)}
function rm(){Z(1,arguments);var d=X(1,arguments),e=Y(1,1,arguments);$(d,typeof e=="boolean","Bad argument to assert(boolean)");$(d,e,"Call to assert(boolean) with false")}function sm(){Z(1,arguments);var d=Y(1,1,arguments),e=X(1,arguments);$(e,typeof d=="function","Argument passed to assertThrows is not a function");try{d()}catch(h){return h}qm(e,"No exception thrown from function passed to assertThrows")}
function tm(){Z(1,arguments);var d=Y(1,1,arguments);$(X(1,arguments),typeof d=="function","Argument passed to assertNotThrows is not a function");var e=true;try{d()}catch(h){e=false}$(X(1,arguments),e,"A non expected exception was thrown from function passed to assertNotThrows")}function um(){Z(1,arguments);var d=X(1,arguments),e=Y(1,1,arguments);$(d,typeof e=="boolean","Bad argument to assertTrue(boolean)");$(d,e,"Call to assertTrue(boolean) with false")}
function vm(){Z(1,arguments);var d=X(1,arguments),e=Y(1,1,arguments);$(d,typeof e=="boolean","Bad argument to assertFalse(boolean)");$(d,!e,"Call to assertFalse(boolean) with true")}function wm(){Z(2,arguments);var d=Y(1,2,arguments),e=Y(2,2,arguments);$(X(2,arguments),d===e,"Expected "+om(d)+" but was "+om(e))}function xm(){Z(2,arguments);var d=Y(1,2,arguments),e=Y(2,2,arguments);$(X(2,arguments),d!==e,"Expected not to be "+om(e))}
function ym(){Z(1,arguments);var d=Y(1,1,arguments);$(X(1,arguments),d===null,"Expected "+om(null)+" but was "+om(d))}function zm(){Z(1,arguments);var d=Y(1,1,arguments);$(X(1,arguments),d!==null,"Expected not to be "+om(null))}function Am(){Z(1,arguments);var d=Y(1,1,arguments);$(X(1,arguments),d===void 0,"Expected "+om(void 0)+" but was "+om(d))}function Bm(){Z(1,arguments);var d=Y(1,1,arguments);$(X(1,arguments),d!==void 0,"Expected not to be "+om(void 0))}
function Cm(){Z(1,arguments);zm.apply(null,arguments);Bm.apply(null,arguments)}function Dm(){Z(1,arguments);var d=Y(1,1,arguments);$(X(1,arguments),d!==void 0&&d!==null&&typeof d=="string"&&d!=="","Expected non-empty string but was "+om(d))}function Em(){Z(1,arguments);var d=Y(1,1,arguments);$(X(1,arguments),isNaN(d),"Expected NaN")}function Fm(){Z(1,arguments);var d=Y(1,1,arguments);$(X(1,arguments),!isNaN(d),"Expected not NaN")}
function Gm(){function d(n,o,q){if(n===o)return true;var s=nm(n),t=nm(o);if(s==t){var u=s=="Array",v=mm[s];if(v)v(n,o)||m.push(q+" expected "+om(n)+" but was "+om(o));else if(!u||n.length===o.length){v=q+(u?"[%s]":q?".%s":"%s");if(n.__iterator__)if(la(n.Kd))n.Kd(o)||m.push("equals() returned false for "+(q||s));else n.ja?d(n.ja,o.ja,v.replace("%s","map_")):m.push("unable to check "+(q||s)+" for equality: it has an iterator we do not know how to handle. please add an equals method");else{for(var A in n)u||
A in o?d(n[A],o[A],v.replace("%s",A)):m.push("property "+A+" not present in actual "+(q||t));if(!u)for(A in o)A in n||m.push("property "+A+" not present in expected "+(q||s))}}else m.push(q+" expected "+n.length+"-element array but got a "+o.length+"-element array")}else m.push(q+" expected "+om(n)+" but was "+om(o))}Z(2,arguments);var e=Y(1,2,arguments),h=Y(2,2,arguments),l=X(2,arguments)?X(2,arguments):"",m=[""];d(e,h,"");$(l,m.length==1,"Expected "+om(e)+" but was "+om(h)+m.join("\n   "))}
function Hm(){Z(2,arguments);var d=Y(1,2,arguments),e=Y(2,2,arguments),h=X(2,arguments)?X(2,arguments):"";d=nm(d);$(h,d=="Array","Expected an array for assertArrayEquals but found a "+d);e=nm(e);$(h,e=="Array","Expected an array for assertArrayEquals but found a "+e);Gm.apply(null,arguments)}
function Im(){Z(2,arguments);var d=Y(1,2,arguments),e=Y(2,2,arguments),h=X(2,arguments);um("Bad arguments to assertSameElements(opt_message, expected: ArrayLike, actual: ArrayLike)",ja(d)&&ja(e));d=Jm(d);e=Jm(e);$(h,d.length==e.length,"Expected "+d.length+" elements: ["+d+"], got "+e.length+" elements: ["+e+"]");for(var l=Jm(d),m=0;m<e.length;m++){var n=Km(l,e[m]);$(h,n!=-1,"Expected ["+d+"], got ["+e+"]");l.splice(n,1)}}
function Lm(){Z(1,arguments);Y(1,1,arguments)||$(X(1,arguments),false,"Expected to evaluate to true")}function Mm(){Z(1,arguments);Y(1,1,arguments)&&$(X(1,arguments),false,"Expected to evaluate to false")}function Nm(){Z(2,arguments);var d=Y(1,2,arguments),e=Y(2,2,arguments);d=Om(d);e=Om(e);$(X(2,arguments),d===e,"Expected "+om(d)+" but was "+om(e))}
function Pm(){Z(2,arguments);var d=Y(1,2,arguments),e=Y(2,2,arguments),h=X(2,arguments);for(var l in d){$(h,l in e,"Expected hash had key "+l+" that was not found");$(h,d[l]==e[l],"Value for key "+l+" mismatch - expected = "+d[l]+", actual = "+e[l])}for(l in e)$(h,l in d,"Actual hash had key "+l+" that was not expected")}
function Qm(){Z(3,arguments);var d=Y(1,3,arguments),e=Y(2,3,arguments),h=Y(3,3,arguments);$(X(3,arguments),Math.abs(d-e)<=h,"Expected "+d+", but got "+e+" which was more than "+h+" away")}function Rm(){Z(2,arguments);var d=Y(1,2,arguments),e=Y(2,2,arguments);$(X(2,arguments),Km(e,d)!=-1,"Expected '"+e+"' to contain '"+d+"'")}function Sm(){Z(2,arguments);var d=Y(1,2,arguments),e=Y(2,2,arguments);$(X(2,arguments),Km(e,d)==-1,"Expected '"+e+"' not to contain '"+d+"'")}
function Jm(d){for(var e=[],h=0;h<d.length;h++)e[h]=d[h];return e}function Km(d,e){if(d.indexOf)return d.indexOf(e);else{for(var h=0;h<d.length;h++)if(d[h]===e)return h;return-1}}function Om(d){var e=document.createElement("DIV");e.innerHTML=d;return e.innerHTML.replace(/^\s+|\s+$/g,"")}function qm(d,e){C.CLOSURE_INSPECTOR___&&C.CLOSURE_INSPECTOR___.supportsJSUnit&&C.CLOSURE_INSPECTOR___.jsUnitFailure(d,e);throw new Tm(d,e);}
function Tm(d,e){this.Ol=true;this.message=(d?d:"")+(d&&e?"\n":"")+(e?e:"");var h=(new Error).stack;h=h?im(h):fm();this.gm=hm(h);this.bl=d||null;this.Ql=e||""}Tm.prototype.toString=B("[JsUnitException]");D("fail",pm,void 0);D("assert",rm,void 0);D("assertThrows",sm,void 0);D("assertNotThrows",tm,void 0);D("assertTrue",um,void 0);D("assertFalse",vm,void 0);D("assertEquals",wm,void 0);D("assertNotEquals",xm,void 0);D("assertNull",ym,void 0);D("assertNotNull",zm,void 0);D("assertUndefined",Am,void 0);
D("assertNotUndefined",Bm,void 0);D("assertNotNullNorUndefined",Cm,void 0);D("assertNonEmptyString",Dm,void 0);D("assertNaN",Em,void 0);D("assertNotNaN",Fm,void 0);D("assertObjectEquals",Gm,void 0);D("assertArrayEquals",Hm,void 0);D("assertSameElements",Im,void 0);D("assertEvaluatesToTrue",Lm,void 0);D("assertEvaluatesToFalse",Mm,void 0);D("assertHTMLEquals",Nm,void 0);D("assertHashEquals",Pm,void 0);D("assertRoughlyEquals",Qm,void 0);D("assertContains",Rm,void 0);D("assertNotContains",Sm,void 0);function Um(d){this.qb=d||"Untitled Test Case";this.$f=[];this.Ue=null;d=window.location.search;var e=d.match(/(?:\?|&)runTests=([^?&]+)/i);if(e){this.Ue={};e=e[1].split(",");for(var h=0,l=e.length;h<l;h++)this.Ue[e[h]]=1}if(d=d.match(/(?:\?|&)order=(natural|random|sorted)/i))this.ea=d[1];this.sa=new Vm(this)}Um.prototype.ea="sorted";var Wm=window.setTimeout,Xm=String(window.setTimeout),Ym=null,Zm=typeof opera=="undefined"&&!!navigator&&navigator.userAgent.indexOf("MSIE")!=-1;a=Um.prototype;
a.Di=false;a.Oe=false;a.zi=0;a.vh=0;a.bf=0;a.Pf=null;a.Qe=null;a.add=function(d){this.$f.push(d)};a.mb=function(){return this.$f.length};a.next=function(){for(var d;d=this.$f[this.bf++];)if(!this.Ue||this.Ue[d.name]||this.Ue[this.bf-1])return d;return null};a.reset=function(){this.bf=0;this.sa=new Vm(this)};a.ui=B(true);
a.execute=function(){this.Di=true;this.reset();this.zi=(new Date).getTime();this.Oe=true;this.sa.jh=this.mb();if(this.ui()){this.log("Starting tests: "+this.qb);this.Ih()}else{this.log("shouldRunTests() returned false, skipping these tests.");this.sa.ih=true;$m(this)}};
function $m(d){an(d,"Done");d.Fi();var e=Wm==window.setTimeout;if(!e&&Zm&&String(window.setTimeout)==Xm)e=true;if(!e){an(d,"ERROR: Test did not restore setTimeout");d.sa.kb.push(new bn(d.qb,"ERROR: Test did not restore setTimeout"))}window.setTimeout=Wm;d.kj=(new Date).getTime();d.Oe=false;d.sa.Tf=d.kj-d.zi;d.sa.Pg=cn(d);d.log(dn(d.sa));d.sa.Zc()?d.log("Tests complete"):d.log("Tests Failed");if(d.Pf){e=d.Pf;e();d.Pf=null}}function an(d,e){d.sa.fi.push(en(d)+"  "+e)}a=Um.prototype;
a.log=function(d){var e=C.top;if(!(e&&typeof e._allTests!="undefined")&&window.console){if(typeof d=="string")d=en(this)+" : "+d;window.console.log(d)}};a.Zc=function(){return!!this.sa&&this.sa.Zc()};
a.qf=function(d){var e=[];this.Qe&&!this.Qe.$h()?e.push(this.qb+" [RUNNING]"):e.push(this.qb+" ["+(this.sa.Zc()&&!(this.Qe.kb.length>0)?"PASSED":"FAILED")+"]");e.push(window.location.href.substring(window.location.href.indexOf("google3")+8));e.push(dn(this.sa));if(d)e.push(".",this.sa.fi.join("\n"));else this.sa.Zc()||e.push(this.sa.kb.join("\n"));e.push(" ");return e.join("\n")};a.xg=function(){return this.sa.Tf};a.wg=function(){return this.sa.Pg};a.oi=function(){this.ti();this.execute()};
function fn(d,e){switch(d.ea){case "random":for(d=e.length;d>1;){var h=Math.floor(Math.random()*d);d--;var l=e[d];e[d]=e[h];e[h]=l}break;case "sorted":e.sort(function(m,n){if(m.name==n.name)return 0;return m.name<n.name?-1:1});break}}a=Um.prototype;a.ti=aa();a.Fi=aa();a.si=aa();a.gh=aa();
a.Ih=function(){an(this,"Start");this.vh=(new Date).getTime();for(var d;(d=this.next())&&this.Oe;){this.sa.ge++;var e=false;try{this.log("Running test: "+d.name);Ym=d.name;this.si();d.execute();this.gh();Ym=null;e=true;var h=d;this.sa.Zf++;var l=h.name+" : PASSED";an(this,l);this.log(l)}catch(m){d=d;h=d.name+" : FAILED";this.log(h);an(this,h);this.sa.kb.push(this.Yd(d.name,m));if(!e)try{this.gh()}catch(n){}}if(this.bf<this.$f.length&&(new Date).getTime()-this.vh>200){an(this,"Breaking async");this.timeout(ra(this.Ih,
this),100);return}}$m(this)};function cn(){for(var d=document.getElementsByTagName("script"),e=0,h=0,l=d.length;h<l;h++)d[h].src&&e++;return e}Um.prototype.timeout=function(d,e){return Wm(d,e)};function en(){var d=new Date,e="00"+d.getMilliseconds();e=e.substr(e.length-3);return(d.getHours()<10?"0"+d.getHours():String(d.getHours()))+":"+(d.getMinutes()<10?"0"+d.getMinutes():String(d.getMinutes()))+":"+(d.getSeconds()<10?"0"+d.getSeconds():String(d.getSeconds()))+"."+e}
Um.prototype.Yd=function(d,e){var h=null,l=null;if(e){this.log(e);if(F(e))h=e;else{h=e.message||e.description||e.toString();l=e.stack?jm(e.stack):e.stackTrace}}else h="An unknown error occurred";d=new bn(d,h,l);if(!e||!e.isJsUnitException||!e.loggedJsUnitException)an(this,d.toString());if(e&&e.isJsUnitException)e.loggedJsUnitException=true;return d};function gn(d,e,h){this.name=d;this.rk=e;this.scope=h||null}gn.prototype.execute=function(){this.rk.call(this.scope)};
function Vm(d){this.zk=d;this.Pg=this.Tf=this.Zf=this.ge=this.jh=0;this.ih=false;this.kb=[];this.fi=[]}Vm.prototype.Zc=function(){var d=this.ge==this.Zf&&this.kb.length==0;if(d&&!this.ih&&this.Df())return this.ge>0;return d};
function dn(d){var e=d.ge+" of "+d.jh+" tests run in "+d.Tf+"ms.\n";if(d.ih)e+="Tests not run because shouldRunTests() returned false.";else if(d.ge==0){e+="No tests found.  ";if(d.Df())e+="Call G_testRunner.setStrict(false) if this is expected behavior.  "}else e+=d.Zf+" passed, "+(d.jh-d.Zf)+" failed.\n"+Math.round(d.Tf/d.ge)+" ms/test. "+d.Pg+" files loaded.";return e}Vm.prototype.Df=function(){return this.zk.Qe.Df()};function bn(d,e,h){this.source=d;this.message=e;this.stack=h||null}
bn.prototype.toString=function(){return"ERROR in "+this.source+"\n"+this.message+(this.stack?"\n"+this.stack:"")};function hn(){this.kb=[]}a=hn.prototype;a.oa=null;a.xf=false;a.Lf=null;a.sg=null;a.Ei=true;a.Xh=function(d){if(!this.Lf){var e=document.getElementById("closureTestRunnerLog");if(e==null){e=document.createElement("div");document.body.appendChild(e)}this.Lf=e}if(this.oa&&this.oa.Oe)throw Error("The test runner is already waiting for a test to complete");this.oa=d;d.Qe=this;this.xf=true};a.xk=ca("Ei");a.Df=w("Ei");a.Vj=w("xf");
a.$h=function(){return this.kb.length>0||this.xf&&!!this.oa&&this.oa.Di&&!this.oa.Oe};a.Zc=function(){return!(this.kb.length>0)&&!!this.oa&&this.oa.Zc()};a.Yd=function(d){if(!this.sg||this.sg.call(null,d))this.kb.push(d)};a.Yj=function(d){var e=Ym;if(this.oa)this.oa.Yd(e,d);else throw new Error("Test runner not initialized with a test case. Original exception: "+d.message);};function jn(d,e){d.sg=e}a=hn.prototype;
a.qf=function(d){var e=[];this.oa&&e.push(this.oa.qf(d));if(this.kb.length>0){e.push("JavaScript errors detected by test runner:");e.push.apply(e,this.kb);e.push("\n")}return e.join("\n")};a.xg=function(){return this.oa?this.oa.xg():0};a.wg=function(){return this.oa?this.oa.wg():0};a.execute=function(){if(!this.oa)throw Error("The test runner must be initialized with a test case before execute can be called.");this.oa.Pf=ra(this.fk,this);this.oa.oi()};
a.fk=function(){var d=this.oa.qf(true);if(this.kb.length>0)d+="\n"+this.kb.join("\n");for(var e=this.Lf;e.firstChild;)e.removeChild(e.firstChild);kn(this,d);d=document.createElement("a");d.style.display="block";d.style.fontSize="small";d.href="";d.onclick=ra(function(){this.execute();return false},this);d.innerHTML="Run again without reloading";e.appendChild(d)};
function kn(d,e){e=e.split("\n");for(var h=0;h<e.length;h++){var l=e[h],m,n=/FAILED/.test(l)||/ERROR/.test(l);m=/PASSED/.test(l)?"darkgreen":n?"darkred":"#333";var o=document.createElement("div");if(l.substr(0,2)=="> ")o.innerHTML=l;else o.appendChild(document.createTextNode(l));if(n)if(l=/(\S+) (\[[^\]]*] )?: (FAILED|ERROR)/.exec(l)){l="runTests="+l[1];if(n=window.location.search){var q=/runTests=([^&]*)/.exec(n);l=q?n.substr(0,q.index)+l+n.substr(q.index+q[0].length):n+"&"+l}else l="?"+l;n=window.location.href;
if((q=window.location.hash)&&q.charAt(0)!="#")q="#"+q;n=n.split("#")[0].split("?")[0]+l+q;l=document.createElement("A");l.innerHTML="(run individually)";l.style.fontSize="0.8em";l.href=n;o.appendChild(document.createTextNode(" "));o.appendChild(l)}o.style.color=m;o.style.font="normal 100% monospace";try{o.style.whiteSpace="pre-wrap"}catch(s){}if(h<2)o.style.fontWeight="bold";d.Lf.appendChild(o)}}hn.prototype.log=function(d){this.oa&&this.oa.log(d)};(function(){var d=window.setTimeout;if(top.JsUnitTestManager||top.jsUnitTestManager)document.write('<script type="text/javascript" src="../../third_party/java/jsunit/core/app/jsUnitCore.js"><\/script>');else{var e=new hn;D("G_testRunner",e,void 0);D("G_testRunner.initialize",e.Xh,void 0);D("G_testRunner.isInitialized",e.Vj,void 0);D("G_testRunner.isFinished",e.$h,void 0);D("G_testRunner.isSuccess",e.Zc,void 0);D("G_testRunner.getReport",e.qf,void 0);D("G_testRunner.getRunTime",e.xg,void 0);D("G_testRunner.getNumFilesLoaded",
e.wg,void 0);D("G_testRunner.setStrict",e.xk,void 0);D("G_testRunner.logTestFailure",e.Yj,void 0);C.debug||ua("debug",ra(e.log,e));C.G_errorFilter&&jn(e,C.G_errorFilter);window.onerror=function(h,l,m){if(typeof h=="object")h.target&&h.target.tagName=="SCRIPT"?e.Yd("UNKNOWN ERROR: Script "+h.target.src):e.Yd("UNKNOWN ERROR: No error information available.");else e.Yd("JS ERROR: "+h+"\nURL: "+l+"\nLine: "+m)};window.onload=function(){d(function(){if(!e.xf){var h=new Um(document.title),l=typeof C.RuntimeObject!=
"undefined"?C.RuntimeObject("test*"):C,m=[];for(var n in l){try{var o=l[n]}catch(q){}/^test/.test(n)&&la(o)&&m.push(new gn(n,o,C))}fn(h,m);for(l=0;l<m.length;l++)h.add(m[l]);h.log(h.mb()+" tests auto-discovered");if(C.setUp)h.si=C.setUp;if(C.tearDown)h.gh=C.tearDown;if(C.setUpPage)h.ti=C.setUpPage;if(C.tearDownPage)h.Fi=C.tearDownPage;if(C.runTests)h.oi=C.runTests;if(C.shouldRunTests)h.ui=C.shouldRunTests;e.Xh(h)}e.execute()},500);window.onload=null}}})();function ln(d){var e=this.cl(Yl(d)),h=0,l=-1,m=d.fb(),n=e.length;for(f=0;f<n;f++){atom=d.q(f);if(this.ll(atom,d,m)==1)for(g=0;g<n;g++)if(e[f][g]>h){h=e[f][g];l=f}}return path=this.ml(d,d.q(l))}
function mn(d,e,h){bondVector=e;for(f=0;f<d.b.length-1;f++){atom=d.q(f);nextAtom=d.q(f+1);atomPoint=new O(atom.a.x,atom.a.y);bondVector.normalize();bondVector.scale(h);atomPoint.x+=bondVector.x;atomPoint.y+=bondVector.y;nextAtom.a=atomPoint;nextAtom.Ib(0,true);e=true;if(this.Ml(d)==2)e=false;bondVector=this.ol(nextAtom,atom,this.il(d),e)}}
function nn(d){var e=0,h=0,l=0;atIdx=0;for(atCount=d.length;atIdx<atCount;atIdx++){atom=d[atIdx];if(atom.Ia[0]==true){e+=atom.a.x;h+=atom.a.y;l++}}return center=new O(e/l,h/l)}function on(d,e){var h=0;if(d>=0&&e>=0)h=Math.atan(e/d);else if(d<0&&e>=0)h=Math.PI+Math.atan(e/d);else if(d<0&&e<0)h=Math.PI+Math.atan(e/d);else if(d>=0&&e<0)h=2*Math.PI+Math.atan(e/d);return h}function pn(d,e){for(ap=0;ap<e;ap++)if(!d.q(ap).Ia[0])return false;return true}
function qn(d,e,h,l,m){var n=0,o=0,q=n=0;n=0;sharedAtomsCenterVector=new Xl(h.x,h.y);newDirection=new Xl(d.a.x,d.a.y);occupiedDirection=new Xl(h.x,h.y);occupiedDirection.sub(newDirection);atomsToDraw=[];n=e.b.length;h=l.b.length;if(n==1){for(f1=0;f1<h;f1++)atomsToDraw.push(l.q(f1));n=Math.PI*2/(h+n);placedAtom=e.q(0);xDiff=placedAtom.a.x-d.a.x;yDiff=placedAtom.a.y-d.a.y;o=this.kf(xDiff,yDiff);this.ji(atomsToDraw,new O(d.a.x,d.a.y),o,n,m)}else if(n==0){for(f1=0;f1<h;f1++)atomsToDraw.push(l.q(f1));
n=Math.PI*2/h;o=0;this.ji(atomsToDraw,new O(d.a.x,d.a.y),o,n,m)}else{q=[];sharedAtomsCenterVector.sub(newDirection);newDirection=sharedAtomsCenterVector;newDirection.normalize();newDirection.scale(m);newDirection.ii();distanceMeasure=new O(d.a.x,d.a.y);distanceMeasure.x+=newDirection.x;distanceMeasure.y+=newDirection.y;for(f1=0;f1<n;f1++)q.push(e.q(f1));this.fm(q,distanceMeasure);closestPoint1=new Xl(q[0].a.x,q[0].a.y);closestPoint2=new Xl(q[1].a.x,q[1].a.y);closestPoint1.sub(new Xl(d.a.x,d.a.y));
closestPoint2.sub(new Xl(d.a.x,d.a.y));n=closestPoint1.oe(occupiedDirection);n+=closestPoint2.oe(occupiedDirection);angle1=this.kf(q[0].a.x-d.a.x,q[0].a.y-d.a.y);angle2=this.kf(q[1].a.x-d.a.x,q[1].a.y-d.a.y);angle3=this.kf(distanceMeasure.x-d.a.x,distanceMeasure.y-d.a.y);e=null;e=angle1>angle3?angle1-angle3<Math.PI?q[1]:q[0]:angle3-angle1<Math.PI?q[0]:q[1];n=2*Math.PI-n;n=n/(h+1);for(fff=0;fff<h;fff++)atomsToDraw.push(l.q(fff));q=m;o=this.kf(e.a.x-d.a.x,e.a.y-d.a.y);this.ji(atomsToDraw,new O(d.a.x,
d.a.y),o,n,q)}}function rn(d,e,h,l,m){points=[];angle=h;ad=0;for(ads=d.length;ad<ads;ad++){angle+=l;if(angle>=2*Math.PI)angle-=2*Math.PI;connectAtom=d[ad];if(connectAtom.A=="H")m*=0.6;x=Math.cos(angle)*m;y=Math.sin(angle)*m;newX=x+e.x;newY=y+e.y;points.push(new O(newX,newY))}ad=0;for(ads=d.length;ad<ads;ad++){connectAtom=d[ad];connectAtom.a=points[ad];connectAtom.Ia[0]=true}}function sn(d,e,h,l){cntLoop=0;I(e.h.fa(),function(m){cntLoop++;m=ne(m,e);m.Ia[0]?l.Sa(m):h.Sa(m)});return cntLoop}
function tn(d){I(d,function(e){e.Ib(0,false)})}function un(d){I(d,function(e){e.Ib(0,true)})};function vn(d,e,h){d=Math.sqrt(Math.pow(h/(2*Math.sin(Math.PI/d.b.length)),2)-Math.pow(h/2,2));e=on(e.x,e.y);e+=Math.PI/2;return new Xl(Math.cos(e)*d,Math.sin(e)*d)}
function wn(d,e,h,l,m){var n=e.b.length;if(n>2){h=m/(2*Math.sin(Math.PI/d.b.length));l.normalize();l.scale(h);m=new O(sharedAtomsCenter.x+l.x,sharedAtomsCenter.y+l.y);var o=xn(e);n=o[0];o=o[1];var q=new Xl(n.a.x,n.a.y),s=new Xl(o.a.x,o.a.y);q.sub(l);s.sub(l);q=q.oe(s);q=(2*Math.PI-q)/(d.b.length-e.b.length+1);var t;a:{if(Ed(n.a,o.a).x==0){if(n.a.y>o.a.y){t=n;break a}}else if(n.a.x>o.a.x){t=n;break a}t=o}s=Md(Ld(Math.atan2(l.y-t.a.y,l.x-t.a.x)*180/Math.PI));d=yn(t,e.h[0],d.h);e=1;o=Ed(n.a,o.a);if(o.x==
0){if(l.x>n.a.x)e=-1}else if(l.y-n.a.y<(l.x-n.a.x)*o.y/o.x)e=-1;q*=e;rn(d,m,s,q,h)}else if(n==2)zn(d,e,h,l,m);else n==1&&An(d,e,h,l,m)}function Bn(d,e,h){var l=new V,m=0;I(e,function(n){I(n.b,function(o){var q=new V,s=new V,t=ya(e,function(u){return K(u.b,o)});t=Ra(J(t,function(u){return u.b}));t=Cn(t);m+=sn(d,o,q,s);tn(q.b);I(q.b,function(u){l.Sa(u)});q.b.length>0&&qn(o,s,t,q,h)})});return l}
function yn(d,e,h){h=ya(h,function(n){return n!==e});var l=Ca(h,function(n){return ne(n,d)});h=ya(h,function(n){return n!==l});if(h.length>0){var m=ne(l,d);return Ia(m,yn(m,l,h))}else return[]}function xn(d){var e=[];I(d.b,function(h){I(h.h.fa(),function(l){K(d.h,l)&&e.push(ne(l,h))})});return e}
function zn(d,e,h,l,m){var n=m/(2*Math.sin(Math.PI/d.b.length));m=Math.sqrt(Math.pow(n,2)-Math.pow(m/2,2));l.normalize();l.scale(m);h=new O(h.x+l.x,h.y+l.y);l=e.b[0];m=e.b[1];var o=new Xl(l.a.x,l.a.y),q=new Xl(m.a.x,m.a.y),s=new Xl(h.x,h.y);o.sub(s);q.sub(s);o=o.oe(q);o=(2*Math.PI-o)/(d.b.length-1);centerX=h.x;centerY=h.y;xDiff=l.a.x-m.a.x;yDiff=l.a.y-m.a.y;direction=1;if(xDiff==0){startAtom=l.a.y>m.a.y?l:m;direction=centerX<l.a.x?1:-1}else{startAtom=l.a.x>m.a.x?l:m;direction=centerY-l.a.y>(centerX-
l.a.x)*yDiff/xDiff?1:-1}startAngle=on(startAtom.a.x-h.x,startAtom.a.y-h.y);currentAtom=startAtom;currentBond=e.h[0];atomsToDraw=[];x1=0;for(x2=d.h.length-2;x1<x2;x1++){currentBond=this.nl(d,currentBond,currentAtom);currentAtom=ne(currentBond,currentAtom);atomsToDraw.push(currentAtom)}o*=direction;rn(atomsToDraw,h,startAngle,o,n)}
function An(d,e,h,l,m){m=m/(2*Math.sin(Math.PI/d.b.length));l.normalize();l.scale(m);h=new O(h.x+l.x,h.y+l.y);var n=2*Math.PI/d.b.length,o=e.b[0];l=(new Xl(o.a.x,o.a.y)).oe(l);d=yn(o,e.h[0],d.h);rn(d,h,l,n,m)}function Dn(d,e){var h=[];I(e.b,function(l){K(d.b,l)&&h.push(l)});return h}function En(d,e){var h=[];I(e.h,function(l){K(d.h,l)&&h.push(l)});return h}function Cn(d){var e=za(d,function(h,l){return Fd(h,l.a)},new O(0,0));return new O(e.x/d.length,e.y/d.length)}
function Fn(d,e,h,l){var m;result=[];atomCount=e.b.length;k=0;for(k1=d.length;k<k1;k++)if(e!=d[k]){atomCount2=d[k].b.length;a=0;a:for(;a<atomCount;a++)for(a2=0;a2<atomCount2;a2++)if(e.b[a]==d[k].b[a2]){result.push(d[k]);break a}}m=result;r=0;for(r1=m.length;r<r1;r++){var n=m[r];if(!n.Ia[0]){var o={b:Dn(e,n),h:En(e,n)};sac=o.b.length;if(sac==2&&h=="FUSED"||sac==1&&h=="SPIRO"||sac>2&&h=="BRIDGED"){debug="";for(qw=0;qw<o.b.length;qw++)debug+="\n         "+o.b[qw].a+" "+o.b[qw].Ia[0];sharedAtomsCenter=
nn(o.b);oldRingCenter=nn(e.b);var q=new Xl(sharedAtomsCenter.x,sharedAtomsCenter.y);newRingCenterVector=new Xl(q.x,q.y);newRingCenterVector.sub(new Xl(oldRingCenter.x,oldRingCenter.y));oldRingCenterVector=new Xl(newRingCenterVector.x,newRingCenterVector.y);tempPoint=new O(sharedAtomsCenter.x+newRingCenterVector.x,sharedAtomsCenter.y+newRingCenterVector.y);wn(n,o,sharedAtomsCenter,newRingCenterVector,l);n.Ib(0,true);Fn(d,n,h,l)}}}}
function Gn(d){I(d,function(e){e.ci||I(e.b,function(h){h.Ib(0,false)})})}function Hn(d){return Ca(d,function(e){return Aa([e.source,e.target],function(h){return h.Ia[2]&&!h.Ia[0]&&ne(e,h).Ia[0]})})}
function In(d,e,h,l){Gn(h);h=ya(e.b,function(s){return s.Ia[0]});var m=Hn(e.h);if(m){var n=Ca([m.source,m.target],function(s){return s.Ia[2]&&!s.Ia[0]});m=ne(m,n);l=Ca(l,function(s){return Ca(s,function(t){return K(t.b,n)})});var o=n.a.aa(),q=m.a.aa();Jn(d,l);tn(h);d=Bn(e,l,Kn);un(h);h=Ia(d.b,Ra(J(l,function(s){return s.b})));Ma(h);oldPoint2=o;oldPoint1=q;newPoint2=n.a;newPoint1=m.a;oldAngle=on(oldPoint2.x-oldPoint1.x,oldPoint2.y-oldPoint1.y);newAngle=on(newPoint2.x-newPoint1.x,newPoint2.y-newPoint1.y);
angleDiff=oldAngle-newAngle;translationVector=new Xl(oldPoint1.x,oldPoint1.y);translationVector.sub(new Xl(newPoint1.x,newPoint1.y));I(h,function(s){s.a.x+=translationVector.x;s.a.y+=translationVector.y});costheta=Math.cos(angleDiff);sintheta=Math.sin(angleDiff);I(h,function(s){point=s.a;relativex=point.x-oldPoint1.x;relativey=point.y-oldPoint1.y;point.x=relativex*costheta-relativey*sintheta+oldPoint1.x;point.y=relativex*sintheta+relativey*costheta+oldPoint1.y});I(l,function(s){s.ci=true})}};function Ln(d){var e=[];done=new Array(d.length);x=0;for(x2=d.length;x<x2;x++)done[x]=false;i=0;for(j=d.length;i<j;i++)if(!done[i]){partition=[];partition.push(d[i]);done[i]=true;atomCount=d[i].b.length;for(k=i+1;k<d.length;k++)if(!done[k]){atomCount2=d[k].b.length;p=0;a:for(;p<partition.length;p++){atomCount=partition[p].b.length;for(a=0;a<atomCount;a++)for(a2=0;a2<atomCount2;a2++)if(partition[p].b[a]==d[k].b[a2]){partition.push(d[k]);done[k]=true;k=i;break a}}}e.push(partition)}return e};var Kn=1.5;
function Mn(d){var e=0,h=new Xl(0,1),l=d.b.length;for(f=0;f<l;f++){atom=d.q(f);atom.Ib(0,false);atom.Ib(1,false);atom.Ib(2,false);atom.Ib(le.Nk,false)}if(l==1){d.q(0).coords=new O(0,0);return d}if(d.Ld>1)throw Error("Molecule not connected.");var m=d.fb();e=m-d.b.length+1;var n=ee(d),o=new Ln(n);if(e>0){I(n,function(q){I(q.b,function(s){s.Ib(2,true)})});wa.sort.call(o,function(q,s){return Pa(q.length,s.length)}||Pa);e=o[o.length-1];this.Rl(h,e);Bn(d,e,Kn);I(e,function(q){q.ci=true})}else{e=ln(d);
e.q(0).a=new O(0,0);e.q(0).Ia[0]=true;mn(e,h,Kn)}e=0;do{e++;this.tl(d,m,Kn);In(h,d,n,o)}while(!pn(d,l)&&e<=d.b.length);return d}
function Jn(d,e){function h(o){var q=ya(e,function(s){return K(e,s)});za(q,function(s,t){t=ya(t.b,function(u){K(o.b,u)});return s+t.length},0)}wa.sort.call(e,function(o,q){Pa(h(o),h(q))}||Pa);var l=e[e.length-1];if(!l.Ia[0]){var m={b:this.Zl(l.h[0],d),h:[l.h[0]]},n=za(m.b,function(o,q){return Fd(o,q.a)},new O(0,0));wn(l,m,new Xl(n.x/m.b.length,n.y/m.b.length),vn(l,d,Kn),Kn);l.Ib(0,true)}d=0;do{if(l.Ia[0]){Fn(e,l,"FUSED",Kn);Fn(e,l,"BRIDGED",Kn);Fn(e,l,"SPIRO",Kn)}d++;if(d==e.length)d=0;l=e[d]}while(!this.Wk(e))}
;function Nn(){U.call(this)}H(Nn,U);D("kemia.controller.plugins.Cleanup",Nn,void 0);Nn.prototype.kc=Jh("cleanup");Nn.prototype.Cb=function(d){return d=="cleanup"};Nn.prototype.execCommand=function(){I(this.f.Z,function(d){if(d instanceof V)Mn(d);else if(d instanceof mi){I(d.sb,function(e){Mn(e)});I(d.rb,function(e){Mn(e)});On(d)}});this.f.na(this.f.Z)};Nn.prototype.r=N("kemia.controller.plugins.Cleanup");function Pn(){}H(Pn,uj);fa(Pn);Pn.prototype.j=function(d){var e={"class":"goog-inline-block "+this.Fc(d).join(" "),title:d.Sd()||""};return d.qa().j("div",e,d.eb)};Pn.prototype.Ja=B(null);Pn.prototype.p=B("goog-flat-button");Ki("goog-flat-button",function(){return new wj(null,Pn.ra())});function Qn(){}H(Qn,Pn);fa(Qn);a=Qn.prototype;a.j=function(d){var e={"class":"goog-inline-block "+this.Fc(d).join(" "),title:d.Sd()||""};return d.qa().j("div",e,[this.createCaption(d.eb,d.qa()),this.kg(d.qa())])};a.va=function(d){return d&&d.firstChild};a.createCaption=function(d,e){return e.j("div","goog-inline-block "+(this.p()+"-caption"),d)};a.kg=function(d){return d.j("div","goog-inline-block "+(this.p()+"-dropdown"),"\u00a0")};a.p=B("goog-flat-menu-button");
Ki("goog-flat-menu-button",function(){return new mk(null,null,Qn.ra())});function Rn(){}H(Rn,Qn);fa(Rn);D("kemia.controller.DefaultToolbar.makeDefaultToolbar",function(d){var e=[],h=Bk("clearEditor","Erase All","","tr-icon tr-clear");e.push(h);e.push(Bk("zoomIn","Zoom In","","tr-icon tr-zoom-in"));e.push(Bk("zoomOut","Zoom Out","","tr-icon tr-zoom-out"));h=Sn("undo","Undo","","tr-icon tr-undo");h.nc=true;e.push(h);h=Sn("redo","Redo","","tr-icon tr-redo");h.nc=true;e.push(h);h=Dk("erase","Erase","","tr-icon tr-erase");h.nc=true;e.push(h);var l=Ek("selectSymbol","Atomic Symbol","","tr-icon tr-symbol");
l.nc=true;l.$e=function(s){s=s&&s.length>0?s:null;s!=l.Ja()&&l.ta(s)};h=new Kj;h.Va(new qj(Se("DIV",{style:"color:black"},"C")));h.Va(new qj(Se("DIV",{style:"color:blue"},"N")));h.Va(new qj(Se("DIV",{style:"color:red"},"O")));h.Va(new qj(Se("DIV",{style:"color:yellow"},"S")));h.Va(new qj(Se("DIV",{style:"color:orange"},"P")));h.Va(new qj(Se("DIV",{style:"color:green"},"F")));h.Va(new qj(Se("DIV",{style:"color:green"},"Cl")));h.Va(new qj(Se("DIV",{style:"color:DarkRed"},"Br")));l.dd(h);e.push(l);var m=
Ek("selectBond","Bond Type","","tr-icon tr-bond");m.nc=true;m.$e=function(s){s!=m.Ja()&&m.ta(s)};var n=new Kj;I(Xk,function(s){n.Va(new qj(s.caption,s))});m.dd(n);e.push(m);var o=Ek("selectMoleculeTemplate","Template","","tr-icon tr-template",undefined);o.nc=true;o.$e=function(s){s!=o.Ja()&&o.ta(s)};var q=new Kj;I(Wl,function(s){q.Va(new qj(s.name,s))});o.dd(q);e.push(o);h=Dk("editPlus","Plus","","tr-icon tr-plus");h.nc=true;e.push(h);h=Dk("editArrow","Arrow","","tr-icon tr-arrow");h.nc=true;e.push(h);
e.push(Bk("cleanup","Cleanup","","tr-icon tr-cleanup"));return Tn(e,d)},void 0);function Tn(d,e){for(var h=Le(e),l=[],m=0,n;n=d[m];m++){if(F(n)){var o=void 0;if(n=Un[n]){o=n.factory||Dk;var q=n.fj,s=n.jm,t=n.caption,u=n.Zk,v=h||Le();o=o(q,s,t,u,null,v);if(n.nc)o.nc=true}n=o}n&&l.push(n)}d=Le(e);d=new tj(sj.ra(),Zi,d);h=uf(e);d.ed(h);d.oc(false);for(m=0;n=l[m];m++){Si(n,32,false);n.ed(h);d.kd(n,true)}d.J(e);return d}
function Sn(d,e,h,l,m,n){var o=Bk(d,e,h,l,m,n);o.$e=function(q){o.Kc(q)};return o}G("Format");G("Format");G("Undo");G("Redo");G("Font");G("Font size");G("Text color");G("Bold");G("Italic");G("Underline");G("Text background color");G("Add or remove link");G("Numbered list");G("Bullet list");G("Decrease indent");G("Increase indent");G("Align left");G("Align center");G("Align right");G("Justify");G("Remove formatting");G("Insert image");G("Strikethrough");G("Left-to-right");G("Right-to-left");G("Quote");
G("Edit HTML source");G("Link");G("Subscript");G("Superscript");G("Edit HTML");for(var Un={},Vn=[],Wn=0,Xn;Xn=Vn[Wn];Wn++)Un[Xn.fj]=Xn;delete Vn;function Yn(d,e){this.ob=new Gf(this);this.ff=d;this.vb=e;this.Tg=[];Rf(this.vb,function(h){h.nc&&this.Tg.push(Zn(this,Mf(h)))},this);this.vb.oc(false);this.ob.v(this.ff,Rh,this.Ck).v(this.vb,"action",this.Bj)}H(Yn,wc);D("kemia.controller.ToolbarController",Yn,void 0);function Zn(d,e){return e}a=Yn.prototype;a.zb=w("ob");a.Za=function(){return this.vb.Za()};a.ub=function(d){this.vb.ub(d)};a.da=function(){return this.vb.da()};a.Kc=function(d){this.vb.Kc(d)};a.blur=function(){this.vb.Wc(null)};
a.k=function(){Yn.g.k.call(this);if(this.ob){this.ob.ca();delete this.ob}if(this.vb){this.vb.ca();delete this.vb}delete this.ff;delete this.Tg};a.Ck=function(d){this.r.info("updateToolbar");if(this.vb.da()&&this.dispatchEvent("change")){var e;try{e=this.ff.queryCommandValue(d.al||this.Tg)}catch(h){e={}}d=e;this.r.info("updateToobarFromState");for(var l in d)if(e=Pf(this.vb,l)){var m=d[l];this.r.info(l+": "+m);e.$e?e.$e(m):Qi(e,!!m)}}};
a.Bj=function(d){var e;e=Mf(d.target);var h=d.target.Ja(),l;if(d.target.Af)l=d.target.Af();this.ff.execCommand(e,h,l,d)};a.r=N("kemia.controller.ToolbarController");function mi(){this.uf="";this.sb=[];this.rb=[];this.wc=[];this.$d=[];this.gj=this.pk=""}mi.prototype.getHeader=w("uf");D("kemia.model.Reaction.prototype.getHeader",mi.prototype.getHeader,void 0);function Nk(d,e){d.sb.push(e);e.cb=d}function Ok(d,e){d.rb.push(e);e.cb=d}function Pk(d,e){if(K(d.sb,e)){Ga(d.sb,e);e.cb=undefined}else if(K(d.rb,e)){Ga(d.rb,e);e.cb=undefined}}function Al(d,e){d.$d.push(e);e.cb=d}function Qk(d,e){Ga(d.$d,e);e.cb=undefined}
function ni(d,e){var h;I(e,function(l){h&&Al(this,$n(this,[h,l]));h=l},d)}function oi(d,e,h){e=d.ld(e);h=d.ld(h);h=new O((e.right+h.left)/2,(e.top+h.bottom)/2);d.wc.push(h);h.cb=d}mi.prototype.ld=function(d){d=Ra(J(d,function(e){return e.b}));d=J(d,function(e){return e.a});return Hd.apply(null,d)};function $n(d,e){d=d.ld(e);return new O((d.left+d.right)/2,(d.top+d.bottom)/2)}
function On(d){var e;I(Ia(d.sb,d.rb),function(h){var l=hd(this.ld([h]));if(e){var m;a:{m=Math.max(e.left,l.left);var n=Math.min(e.left+e.width,l.left+l.width);if(m<=n){var o=Math.max(e.top,l.top),q=Math.min(e.top+e.height,l.top+l.height);if(o<=q){m=new Kd(m,o,n-m,q-o);break a}}m=null}m&&Sl(this,h,new O(4+e.left+e.width-l.left,0));l=e;h=hd(this.ld([h]));m=Math.max(l.left+l.width,h.left+h.width);n=Math.max(l.top+l.height,h.top+h.height);l.left=Math.min(l.left,h.left);l.top=Math.min(l.top,h.top);l.width=
m-l.left;l.height=n-l.top}else e=l},d)}function Sl(d,e,h){I(e.b,function(l){l.a=Fd(l.a,h)});return e}function Vl(d,e,h,l){var m=$f(new id,Md(h),l.x,l.y);I(e.b,function(n){n.a=P(m,[n.a])[0]});return e};function ao(d){if(d.ea==oe)return"SINGLE_BOND";if(d.ea==2)return"DOUBLE_BOND";if(d.ea==3)return"TRIPLE_BOND";if(d.ea==4)return"QUADRUPLE_BOND";throw new Error("Invalid bond type ["+d.toString()+"]");}function bo(d){if(d.$==11)return"SINGLE_BOND_UP";if(d.$==13)return"SINGLE_BOND_DOWN";if(d.$==12)return"SINGLE_BOND_UP_OR_DOWN";return"NOT_STEREO"}
function co(d,e,h,l){switch(d){case "SINGLE_BOND":switch(e){case "NOT_STEREO":return new S(h,l);case "SINGLE_BOND_UP":return new S(h,l,oe,11);case "SINGLE_BOND_UP_OR_DOWN":return new S(h,l,oe,12);case "SINGLE_BOND_DOWN":return new S(h,l,oe,13);default:throw new Error("invalid bond type/stereo ["+d+"]/["+e+"]");}case "DOUBLE_BOND":return new S(h,l,2);case "TRIPLE_BOND":return new S(h,l,3);case "QUADRUPLE_BOND":return new S(h,l,4);case "AROMATIC":return new S(h,l,undefined,undefined,true);case "SINGLE_OR_DOUBLE":case "SINGLE_OR_AROMATIC":case "DOUBLE_OR_AROMATIC":case "ANY":default:throw new Error("invalid bond type/stereo ["+
d+"]/["+e+"]");}}function Rl(d){d=d.constructor==String?dl(d):d;var e=new V;e.name=d.name;I(d.atoms,function(h){e.Sa(new Q(h.symbol,h.coord.x,h.coord.y,h.charge))});I(d.bondindex,function(h){e.Ua(co(h.type,h.stereo,e.q(h.source),e.q(h.target)))});return e}D("kemia.io.json.readMolecule",Rl,void 0);D("kemia.io.json.writeMolecule",function(d){return fl(new el,eo(d))},void 0);
function eo(d){var e=J(d.b,function(l){return{A:l.A,a:{x:l.a.x,y:l.a.y},Wa:l.Wa}}),h=J(d.h,function(l){var m=ao(l),n=bo(l);return{source:d.xa(l.source),target:d.xa(l.target),type:m,$:n}});return{name:d.name,b:e,Xk:h}}function wl(d){d=d.constructor==String?dl(d):d;var e=new mi;e.uf=d.header;I(d.reactants,function(h){Nk(e,Rl(h))});I(d.products,function(h){Ok(e,Rl(h))});return e}D("kemia.io.json.readReaction",wl,void 0);function rl(d){var e=d.uf,h=J(d.sb,eo);d=J(d.rb,eo);return{uf:e,sb:h,rb:d}}
D("kemia.io.json.writeReaction",function(d){return fl(new el,rl(d))},void 0);var fo=3;fo=3;
function go(d,e,h,l){switch(d){case 1:switch(e){case 0:return new S(h,l);case 1:return new S(h,l,oe,11);case 4:return new S(h,l,oe,12);case 6:return new S(h,l,oe,13);default:throw new Error("invalid bond type/stereo ["+d+"]/["+e+"]");}case 2:return new S(h,l,2);case fo:return new S(h,l,3);case 4:d=new S(h,l);d.dc=true;return d;case 5:throw new Error("type not implemented ["+d+"]");case 6:throw new Error("type not implemented ["+d+"]");case 7:throw new Error("type not implemented ["+d+"]");case 8:throw new Error("type not implemented ["+
d+"]");default:throw new Error("invalid bond type/stereo ["+d+"]/["+e+"]");}}
function ho(d){d=d.split(d.indexOf("\r\n")>0?"\r\n":"\n");for(var e=new V(d[0]),h=parseInt(d[3].substr(0,3),10),l=parseInt(d[3].substr(3,3),10),m=1;m<=h;m++){var n=d[m+3],o=n.substr(30,4).replace(/(^\s*)|(\s*$)/g,""),q=parseFloat(n.substr(0,10)),s=parseFloat(n.substr(10,10));n=parseInt(n.substr(36,3),10);var t=0;if(n!=0)if(n==1)t=3;else if(n==2)t=2;else if(n==3)t=1;else if(n!=4)if(n==5)t=-1;else if(n==6)t=-2;else if(n==7)t=-3;n=new Q(o,q,s,t);e.Sa(n)}for(m=1;m<=l;m++){n=d[m+3+h];t=e.q(parseInt(n.substr(0,
3),10)-1);o=e.q(parseInt(n.substr(3,3),10)-1);n=go(parseInt(n.substr(6,3),10),parseInt(n.substr(9,3),10),t,o);e.Ua(n)}m=4+h+l;h=d.length;for(l=false;;){n=d[m++];if(m==h||n.indexOf("M  END")>=0)break;if(n.indexOf("M  CHG")>=0){if(!l){t=0;for(l=e.b.length;t<l;t++)e.q(t).Wa=0;l=true}o=parseInt(n.substr(6,3),10);for(q=0;q<o;q++){s=parseInt(n.substr(10+8*q,3),10);t=parseInt(n.substr(14+8*q,3),10);e.q(s-1).Wa=t}}}return e}D("kemia.io.mdl.readMolfile",ho,void 0);D("kemia.io.mdl.readMolfile",ho,void 0);D("kemia.io.smiles.SmilesGenerator.generate",function(d,e){if(d.b.length==0)return"shit "+d.b.length;var h=0;for(i=0;i<d.b.length;i++){var l=d.q(i);l.a.x==0&&l.a.y==0&&h++}if(e&&h==d.b.length)throw"Atoms have no 2D coordinates, but 2D coordinates are needed for creating chiral smiles";e&&rings.jl();return"todo.."},void 0);function io(d,e,h){this.type=d;this.Hb=e;this.ae=h;this.Yf=ee(h);this.bd=[];this.be=[];this.ec=[]};function jo(d){this.Hb=d}D("kemia.query.DFSMapper",jo,void 0);function ko(d,e){if(d.bd.length===d.Hb.b.length){for(var h=new Dc,l=0,m=d.bd.length;l<m;l++)h.ya(d.Hb.xa(d.bd[l]),d.ae.xa(d.be[l]));if(d.type===1){d=h.fa();d.sort(function(q,s){return q-s});var n=true;l=0;for(m=e.length;l<m;l++){var o=e[l].fa();o.sort(function(q,s){return q-s});if(Na(d,o))n=false}n&&e.push(h)}else e.push(h)}}
function lo(d,e,h,l){for(var m=e.Qd(),n=h.Qd(),o=[],q=0,s=m.length;q<s;q++)for(var t=m[q],u=0,v=n.length;u<v;u++)o.push({nk:e,ni:t,mk:h,mi:n[u]});for(d.ec.length?d.ec.push(d.ec[d.ec.length-1].concat(o)):d.ec.push(o);d.ec[d.ec.length-1].length;){e=d.ec[d.ec.length-1].pop();o=e.nk;n=e.mk;h=e.ni;m=e.mi;if(xa(d.bd,h)!==-1)h=false;else if(xa(d.be,m)!==-1)h=false;else if(h.De(m,d.ae,d.Yf)){o=d.Hb.yb(o,h);n=d.ae.yb(n,m);if(o.De(n,d.ae)){d.bd.push(h);d.be.push(m);ko(d,l);h=true}else h=false}else h=false;
if(h){lo(d,e.ni,e.mi,l);d.bd.pop();d.be.pop();d.ec.pop()}}}jo.prototype.$j=function(d){for(var e=[],h=this.Hb.q(0),l=0,m=d.b.length;l<m;l++){var n=new io(1,this.Hb,d),o=d.q(l);if(h.De(o))if(this.Hb.b.length>1){n.bd.push(h);n.be.push(o);lo(n,h,o,e)}else{var q=new Dc;q.ya(n.Hb.xa(h),n.ae.xa(o));e.push(q)}}return e};D("kemia.query.DFSMapper.prototype.mapUnique",jo.prototype.$j,void 0);Dc.prototype.getCount=Dc.prototype.mb;
jo.prototype.Zj=function(d){for(var e=[],h=this.Hb.q(0),l=0,m=d.b.length;l<m;l++){var n=new io(0,this.Hb,d),o=d.q(l);if(h.De(o)){if(this.Hb.b.length>1){n.bd.push(h);n.be.push(o);lo(n,h,o,e)}else{d=new Dc;d.ya(n.Hb.xa(h),n.ae.xa(o));return d}if(e.length)return e[0]}}return new Dc};D("kemia.query.DFSMapper.prototype.mapFirst",jo.prototype.Zj,void 0);var mo=new RegExp(/\[[^[]+\]|Br|B|Cl|C|N|F|O|P]|S|c|n|o|s|-|=|#|%[0-9][0-9]|[0-9]|\(|\)|./g),no=new RegExp(/^\[([0-9]*)([A-Z][a-z]?|c|n|o|se|s|as)(@|@@)?(H)?([0-9])?([+-][\d]?)?\]$/),oo=["C","c","N","n","O","o","S","s","P","F","Br","Cl","I","B"],po=["c","n","o","s","as","se"];
function qo(d){for(var e=d.match(mo),h=new V(d),l=0,m,n="NONE",o=[],q=[],s="",t=[],u=0;u<e.length;u++){var v=e[u];if(v!=".")if(v=="(")o.push(m);else if(v==")")if(o.length)m=o.pop();else s=" unbalanced parens";else if(v=="-")n="-";else if(v=="=")n="=";else if(v=="#")n="#";else if(v=="$")n="$";else if(v==":")n=":";else if(v[0]=="%"){ringid=parseInt(v[1]+v[2],10);if(ring_atom=q[ringid]){h.Ua(ro(n,m,ring_atom));n="NONE";q[ringid]=null}else q[ringid]=m}else if(v!="/")if(v!="\\")if(isNaN(ringid=parseInt(v,
10))){var A={Ef:null,symbol:null,$:"NONE",Rj:null,Wa:null,dc:false,Ah:false},E=no.exec(v);if(E){A.Ef=E[1];if(so[E[2]])A.A=E[2];if(E[3]=="@"||E[3]=="@@"){A.$=E[3];if(E[4]=="H")A.Ah=true}else A.$="NONE";if(E[4]=="H")A.Rj=E[5]?E[5]:1;A.Wa=E[6]=="+"?1:E[6]=="-"?-1:parseInt(E[6],10)}else if(K(oo,v))A.A=v;if(K(po,A.A)){A.dc=true;A.A=A.A.length==1?A.A.toUpperCase():A.A[0].toUpperCase()+A.A[1]}smi_atom=A;if(smi_atom.A){l+=1;v=new Q(smi_atom.A,0,0,smi_atom.Wa,smi_atom.dc,smi_atom.Ef);if(m){h.Ua(ro(n,m,v));
n="NONE"}h.Sa(v);if(smi_atom.$!="NONE"){t.push(h.xa(v));t.push(smi_atom.$);t.push(smi_atom.Ah)}m=v}else s=" unknown atom "+v}else if(ring_atom=q[ringid]){h.Ua(ro(n,m,ring_atom));n="NONE";q[ringid]=null}else q[ringid]=m;if(s)throw new Error(d+s);}to(h,t);if(o.length)throw new Error(smi+" unbalanced parens");for(d=0;d<q.length;++d)if(q[d])throw new Error(smi+" unclosed rings");if(n!="NONE")throw new Error(smi+" unpaired bond "+n);return h}D("kemia.io.smiles.SmilesParser.parse",qo,void 0);
function ro(d,e,h){var l=d;if(d=="NONE")l=e.dc&&h.dc?":":"-";switch(l){case "-":return new S(e,h,oe);case "=":return new S(e,h,2);case "#":return new S(e,h,3);case ":":d=new S(e,h);d.dc=true;return d;case "~":default:throw new Error("invalid bond type/stereo ["+d+"]/["+stereo+"]");}}
function to(d,e){c=0;for(centers=e.length;c<centers;c++){var h=d.q(e[c]);if(h!=undefined){var l=e[++c];++c;var m=[],n=0,o=null;I(d.b,function(s){bond_=d.yb(h,s);if(bond_!=null&&bond_!=undefined){if(bond_.source!=h){bond_.source=h;bond_.target=s}n++;a:{s=bond_;rings=ee(d);r=0;for(ringCount=rings.length;r<ringCount;r++){b=0;for(bondCount=rings[r].h.length;b<bondCount;b++)if(s==rings[r].h[b]){s=true;break a}}s=false}s||m.push(bond_)}});var q=m.length;if((n==3||n==4)&&q>0){bondidx=0;if(n==3&&q>1||n==
4&&q>2)bondidx=1;o=m[bondidx];o.$=l=="@"?11:13}if(n==4&&q>1){bondidx=1;if(q==4)bondidx=3;else if(q==4)bondidx=2;o=m[bondidx];o.$=l=="@"?13:11}}}}
var so={H:{number:1,name:"Hydrogen"},He:{number:2,name:"Helium"},Li:{number:3,name:"Lithium"},Be:{number:4,name:"Beryllium"},B:{number:5,name:"Boron"},C:{number:6,name:"Carbon"},c:{number:6,name:"Carbon"},N:{number:7,name:"Nitrogen"},n:{number:7,name:"Nitrogen"},O:{number:8,name:"Oxygen"},o:{number:8,name:"Oxygen"},F:{number:9,name:"Fluorine"},Ne:{number:10,name:"Neon"},Na:{number:11,name:"Sodium"},Mg:{number:12,name:"Magnesium"},Al:{number:13,name:"Aluminium"},Si:{number:14,name:"Silicon"},P:{number:15,
name:"Phosphorus"},S:{number:16,name:"Sulfur"},s:{number:16,name:"Sulfur"},Cl:{number:17,name:"Chlorine"},Ar:{number:18,name:"Argon"},K:{number:19,name:"Potassium"},Ca:{number:20,name:"Calcium"},Sc:{number:21,name:"Scandium"},Ti:{number:22,name:"Titanium"},V:{number:23,name:"Vanadium"},Cr:{number:24,name:"Chromium"},Mn:{number:25,name:"Manganese"},Fe:{number:26,name:"Iron"},Co:{number:27,name:"Cobalt"},Ni:{number:28,name:"Nickel"},Cu:{number:29,name:"Copper"},Zn:{number:30,name:"Zinc"},Ga:{number:31,
name:"Gallium"},Ge:{number:32,name:"Germanium"},As:{number:33,name:"Arsenic"},as:{number:33,name:"Arsenic"},Se:{number:34,name:"Selenium"},se:{number:34,name:"Selenium"},Br:{number:35,name:"Bromine"},Kr:{number:36,name:"Krypton"},Rb:{number:37,name:"Rubidium"},Sr:{number:38,name:"Strontium"},Y:{number:39,name:"Yttrium"},Zr:{number:40,name:"Zirconium"},Nb:{number:41,name:"Niobium"},Mo:{number:42,name:"Molybdenum"},Tc:{number:43,name:"Technetium"},Ru:{number:44,name:"Ruthenium"},Rh:{number:45,name:"Rhodium"},
Pd:{number:46,name:"Palladium"},Ag:{number:47,name:"Silver"},Cd:{number:48,name:"Cadmium"},In:{number:49,name:"Indium"},Sn:{number:50,name:"Tin"},Sb:{number:51,name:"Antimony"},Te:{number:52,name:"Tellurium"},I:{number:53,name:"Iodine"},Xe:{number:54,name:"Xenon"},Cs:{number:55,name:"Caesium"},Ba:{number:56,name:"Barium"},La:{number:57,name:"Lanthanum"},Ce:{number:58,name:"Cerium"},Pr:{number:59,name:"Praseodymium"},Nd:{number:60,name:"Neodymium"},Pm:{number:61,name:"Promethium"},Sm:{number:62,name:"Samarium"},
Eu:{number:63,name:"Europium"},Gd:{number:64,name:"Gadolinium"},Tb:{number:65,name:"Terbium"},Dy:{number:66,name:"Dysprosium"},Ho:{number:67,name:"Holmium"},Er:{number:68,name:"Erbium"},Tm:{number:69,name:"Thulium"},Yb:{number:70,name:"Ytterbium"},Lu:{number:71,name:"Lutetium"},Hf:{number:72,name:"Hafnium"},Ta:{number:73,name:"Tantalum"},W:{number:74,name:"Tungsten"},Re:{number:75,name:"Rhenium"},Os:{number:76,name:"Osmium"},Ir:{number:77,name:"Iridium"},Pt:{number:78,name:"Platinum"},Au:{number:79,
name:"Gold"},Hg:{number:80,name:"Mercury"},Tl:{number:81,name:"Thallium"},Pb:{number:82,name:"Lead"},Bi:{number:83,name:"Bismuth"},Po:{number:84,name:"Polonium"},At:{number:85,name:"Astatine"},Rn:{number:86,name:"Radon"},Fr:{number:87,name:"Francium"},Ra:{number:88,name:"Radium"},Ac:{number:89,name:"Actinium"},Th:{number:90,name:"Thorium"},Pa:{number:91,name:"Protactinium"},U:{number:92,name:"Uranium"},Np:{number:93,name:"Neptunium"},Pu:{number:94,name:"Plutonium"},Am:{number:95,name:"Americium"},
Cm:{number:96,name:"Curium"},Bk:{number:97,name:"Berkelium"},Cf:{number:98,name:"Californium"},Es:{number:99,name:"Einsteinium"},Fm:{number:100,name:"Fermium"},Md:{number:101,name:"Mendelevium"},No:{number:102,name:"Nobelium"},Lr:{number:103,name:"Lawrencium"},Rf:{number:104,name:"Rutherfordium"},Db:{number:105,name:"Dubnium"},Sg:{number:106,name:"Seaborgium"},Bh:{number:107,name:"Bohrium"},Hs:{number:108,name:"Hassium"},Mt:{number:109,name:"Meitnerium"},Ds:{number:110,name:"Darmstadtium"},Rg:{number:111,
name:"Roentgenium"},Cn:{number:112,name:"Copernicium"}};function uo(){this.b=[];this.h=[];this.Pl=false}a=uo.prototype;a.Fh=function(){return this.b.length};a.xa=function(d){return xa(this.b,d)};a.q=function(d){return this.b[d]};a.Sa=function(d){this.b.push(d)};a.Ua=function(d){d.source.Og.push(d.target);d.target.Og.push(d.source);this.h.push(d)};a.yb=function(d,e){for(var h=0,l=this.h.length;h<l;h++){var m=this.h[h];if(d===m.source&&e===m.target||e===m.source&&d===m.target)return m}return null};function vo(){this.fh=[];this.Dk=0;this.Og=[]}vo.prototype.De=function(d){var e=true;if(this.fh.length)if(xa(this.fh,d.A)===-1)e=false;d=this.Dk<=d.fb();return e&&d};vo.prototype.Qd=w("Og");function wo(d,e){this.Qg=[];this.source=d;this.target=e}wo.prototype.De=function(d){if(!this.Qg.length)return true;if(xa(this.Qg,d.ea)!==-1)return true;return false};function xo(){}D("kemia.query.MoleculeCompiler",xo,void 0);xo.prototype.compile=function(d){for(var e=new uo,h=0,l=d.b.length;h<l;h++){var m=new vo;m.fh.push(d.q(h).A);e.Sa(m)}h=0;for(l=d.fb();h<l;h++){m=d.h[h];var n=e.q(d.xa(m.source)),o=e.q(d.xa(m.target));n=new wo(n,o);n.Qg.push(m.ea);e.Ua(n)}return e};D("kemia.query.MoleculeCompiler.prototype.compile",xo.prototype.compile,void 0);function yo(){}D("kemia.query.SmilesCompiler",yo,void 0);yo.prototype.compile=function(d){d=qo(d);return(new xo).compile(d)};D("kemia.query.SmilesCompiler.prototype.compile",yo.prototype.compile,void 0);

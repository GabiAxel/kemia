<!DOCTYPE html>
<!--TODO: License and copyright-->
<html>
<head>
<title>Molblock to JSON with render</title>
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
<script src="../../third-party/closure/closure/goog/base.js"></script>
<script src="../deps.js"></script>
<script>
    goog.require('jchemhub.controller.Controller');
	goog.require('jchemhub.io.json');
	goog.require('goog.events.EventType');
	goog.require('goog.dom');
	goog.require('goog.format.JsonPrettyPrinter');
</script>

<script src="../render/render_demo_molsample.js"></script>

<script>
function loadMol() {
	molblock = document.getElementById("molblock");
	molblock.value = molsample;
}
function showMol(molblock) {
	var mol = jchemhub.io.mdl.readMolfile(molblock);
	var jmol = showJSON(mol);
	renderMol(jmol);
}
function showJSON(mol) {
	var jblock = document.getElementById("jsonblock");
	var pretty = new goog.format.JsonPrettyPrinter();
	var jmol = jchemhub.io.json.writeMolecule(mol);
	jblock.value = pretty.format(jmol);
	return jmol;
}
function renderMol(jmol) {

	var model = jchemhub.io.json.readMolecule(jmol);
	var controller = new jchemhub.controller.Controller(goog.dom.getElement('reactionEditorContainer'));
	controller.setModel(model);
}
	
</script>
</head>
<body onLoad="loadMol()">
<form>
<textarea id="molblock" name="molblock" cols=80>Paste molblock here</textarea>
<input type=button value="render" onClick="showMol(molblock.value)">
<BR>
<textarea id="jsonblock" cols=80>JSON will appear here</textarea>
</form>

	<div id="reactionEditorContainer" style="width: 400px; height: 400px"></div>
    
</body>
</html>
